/* v0.6.3 */
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.filestack=factory()})(this,function(){"use strict";var commonjsGlobal=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else{return Array.from(arr)}};var es6Promise=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){"use strict";function objectOrFunction(x){return typeof x==="function"||(typeof x==="undefined"?"undefined":_typeof(x))==="object"&&x!==null}function isFunction(x){return typeof x==="function"}var _isArray=undefined;if(!Array.isArray){_isArray=function _isArray(x){return Object.prototype.toString.call(x)==="[object Array]"}}else{_isArray=Array.isArray}var isArray=_isArray;var len=0;var vertxNext=undefined;var customSchedulerFn=undefined;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2){if(customSchedulerFn){customSchedulerFn(flush)}else{scheduleFlush()}}};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow=typeof window!=="undefined"?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){if(typeof vertxNext!=="undefined"){return function(){vertxNext(flush)}}return useSetTimeout()}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined}len=0}function attemptVertx(){try{var r=commonjsRequire;var vertx=r("vertx");vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=undefined;if(isNode){scheduleFlush=useNextTick()}else if(BrowserMutationObserver){scheduleFlush=useMutationObserver()}else if(isWorker){scheduleFlush=useMessageChannel()}else if(browserWindow===undefined&&typeof commonjsRequire==="function"){scheduleFlush=attemptVertx()}else{scheduleFlush=useSetTimeout()}function then(onFulfillment,onRejection){var _arguments=arguments;var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined){makePromise(child)}var _state=parent._state;if(_state){(function(){var callback=_arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})})()}else{subscribe(parent,child,onFulfillment,onRejection)}return child}function resolve(object){var Constructor=this;if(object&&(typeof object==="undefined"?"undefined":_typeof(object))==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(noop);_resolve(promise,object);return promise}var PROMISE_ID=Math.random().toString(36).substring(16);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;var GET_THEN_ERROR=new ErrorObject;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){GET_THEN_ERROR.error=error;return GET_THEN_ERROR}}function tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then){asap(function(promise){var sealed=false;var error=tryThen(then,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){_resolve(promise,value)}else{fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;_reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;_reject(promise,error)}},promise)}function handleOwnThenable(promise,thenable){if(thenable._state===FULFILLED){fulfill(promise,thenable._result)}else if(thenable._state===REJECTED){_reject(promise,thenable._result)}else{subscribe(thenable,undefined,function(value){return _resolve(promise,value)},function(reason){return _reject(promise,reason)})}}function handleMaybeThenable(promise,maybeThenable,then$$){if(maybeThenable.constructor===promise.constructor&&then$$===then&&maybeThenable.constructor.resolve===resolve){handleOwnThenable(promise,maybeThenable)}else{if(then$$===GET_THEN_ERROR){_reject(promise,GET_THEN_ERROR.error);GET_THEN_ERROR.error=null}else if(then$$===undefined){fulfill(promise,maybeThenable)}else if(isFunction(then$$)){handleForeignThenable(promise,maybeThenable,then$$)}else{fulfill(promise,maybeThenable)}}}function _resolve(promise,value){if(promise===value){_reject(promise,selfFulfillment())}else if(objectOrFunction(value)){handleMaybeThenable(promise,value,getThen(value))}else{fulfill(promise,value)}}function publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}publish(promise)}function fulfill(promise,value){if(promise._state!==PENDING){return}promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0){asap(publish,promise)}}function _reject(promise,reason){if(promise._state!==PENDING){return}promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise)}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state){asap(publish,parent)}}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child=undefined,callback=undefined,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function ErrorObject(){this.error=null}var TRY_CATCH_ERROR=new ErrorObject;function tryCatch(callback,detail){try{return callback(detail)}catch(e){TRY_CATCH_ERROR.error=e;return TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=undefined,error=undefined,succeeded=undefined,failed=undefined;if(hasCallback){value=tryCatch(callback,detail);if(value===TRY_CATCH_ERROR){failed=true;error=value.error;value.error=null}else{succeeded=true}if(promise===value){_reject(promise,cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==PENDING){}else if(hasCallback&&succeeded){_resolve(promise,value)}else if(failed){_reject(promise,error)}else if(settled===FULFILLED){fulfill(promise,value)}else if(settled===REJECTED){_reject(promise,value)}}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){_resolve(promise,value)},function rejectPromise(reason){_reject(promise,reason)})}catch(e){_reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID]){makePromise(this.promise)}if(isArray(input)){this._input=input;this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){fulfill(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){fulfill(this.promise,this._result)}}}else{_reject(this.promise,validationError())}}function validationError(){return new Error("Array Methods must be provided an Array")}Enumerator.prototype._enumerate=function(){var length=this.length;var _input=this._input;for(var i=0;this._state===PENDING&&i<length;i++){this._eachEntry(_input[i],i)}};Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve$$=c.resolve;if(resolve$$===resolve){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING){this._settledAt(entry._state,i,entry._result)}else if(typeof _then!=="function"){this._remaining--;this._result[i]=entry}else if(c===Promise){var promise=new c(noop);handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i)}else{this._willSettleAt(new c(function(resolve$$){return resolve$$(entry)}),i)}}else{this._willSettleAt(resolve$$(entry),i)}};Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED){_reject(promise,value)}else{this._result[i]=value}}if(this._remaining===0){fulfill(promise,this._result)}};Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})};function all(entries){return new Enumerator(this,entries).promise}function race(entries){var Constructor=this;if(!isArray(entries)){return new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject)}})}}function reject(reason){var Constructor=this;var promise=new Constructor(noop);_reject(promise,reason);return promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Promise(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=="function"&&needsResolver();this instanceof Promise?initializePromise(this,resolver):needsNew()}}Promise.all=all;Promise.race=race;Promise.resolve=resolve;Promise.reject=reject;Promise._setScheduler=setScheduler;Promise._setAsap=setAsap;Promise._asap=asap;Promise.prototype={constructor:Promise,then:then,catch:function _catch(onRejection){return this.then(null,onRejection)}};function polyfill(){var local=undefined;if(typeof commonjsGlobal!=="undefined"){local=commonjsGlobal}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if(promiseToString==="[object Promise]"&&!P.cast){return}}local.Promise=Promise}Promise.polyfill=polyfill;Promise.Promise=Promise;return Promise})});var auto=es6Promise.polyfill();var _global=createCommonjsModule(function(module){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global});var _core=createCommonjsModule(function(module){var core=module.exports={version:"2.4.0"};if(typeof __e=="number")__e=core});var _isObject=function _isObject(it){return(typeof it==="undefined"?"undefined":_typeof(it))==="object"?it!==null:typeof it==="function"};var isObject=_isObject;var _anObject=function _anObject(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it};var _fails=function _fails(exec){try{return!!exec()}catch(e){return true}};var _descriptors=!_fails(function(){return Object.defineProperty({},"a",{get:function get(){return 7}}).a!=7});var isObject$1=_isObject;var document$1=_global.document;var is=isObject$1(document$1)&&isObject$1(document$1.createElement);var _domCreate=function _domCreate(it){return is?document$1.createElement(it):{}};var _ie8DomDefine=!_descriptors&&!_fails(function(){return Object.defineProperty(_domCreate("div"),"a",{get:function get(){return 7}}).a!=7});var isObject$2=_isObject;var _toPrimitive=function _toPrimitive(it,S){if(!isObject$2(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!isObject$2(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!isObject$2(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!isObject$2(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")};var anObject=_anObject;var IE8_DOM_DEFINE=_ie8DomDefine;var toPrimitive=_toPrimitive;var dP$1=Object.defineProperty;var f=_descriptors?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP$1(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O};var _objectDp={f:f};var _propertyDesc=function _propertyDesc(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}};var dP=_objectDp;var createDesc=_propertyDesc;var _hide=_descriptors?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object};var hasOwnProperty={}.hasOwnProperty;var _has=function _has(it,key){return hasOwnProperty.call(it,key)};var id=0;var px=Math.random();var _uid=function _uid(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))};var _redefine=createCommonjsModule(function(module){var global=_global,hide=_hide,has=_has,SRC=_uid("src"),TO_STRING="toString",$toString=Function[TO_STRING],TPL=(""+$toString).split(TO_STRING);_core.inspectSource=function(it){return $toString.call(it)};(module.exports=function(O,key,val,safe){var isFunction=typeof val=="function";if(isFunction)has(val,"name")||hide(val,"name",key);if(O[key]===val)return;if(isFunction)has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)));if(O===global){O[key]=val}else{if(!safe){delete O[key];hide(O,key,val)}else{if(O[key])O[key]=val;else hide(O,key,val)}}})(Function.prototype,TO_STRING,function toString(){return typeof this=="function"&&this[SRC]||$toString.call(this)})});var _aFunction=function _aFunction(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it};var aFunction=_aFunction;var _ctx=function _ctx(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}};var global$1=_global;var core=_core;var hide=_hide;var redefine=_redefine;var ctx=_ctx;var PROTOTYPE="prototype";var $export$1=function $export(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global$1:IS_STATIC?global$1[name]||(global$1[name]={}):(global$1[name]||{})[PROTOTYPE],exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={}),key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;out=(own?target:source)[key];exp=IS_BIND&&own?ctx(out,global$1):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(target)redefine(target,key,out,type&$export.U);if(exports[key]!=out)hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out}};global$1.core=core;$export$1.F=1;$export$1.G=2;$export$1.S=4;$export$1.P=8;$export$1.B=16;$export$1.W=32;$export$1.U=64;$export$1.R=128;var _export=$export$1;var toString={}.toString;var _cof=function _cof(it){return toString.call(it).slice(8,-1)};var cof=_cof;var _iobject=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)};var _defined=function _defined(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it};var IObject$1=_iobject;var defined=_defined;var _toIobject=function _toIobject(it){return IObject$1(defined(it))};var ceil=Math.ceil;var floor=Math.floor;var _toInteger=function _toInteger(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)};var toInteger=_toInteger;var min=Math.min;var _toLength=function _toLength(it){return it>0?min(toInteger(it),9007199254740991):0};var toInteger$1=_toInteger;var max=Math.max;var min$1=Math.min;var _toIndex=function _toIndex(index,length){index=toInteger$1(index);return index<0?max(index+length,0):min$1(index,length)};var toIObject$1=_toIobject;var toLength=_toLength;var toIndex=_toIndex;var _arrayIncludes=function _arrayIncludes(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject$1($this),length=toLength(O.length),index=toIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++){if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}}return!IS_INCLUDES&&-1}};var global$2=_global;var SHARED="__core-js_shared__";var store=global$2[SHARED]||(global$2[SHARED]={});var _shared=function _shared(key){return store[key]||(store[key]={})};var shared=_shared("keys");var uid=_uid;var _sharedKey=function _sharedKey(key){return shared[key]||(shared[key]=uid(key))};var has=_has;var toIObject=_toIobject;var arrayIndexOf=_arrayIncludes(false);var IE_PROTO=_sharedKey("IE_PROTO");var _objectKeysInternal=function _objectKeysInternal(object,names){var O=toIObject(object),i=0,result=[],key;for(key in O){if(key!=IE_PROTO)has(O,key)&&result.push(key)}while(names.length>i){if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}}return result};var _enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");var $keys=_objectKeysInternal;var enumBugKeys=_enumBugKeys;var _objectKeys=Object.keys||function keys(O){return $keys(O,enumBugKeys)};var f$1=Object.getOwnPropertySymbols;var _objectGops={f:f$1};var f$2={}.propertyIsEnumerable;var _objectPie={f:f$2};var defined$1=_defined;var _toObject=function _toObject(it){return Object(defined$1(it))};var getKeys=_objectKeys;var gOPS=_objectGops;var pIE=_objectPie;var toObject=_toObject;var IObject=_iobject;var $assign=Object.assign;var _objectAssign=!$assign||_fails(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";A[S]=7;K.split("").forEach(function(k){B[k]=k});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join("")!=K})?function assign(target,source){var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;while(aLen>index){var S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0,key;while(length>j){if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}}return T}:$assign;var $export=_export;$export($export.S+$export.F,"Object",{assign:_objectAssign});var ENV={storeApiUrl:"https://www.filestackapi.com/api/store",fileApiUrl:"https://www.filestackapi.com/api/file",uploadApiUrl:"https://upload.filestackapi.com",cloudApiUrl:"https://cloud.filestackapi.com",processApiUrl:"https://process.filestackapi.com"};var isFunction=function isFunction(x){return typeof x==="function"};var isNil=function isNil(x){return x===null||x===void 0};var fail=function fail(message){throw new TypeError("[tcomb] "+message)};var getFunctionName=function getFunctionName(f){return f.displayName||f.name||"<function"+f.length+">"};function replacer(key,value){if(typeof value==="function"){return getFunctionName(value)}return value}var stringify$1=function stringify(x){try{return JSON.stringify(x,replacer,2)}catch(e){return String(x)}};function assert(guard,message){if(guard!==true){if(isFunction(message)){message=message()}else if(isNil(message)){message='Assert failed (turn on "Pause on exceptions" in your Source panel)'}assert.fail(message)}}assert.fail=fail;assert.stringify=stringify$1;var assert_1=assert;var isString=function isString(x){return typeof x==="string"};var isArray=function isArray(x){return Array.isArray?Array.isArray(x):x instanceof Array};var isObject$3=function isObject(x){return!isNil(x)&&(typeof x==="undefined"?"undefined":_typeof(x))==="object"&&!isArray(x)};var isType=function isType(x){return isFunction(x)&&isObject$3(x.meta)};var getTypeName=function getTypeName(ctor){if(isType(ctor)){return ctor.displayName}return getFunctionName(ctor)};var irreducible=function irreducible(name,predicate){function Irreducible(value,path){return value}Irreducible.meta={kind:"irreducible",name:name,predicate:predicate,identity:true};Irreducible.displayName=name;Irreducible.is=predicate;return Irreducible};var Any=irreducible("Any",function(){return true});var _Array=irreducible("Array",isArray);var isBoolean=function isBoolean(x){return x===true||x===false};var _Boolean=irreducible("Boolean",isBoolean);var _Date=irreducible("Date",function(x){return x instanceof Date});var _Error=irreducible("Error",function(x){return x instanceof Error});var _Function=irreducible("Function",isFunction);var Nil=irreducible("Nil",isNil);var isNumber=function isNumber(x){return typeof x==="number"&&isFinite(x)&&!isNaN(x)};var _Number=irreducible("Number",isNumber);var isIdentity=function isIdentity(type){if(isType(type)){return type.meta.identity}return true};var create=function create(type,value,path){if(isType(type)){return!type.meta.identity&&(typeof value==="undefined"?"undefined":_typeof(value))==="object"&&value!==null?new type(value,path):type(value,path)}return value};var is$1=function is(x,type){if(isType(type)){return type.is(x)}return x instanceof type};function getDefaultName(type,predicate){return"{"+getTypeName(type)+" | "+getFunctionName(predicate)+"}"}function refinement(type,predicate,name){var displayName=name||getDefaultName(type,predicate);var identity=isIdentity(type);function Refinement(value,path){var x=create(type,value,path);return x}Refinement.meta={kind:"subtype",type:type,predicate:predicate,name:name,identity:identity};Refinement.displayName=displayName;Refinement.is=function(x){return is$1(x,type)&&predicate(x)};Refinement.update=function(instance,patch){return Refinement(assert_1.update(instance,patch))};return Refinement}refinement.getDefaultName=getDefaultName;var refinement_1=refinement;var Integer=refinement_1(_Number,function(x){return x%1===0},"Integer");var _Object=irreducible("Object",isObject$3);var _RegExp=irreducible("RegExp",function(x){return x instanceof RegExp});var _String=irreducible("String",isString);var Type=irreducible("Type",isType);function getDefaultName$1(domain,codomain){return"{[key: "+getTypeName(domain)+"]: "+getTypeName(codomain)+"}"}function dict(domain,codomain,name){var displayName=name||getDefaultName$1(domain,codomain);var domainNameCache=getTypeName(domain);var codomainNameCache=getTypeName(codomain);var identity=isIdentity(domain)&&isIdentity(codomain);function Dict(value,path){{if(identity){return value}}var idempotent=true;var ret={};for(var k in value){if(value.hasOwnProperty(k)){k=create(domain,k,null);var actual=value[k];var instance=create(codomain,actual,null);idempotent=idempotent&&actual===instance;ret[k]=instance}}if(idempotent){ret=value}return ret}Dict.meta={kind:"dict",domain:domain,codomain:codomain,name:name,identity:identity};Dict.displayName=displayName;Dict.is=function(x){if(!isObject$3(x)){return false}for(var k in x){if(x.hasOwnProperty(k)){if(!is$1(k,domain)||!is$1(x[k],codomain)){return false}}}return true};Dict.update=function(instance,patch){return Dict(assert_1.update(instance,patch))};return Dict}dict.getDefaultName=getDefaultName$1;var dict_1=dict;var mixin=function mixin(target,source,overwrite){if(isNil(source)){return target}for(var k in source){if(source.hasOwnProperty(k)){if(overwrite!==true){}target[k]=source[k]}}return target};var isUnion=function isUnion(x){return isType(x)&&x.meta.kind==="union"};var nextDeclareUniqueId=1;var declare=function declare(name){var type;function Declare(value,path){return type(value,path)}Declare.define=function(spec){if(isUnion(spec)&&Declare.hasOwnProperty("dispatch")){spec.dispatch=Declare.dispatch}type=spec;mixin(Declare,type,true);if(name){type.displayName=Declare.displayName=name;Declare.meta.name=name}Declare.meta.identity=type.meta.identity;Declare.prototype=type.prototype;return Declare};Declare.displayName=name||getTypeName(Declare)+"$"+nextDeclareUniqueId++;Declare.meta={identity:false};Declare.prototype=null;return Declare};function getDefaultName$2(map){return Object.keys(map).map(function(k){return assert_1.stringify(k)}).join(" | ")}function enums(map,name){var displayName=name||getDefaultName$2(map);function Enums(value,path){return value}Enums.meta={kind:"enums",map:map,name:name,identity:true};Enums.displayName=displayName;Enums.is=function(x){return map.hasOwnProperty(x)};return Enums}enums.of=function(keys,name){keys=isString(keys)?keys.split(" "):keys;var value={};keys.forEach(function(k){value[k]=k});return enums(value,name)};enums.getDefaultName=getDefaultName$2;var enums_1=enums;function getDefaultName$3(type){return"Array<"+getTypeName(type)+">"}function list(type,name){var displayName=name||getDefaultName$3(type);var typeNameCache=getTypeName(type);var identity=isIdentity(type);function List(value,path){{if(identity){return value}}var idempotent=true;var ret=[];for(var i=0,len=value.length;i<len;i++){var actual=value[i];var instance=create(type,actual,null);idempotent=idempotent&&actual===instance;ret.push(instance)}if(idempotent){ret=value}return ret}List.meta={kind:"list",type:type,name:name,identity:identity};List.displayName=displayName;List.is=function(x){return isArray(x)&&x.every(function(e){return is$1(e,type)})};List.update=function(instance,patch){return List(assert_1.update(instance,patch))};return List}list.getDefaultName=getDefaultName$3;var list_1=list;var isMaybe=function isMaybe(x){return isType(x)&&x.meta.kind==="maybe"};function getDefaultName$4(type){return"?"+getTypeName(type)}function maybe(type,name){if(isMaybe(type)||type===Any||type===Nil){return type}var displayName=name||getDefaultName$4(type);var identity=isIdentity(type);function Maybe(value,path){return Nil.is(value)?value:create(type,value,path)}Maybe.meta={kind:"maybe",type:type,name:name,identity:identity};Maybe.displayName=displayName;Maybe.is=function(x){return Nil.is(x)||is$1(x,type)};return Maybe}maybe.getDefaultName=getDefaultName$4;var maybe_1=maybe;function getDefaultInterfaceName(props){return"{"+Object.keys(props).map(function(prop){return prop+": "+getTypeName(props[prop])}).join(", ")+"}"}var getDefaultInterfaceName_1=getDefaultInterfaceName;function isRefinement(type){return isType(type)&&type.meta.kind==="subtype"}function getPredicates(type){return isRefinement(type)?[type.meta.predicate].concat(getPredicates(type.meta.type)):[]}function getUnrefinedType(type){return isRefinement(type)?getUnrefinedType(type.meta.type):type}function decompose(type){return{predicates:getPredicates(type),unrefinedType:getUnrefinedType(type)}}var decompose_1=decompose;function compose(predicates,unrefinedType){return predicates.reduce(function(type,predicate){return refinement_1(type,predicate)},unrefinedType)}function getProps(type){return isObject$3(type)?type:type.meta.props}function getDefaultProps(type){return isObject$3(type)?null:type.meta.defaultProps}function pushAll(arr,elements){Array.prototype.push.apply(arr,elements)}function extend(combinator,mixins,options){var props={};var prototype={};var predicates=[];var defaultProps={};mixins.forEach(function(x,i){var decomposition=decompose_1(x);var unrefinedType=decomposition.unrefinedType;pushAll(predicates,decomposition.predicates);mixin(props,getProps(unrefinedType));mixin(prototype,unrefinedType.prototype);mixin(defaultProps,getDefaultProps(unrefinedType),true)});options=combinator.getOptions(options);options.defaultProps=mixin(defaultProps,options.defaultProps,true);var result=compose(predicates,combinator(props,options));mixin(result.prototype,prototype);return result}var extend_1=extend;function getDefaultName$5(props){return"Struct"+getDefaultInterfaceName_1(props)}function extendStruct(mixins,name){return extend_1(struct,mixins,name)}function getOptions(options){if(!isObject$3(options)){options=isNil(options)?{}:{name:options}}if(!options.hasOwnProperty("strict")){options.strict=struct.strict}if(!options.hasOwnProperty("defaultProps")){options.defaultProps={}}return options}function struct(props,options){options=getOptions(options);var name=options.name;var strict=options.strict;var defaultProps=options.defaultProps;var displayName=name||getDefaultName$5(props);function Struct(value,path){if(Struct.is(value)){return value}if(!(this instanceof Struct)){return new Struct(value,path)}for(var k in props){if(props.hasOwnProperty(k)){var expected=props[k];var actual=value[k];if(actual===undefined){actual=defaultProps[k]}this[k]=create(expected,actual,null)}}}Struct.meta={kind:"struct",props:props,name:name,identity:false,strict:strict,defaultProps:defaultProps};Struct.displayName=displayName;Struct.is=function(x){return x instanceof Struct};Struct.update=function(instance,patch){return new Struct(assert_1.update(instance,patch))};Struct.extend=function(xs,name){return extendStruct([Struct].concat(xs),name)};return Struct}struct.strict=false;struct.getOptions=getOptions;struct.getDefaultName=getDefaultName$5;struct.extend=extendStruct;var struct_1=struct;function getDefaultName$6(types){return"["+types.map(getTypeName).join(", ")+"]"}function tuple(types,name){var displayName=name||getDefaultName$6(types);var identity=types.every(isIdentity);function Tuple(value,path){{if(identity){return value}}var idempotent=true;var ret=[];for(var i=0,len=types.length;i<len;i++){var expected=types[i];var actual=value[i];var instance=create(expected,actual,null);idempotent=idempotent&&actual===instance;ret.push(instance)}if(idempotent){ret=value}return ret}Tuple.meta={kind:"tuple",types:types,name:name,identity:identity};Tuple.displayName=displayName;Tuple.is=function(x){return isArray(x)&&x.length===types.length&&types.every(function(type,i){return is$1(x[i],type)})};Tuple.update=function(instance,patch){return Tuple(assert_1.update(instance,patch))};return Tuple}tuple.getDefaultName=getDefaultName$6;var tuple_1=tuple;function getDefaultName$7(types){return types.map(getTypeName).join(" | ")}function union(types,name){
var displayName=name||getDefaultName$7(types);var identity=types.every(isIdentity);function Union(value,path){{if(identity){return value}}var type=Union.dispatch(value);if(!type&&Union.is(value)){return value}return create(type,value,path)}Union.meta={kind:"union",types:types,name:name,identity:identity};Union.displayName=displayName;Union.is=function(x){return types.some(function(type){return is$1(x,type)})};Union.dispatch=function(x){for(var i=0,len=types.length;i<len;i++){var type=types[i];if(isUnion(type)){var t=type.dispatch(x);if(!isNil(t)){return t}}else if(is$1(x,type)){return type}}};Union.update=function(instance,patch){return Union(assert_1.update(instance,patch))};return Union}union.getDefaultName=getDefaultName$7;var union_1=union;function getDefaultName$8(domain,codomain){return"("+domain.map(getTypeName).join(", ")+") => "+getTypeName(codomain)}function isInstrumented(f){return _Function.is(f)&&isObject$3(f.instrumentation)}function getOptionalArgumentsIndex(types){var end=types.length;var areAllMaybes=false;for(var i=end-1;i>=0;i--){var type=types[i];if(!isType(type)||type.meta.kind!=="maybe"){return i+1}else{areAllMaybes=true}}return areAllMaybes?0:end}function func(domain,codomain,name){domain=isArray(domain)?domain:[domain];var displayName=name||getDefaultName$8(domain,codomain);var domainLength=domain.length;var optionalArgumentsIndex=getOptionalArgumentsIndex(domain);function FuncType(value,path){if(!isInstrumented(value)){return FuncType.of(value)}return value}FuncType.meta={kind:"func",domain:domain,codomain:codomain,name:name,identity:true};FuncType.displayName=displayName;FuncType.is=function(x){return isInstrumented(x)&&x.instrumentation.domain.length===domainLength&&x.instrumentation.domain.every(function(type,i){return type===domain[i]})&&x.instrumentation.codomain===codomain};FuncType.of=function(f,curried){if(FuncType.is(f)){return f}function fn(){var args=Array.prototype.slice.call(arguments);var argsLength=args.length;if(curried&&argsLength<domainLength){var g=Function.prototype.bind.apply(f,[this].concat(args));var newDomain=func(domain.slice(argsLength),codomain);return newDomain.of(g,true)}else{return create(codomain,f.apply(this,args))}}fn.instrumentation={domain:domain,codomain:codomain,f:f};fn.displayName=getFunctionName(f);return fn};return FuncType}func.getDefaultName=getDefaultName$8;func.getOptionalArgumentsIndex=getOptionalArgumentsIndex;var func_1=func;var isIdentity$3=isIdentity;function getDefaultName$9(types){return types.map(getTypeName).join(" & ")}function intersection(types,name){var displayName=name||getDefaultName$9(types);var identity=types.every(isIdentity$3);function Intersection(value,path){return value}Intersection.meta={kind:"intersection",types:types,name:name,identity:identity};Intersection.displayName=displayName;Intersection.is=function(x){return types.every(function(type){return is$1(x,type)})};Intersection.update=function(instance,patch){return Intersection(assert_1.update(instance,patch))};return Intersection}intersection.getDefaultName=getDefaultName$9;var intersection_1=intersection;function assign$2(x,y){for(var k in y){if(y.hasOwnProperty(k)){x[k]=y[k]}}return x}var assign_1=assign$2;function extendInterface(mixins,name){return extend_1(inter,mixins,name)}function getOptions$1(options){if(!isObject$3(options)){options=isNil(options)?{}:{name:options}}if(!options.hasOwnProperty("strict")){options.strict=inter.strict}return options}function inter(props,options){options=getOptions$1(options);var name=options.name;var strict=options.strict;var displayName=name||getDefaultInterfaceName_1(props);var identity=Object.keys(props).map(function(prop){return props[prop]}).every(isIdentity);function Interface(value,path){{if(identity){return value}}var idempotent=true;var ret=identity?{}:assign_1({},value);for(var prop in props){var expected=props[prop];var actual=value[prop];var instance=create(expected,actual,null);idempotent=idempotent&&actual===instance;ret[prop]=instance}if(idempotent){ret=value}return ret}Interface.meta={kind:"interface",props:props,name:name,identity:identity,strict:strict};Interface.displayName=displayName;Interface.is=function(x){if(isNil(x)){return false}if(strict){for(var k in x){if(!props.hasOwnProperty(k)){return false}}}for(var prop in props){if(!is$1(x[prop],props[prop])){return false}}return true};Interface.update=function(instance,patch){return Interface(assert_1.update(instance,patch))};Interface.extend=function(xs,name){return extendInterface([Interface].concat(xs),name)};return Interface}inter.strict=false;inter.getOptions=getOptions$1;inter.getDefaultName=getDefaultInterfaceName_1;inter.extend=extendInterface;var _interface=inter;function getShallowCopy(x){if(isObject$3(x)){if(x instanceof Date||x instanceof RegExp){return x}return assign_1({},x)}if(isArray(x)){return x.concat()}return x}function isCommand(k){return update.commands.hasOwnProperty(k)}function getCommand(k){return update.commands[k]}function update(instance,patch){var value=instance;var isChanged=false;var newValue;for(var k in patch){if(patch.hasOwnProperty(k)){if(isCommand(k)){newValue=getCommand(k)(patch[k],value);if(newValue!==instance){isChanged=true;value=newValue}else{value=instance}}else{if(value===instance){value=getShallowCopy(instance)}newValue=update(value[k],patch[k]);isChanged=isChanged||newValue!==value[k];value[k]=newValue}}}return isChanged?value:instance}function $apply(f,value){return f(value)}function $push(elements,arr){if(elements.length>0){return arr.concat(elements)}return arr}function $remove(keys,obj){if(keys.length>0){obj=getShallowCopy(obj);for(var i=0,len=keys.length;i<len;i++){delete obj[keys[i]]}}return obj}function $set(value){return value}function $splice(splices,arr){if(splices.length>0){arr=getShallowCopy(arr);return splices.reduce(function(acc,splice){acc.splice.apply(acc,splice);return acc},arr)}return arr}function $swap(config,arr){if(config.from!==config.to){arr=getShallowCopy(arr);var element=arr[config.to];arr[config.to]=arr[config.from];arr[config.from]=element}return arr}function $unshift(elements,arr){if(elements.length>0){return elements.concat(arr)}return arr}function $merge(whatToMerge,value){var isChanged=false;var result=getShallowCopy(value);for(var k in whatToMerge){if(whatToMerge.hasOwnProperty(k)){result[k]=whatToMerge[k];isChanged=isChanged||result[k]!==value[k]}}return isChanged?result:value}update.commands={$apply:$apply,$push:$push,$remove:$remove,$set:$set,$splice:$splice,$swap:$swap,$unshift:$unshift,$merge:$merge};var update_1=update;var match=function match(x){var type,guard,f,count;for(var i=1,len=arguments.length;i<len;){type=arguments[i];guard=arguments[i+1];f=arguments[i+2];if(isFunction(f)&&!isType(f)){i=i+3}else{f=guard;guard=Any.is;i=i+2}if(type.is(x)&&guard(x)){return f(x)}}assert_1.fail("Match error")};assert_1.Any=Any;assert_1.Array=_Array;assert_1.Boolean=_Boolean;assert_1.Date=_Date;assert_1.Error=_Error;assert_1.Function=_Function;assert_1.Nil=Nil;assert_1.Number=_Number;assert_1.Integer=Integer;assert_1.IntegerT=assert_1.Integer;assert_1.Object=_Object;assert_1.RegExp=_RegExp;assert_1.String=_String;assert_1.Type=Type;assert_1.TypeT=assert_1.Type;assert_1.Arr=assert_1.Array;assert_1.Bool=assert_1.Boolean;assert_1.Dat=assert_1.Date;assert_1.Err=assert_1.Error;assert_1.Func=assert_1.Function;assert_1.Num=assert_1.Number;assert_1.Obj=assert_1.Object;assert_1.Re=assert_1.RegExp;assert_1.Str=assert_1.String;assert_1.dict=dict_1;assert_1.declare=declare;assert_1.enums=enums_1;assert_1.irreducible=irreducible;assert_1.list=list_1;assert_1.maybe=maybe_1;assert_1.refinement=refinement_1;assert_1.struct=struct_1;assert_1.tuple=tuple_1;assert_1.union=union_1;assert_1.func=func_1;assert_1.intersection=intersection_1;assert_1.subtype=assert_1.refinement;assert_1.inter=_interface;assert_1["interface"]=assert_1.inter;assert_1.assert=assert_1;assert_1.update=update_1;assert_1.mixin=mixin;assert_1.isType=isType;assert_1.is=is$1;assert_1.getTypeName=getTypeName;assert_1.match=match;var index$1=assert_1;var stringify=index$1.stringify;var noobj={};var ValidationError=index$1.struct({message:index$1.Any,actual:index$1.Any,expected:index$1.Any,path:index$1.list(index$1.union([index$1.String,index$1.Number]))},"ValidationError");function getDefaultValidationErrorMessage(actual,expected,path){var expectedName=index$1.getTypeName(expected);var to=path.length?"/"+path.join("/")+": "+expectedName:expectedName;return"Invalid value "+stringify(actual)+" supplied to "+to}function getValidationErrorMessage(actual,expected,path,context){if(index$1.Function.is(expected.getValidationErrorMessage)){return expected.getValidationErrorMessage(actual,path,context)}else{return getDefaultValidationErrorMessage(actual,expected,path)}}ValidationError.of=function(actual,expected,path,context){return new ValidationError({message:getValidationErrorMessage(actual,expected,path,context),actual:actual,expected:expected,path:path})};var ValidationResult=index$1.struct({errors:index$1.list(ValidationError),value:index$1.Any},"ValidationResult");ValidationResult.prototype.isValid=function(){return!this.errors.length};ValidationResult.prototype.firstError=function(){return this.isValid()?null:this.errors[0]};ValidationResult.prototype.toString=function(){if(this.isValid()){return"[ValidationResult, true, "+stringify(this.value)+"]"}else{return"[ValidationResult, false, ("+this.errors.map(function(err){return stringify(err.message)}).join(", ")+")]"}};function validate(x,type,options){options=options||{};var path=index$1.Array.is(options)?options:options.path||[];return new ValidationResult(recurse(x,type,path,options))}function recurse(x,type,path,options){if(index$1.isType(type)){return validators[type.meta.kind](x,type,path,options)}else{return validators.es6classes(x,type,path,options)}}var validators=validate.validators={};validators.es6classes=function validateES6Classes(x,type,path,options){return{value:x,errors:x instanceof type?[]:[ValidationError.of(x,type,path,options.context)]}};validators.irreducible=validators.enums=function validateIrreducible(x,type,path,options){return{value:x,errors:type.is(x)?[]:[ValidationError.of(x,type,path,options.context)]}};validators.list=function validateList(x,type,path,options){if(!index$1.Array.is(x)){return{value:x,errors:[ValidationError.of(x,type,path,options.context)]}}var ret={value:[],errors:[]};for(var i=0,len=x.length;i<len;i++){var item=recurse(x[i],type.meta.type,path.concat(i),options);ret.value[i]=item.value;ret.errors=ret.errors.concat(item.errors)}return ret};validators.subtype=function validateSubtype(x,type,path,options){var ret=recurse(x,type.meta.type,path,options);if(ret.errors.length){return ret}if(!type.meta.predicate(ret.value)){ret.errors=[ValidationError.of(x,type,path,options.context)]}return ret};validators.maybe=function validateMaybe(x,type,path,options){return index$1.Nil.is(x)?{value:x,errors:[]}:recurse(x,type.meta.type,path,options)};validators.struct=function validateStruct(x,type,path,options){if(!index$1.Object.is(x)){return{value:x,errors:[ValidationError.of(x,type,path,options.context)]}}if(type.is(x)){return{value:x,errors:[]}}var ret={value:{},errors:[]};var props=type.meta.props;var defaultProps=type.meta.defaultProps||noobj;for(var name in props){if(props.hasOwnProperty(name)){var actual=x[name];if(actual===undefined){actual=defaultProps[name]}var prop=recurse(actual,props[name],path.concat(name),options);ret.value[name]=prop.value;ret.errors=ret.errors.concat(prop.errors)}}var strict=options.hasOwnProperty("strict")?options.strict:type.meta.strict;if(strict){for(var field in x){if(x.hasOwnProperty(field)&&!props.hasOwnProperty(field)){ret.errors.push(ValidationError.of(x[field],index$1.Nil,path.concat(field),options.context))}}}if(!ret.errors.length){ret.value=new type(ret.value)}return ret};validators.tuple=function validateTuple(x,type,path,options){var types=type.meta.types;var len=types.length;if(!index$1.Array.is(x)||x.length>len){return{value:x,errors:[ValidationError.of(x,type,path,options.context)]}}var ret={value:[],errors:[]};for(var i=0;i<len;i++){var item=recurse(x[i],types[i],path.concat(i),options);ret.value[i]=item.value;ret.errors=ret.errors.concat(item.errors)}return ret};validators.dict=function validateDict(x,type,path,options){if(!index$1.Object.is(x)){return{value:x,errors:[ValidationError.of(x,type,path,options.context)]}}var ret={value:{},errors:[]};for(var k in x){if(x.hasOwnProperty(k)){var subpath=path.concat(k);var key=recurse(k,type.meta.domain,subpath,options);var item=recurse(x[k],type.meta.codomain,subpath,options);ret.value[k]=item.value;ret.errors=ret.errors.concat(key.errors,item.errors)}}return ret};validators.union=function validateUnion(x,type,path,options){var ctor=type.dispatch(x);return index$1.Function.is(ctor)?recurse(x,ctor,path.concat(type.meta.types.indexOf(ctor)),options):{value:x,errors:[ValidationError.of(x,type,path,options.context)]}};validators.intersection=function validateIntersection(x,type,path,options){var types=type.meta.types;var len=types.length;var ret={value:x,errors:[]};var nrOfStructs=0;for(var i=0;i<len;i++){if(types[i].meta.kind==="struct"){nrOfStructs++}var item=recurse(x,types[i],path,options);ret.errors=ret.errors.concat(item.errors)}if(nrOfStructs>1){ret.errors.push(ValidationError.of(x,type,path,options.context))}return ret};validators["interface"]=function validateInterface(x,type,path,options){if(!index$1.Object.is(x)){return{value:x,errors:[ValidationError.of(x,type,path,options.context)]}}var ret={value:{},errors:[]};var props=type.meta.props;for(var name in props){var prop=recurse(x[name],props[name],path.concat(name),options);ret.value[name]=prop.value;ret.errors=ret.errors.concat(prop.errors)}var strict=options.hasOwnProperty("strict")?options.strict:type.meta.strict;if(strict){for(var field in x){if(!props.hasOwnProperty(field)&&!index$1.Nil.is(x[field])){ret.errors.push(ValidationError.of(x[field],index$1.Nil,path.concat(field),options.context))}}}return ret};index$1.mixin(index$1,{ValidationError:ValidationError,ValidationResult:ValidationResult,validate:validate});var index=index$1;var commonjsGlobal$1=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule$1(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var index$3=createCommonjsModule$1(function(module){{module.exports=Emitter}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}});function isObject$3$1(obj){return null!==obj&&"object"===(typeof obj==="undefined"?"undefined":_typeof(obj))}var isObject_1=isObject$3$1;var requestBase=RequestBase;function RequestBase(obj){if(obj)return mixin$3(obj)}function mixin$3(obj){for(var key in RequestBase.prototype){obj[key]=RequestBase.prototype[key]}return obj}RequestBase.prototype.clearTimeout=function _clearTimeout(){clearTimeout(this._timer);clearTimeout(this._responseTimeoutTimer);delete this._timer;delete this._responseTimeoutTimer;return this};RequestBase.prototype.parse=function parse(fn){this._parser=fn;return this};RequestBase.prototype.responseType=function(val){this._responseType=val;return this};RequestBase.prototype.serialize=function serialize(fn){this._serializer=fn;return this};RequestBase.prototype.timeout=function timeout(options){if(!options||"object"!==(typeof options==="undefined"?"undefined":_typeof(options))){this._timeout=options;this._responseTimeout=0;return this}for(var option in options){switch(option){case"deadline":this._timeout=options.deadline;break;case"response":this._responseTimeout=options.response;break;default:console.warn("Unknown timeout option",option)}}return this};RequestBase.prototype.retry=function retry(count){if(arguments.length===0||count===true)count=1;if(count<=0)count=0;this._maxRetries=count;this._retries=0;return this};RequestBase.prototype._retry=function(){this.clearTimeout();if(this.req){this.req=null;this.req=this.request()}this._aborted=false;this.timedout=false;return this._end()};RequestBase.prototype.then=function then(resolve,reject){if(!this._fullfilledPromise){var self=this;if(this._endCalled){console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises")}this._fullfilledPromise=new Promise(function(innerResolve,innerReject){self.end(function(err,res){if(err)innerReject(err);else innerResolve(res)})})}return this._fullfilledPromise.then(resolve,reject)};RequestBase.prototype.catch=function(cb){return this.then(undefined,cb)};RequestBase.prototype.use=function use(fn){fn(this);return this};RequestBase.prototype.ok=function(cb){if("function"!==typeof cb)throw Error("Callback required");this._okCallback=cb;return this};RequestBase.prototype._isResponseOK=function(res){if(!res){return false}if(this._okCallback){return this._okCallback(res)}return res.status>=200&&res.status<300};RequestBase.prototype.get=function(field){return this._header[field.toLowerCase()]};RequestBase.prototype.getHeader=RequestBase.prototype.get;RequestBase.prototype.set=function(field,val){if(isObject_1(field)){for(var key in field){this.set(key,field[key])}return this}this._header[field.toLowerCase()]=val;this.header[field]=val;return this};RequestBase.prototype.unset=function(field){delete this._header[field.toLowerCase()];delete this.header[field];return this};RequestBase.prototype.field=function(name,val){if(null===name||undefined===name){throw new Error(".field(name, val) name can not be empty")}if(this._data){console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()")}if(isObject_1(name)){for(var key in name){this.field(key,name[key])}return this}if(Array.isArray(val)){for(var i in val){this.field(name,val[i])}return this}if(null===val||undefined===val){throw new Error(".field(name, val) val can not be empty")}if("boolean"===typeof val){val=""+val}this._getFormData().append(name,val);return this};RequestBase.prototype.abort=function(){if(this._aborted){return this}this._aborted=true;this.xhr&&this.xhr.abort();this.req&&this.req.abort();this.clearTimeout();this.emit("abort");return this};RequestBase.prototype.withCredentials=function(on){if(on==undefined)on=true;this._withCredentials=on;return this};RequestBase.prototype.redirects=function(n){this._maxRedirects=n;return this};RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}};RequestBase.prototype.send=function(data){var isObj=isObject_1(data);var type=this._header["content-type"];if(this._formData){console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()")}if(isObj&&!this._data){if(Array.isArray(data)){this._data=[]}else if(!this._isHost(data)){this._data={}}}else if(data&&this._data&&this._isHost(this._data)){throw Error("Can't merge these send calls")}if(isObj&&isObject_1(this._data)){for(var key in data){this._data[key]=data[key]}}else if("string"==typeof data){if(!type)this.type("form");type=this._header["content-type"];if("application/x-www-form-urlencoded"==type){this._data=this._data?this._data+"&"+data:data}else{this._data=(this._data||"")+data}}else{this._data=data}if(!isObj||this._isHost(data)){return this}if(!type)this.type("json");return this};RequestBase.prototype.sortQuery=function(sort){this._sort=typeof sort==="undefined"?true:sort;return this};RequestBase.prototype._timeoutError=function(reason,timeout,errno){if(this._aborted){return}var err=new Error(reason+timeout+"ms exceeded");err.timeout=timeout;err.code="ECONNABORTED";err.errno=errno;this.timedout=true;this.abort();this.callback(err)};RequestBase.prototype._setTimeouts=function(){var self=this;if(this._timeout&&!this._timer){this._timer=setTimeout(function(){self._timeoutError("Timeout of ",self._timeout,"ETIME")},this._timeout)}if(this._responseTimeout&&!this._responseTimeoutTimer){this._responseTimeoutTimer=setTimeout(function(){self._timeoutError("Response timeout of ",self._responseTimeout,"ETIMEDOUT")},this._responseTimeout)}};function isFunction$3(fn){var tag=isObject_1(fn)?Object.prototype.toString.call(fn):"";return tag==="[object Function]"}var isFunction_1=isFunction$3;var type=function type(str){return str.split(/ *; */).shift()};var params=function params(str){return str.split(/ *; */).reduce(function(obj,str){var parts=str.split(/ *= */);var key=parts.shift();var val=parts.shift();if(key&&val)obj[key]=val;return obj},{})};var parseLinks=function parseLinks(str){return str.split(/ *, */).reduce(function(obj,str){var parts=str.split(/ *; */);var url=parts[0].slice(1,-1);var rel=parts[1].split(/ *= */)[1].slice(1,-1);obj[rel]=url;return obj},{})};var cleanHeader=function cleanHeader(header,shouldStripCookie){delete header["content-type"];delete header["content-length"];delete header["transfer-encoding"];delete header["host"];if(shouldStripCookie){delete header["cookie"]}return header};var utils={type:type,params:params,parseLinks:parseLinks,cleanHeader:cleanHeader};var responseBase=ResponseBase;function ResponseBase(obj){if(obj)return mixin$4(obj)}function mixin$4(obj){for(var key in ResponseBase.prototype){obj[key]=ResponseBase.prototype[key]}return obj}ResponseBase.prototype.get=function(field){return this.header[field.toLowerCase()]};ResponseBase.prototype._setHeaderProperties=function(header){var ct=header["content-type"]||"";this.type=utils.type(ct);var params=utils.params(ct);for(var key in params){this[key]=params[key]}this.links={};try{if(header.link){this.links=utils.parseLinks(header.link)}}catch(err){}};ResponseBase.prototype._setStatusProperties=function(status){var type=status/100|0;this.status=this.statusCode=status;this.statusType=type;this.info=1==type;this.ok=2==type;this.redirect=3==type;this.clientError=4==type;this.serverError=5==type;this.error=4==type||5==type?this.toError():false;this.accepted=202==status;this.noContent=204==status;this.badRequest=400==status;this.unauthorized=401==status;this.notAcceptable=406==status;this.forbidden=403==status;this.notFound=404==status};var ERROR_CODES=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];var shouldRetry=function shouldRetry(err,res){if(err&&err.code&&~ERROR_CODES.indexOf(err.code))return true;if(res&&res.status&&res.status>=500)return true;if(err&&"timeout"in err&&err.code=="ECONNABORTED")return true;if(err&&"crossDomain"in err)return true;return false};var client$1=createCommonjsModule$1(function(module,exports){var root;if(typeof window!=="undefined"){root=window}else if(typeof self!=="undefined"){root=self}else{console.warn("Using browser-only version of superagent in non-browser environment");root=commonjsGlobal$1}function noop(){}var request=exports=module.exports=function(method,url){if("function"==typeof url){return new exports.Request("GET",method).end(url)}if(1==arguments.length){return new exports.Request("GET",method)}return new exports.Request(method,url)};exports.Request=Request;request.getXHR=function(){if(root.XMLHttpRequest&&(!root.location||"file:"!=root.location.protocol||!root.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}throw Error("Browser-only verison of superagent could not find XHR")};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};function serialize(obj){if(!isObject_1(obj))return obj;var pairs=[];for(var key in obj){pushEncodedKeyValuePair(pairs,key,obj[key])}return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){if(val!=null){if(Array.isArray(val)){val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)})}else if(isObject_1(val)){for(var subkey in val){pushEncodedKeyValuePair(pairs,key+"["+subkey+"]",val[subkey])}}else{pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val))}}else if(val===null){pairs.push(encodeURIComponent(key))}}request.serializeObject=serialize;function parseString(str){var obj={};var pairs=str.split("&");var pair;var pos;for(var i=0,len=pairs.length;i<len;++i){pair=pairs[i];pos=pair.indexOf("=");if(pos==-1){obj[decodeURIComponent(pair)]=""}else{obj[decodeURIComponent(pair.slice(0,pos))]=decodeURIComponent(pair.slice(pos+1))}}return obj}request.parseString=parseString;request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify};request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse};function parseHeader(str){var lines=str.split(/\r?\n/);var fields={};var index;var line;var field;var val;lines.pop();for(var i=0,len=lines.length;i<len;++i){line=lines[i];index=line.indexOf(":");field=line.slice(0,index).toLowerCase();val=trim(line.slice(index+1));fields[field]=val}return fields}function isJSON(mime){return/[\/+]json\b/.test(mime)}function Response(req){this.req=req;this.xhr=this.req.xhr;this.text=this.req.method!="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType==="undefined"?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;var status=this.xhr.status;if(status===1223){status=204}this._setStatusProperties(status);this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this._setHeaderProperties(this.header);if(null===this.text&&req._responseType){this.body=this.xhr.response}else{this.body=this.req.method!="HEAD"?this._parseBody(this.text?this.text:this.xhr.response):null}}responseBase(Response.prototype);Response.prototype._parseBody=function(str){var parse=request.parse[this.type];if(this.req._parser){return this.req._parser(this,str)}if(!parse&&isJSON(this.type)){parse=request.parse["application/json"]}return parse&&str&&(str.length||str instanceof Object)?parse(str):null};Response.prototype.toError=function(){var req=this.req;var method=req.method;var url=req.url;var msg="cannot "+method+" "+url+" ("+this.status+")";var err=new Error(msg);err.status=this.status;err.method=method;err.url=url;return err};request.Response=Response;function Request(method,url){var self=this;this._query=this._query||[];this.method=method;this.url=url;this.header={};this._header={};this.on("end",function(){var err=null;var res=null;try{res=new Response(self)}catch(e){err=new Error("Parser is unable to parse the response");err.parse=true;err.original=e;if(self.xhr){err.rawResponse=typeof self.xhr.responseType=="undefined"?self.xhr.responseText:self.xhr.response;err.status=self.xhr.status?self.xhr.status:null;err.statusCode=err.status}else{err.rawResponse=null;err.status=null}return self.callback(err)}self.emit("response",res);var new_err;try{if(!self._isResponseOK(res)){new_err=new Error(res.statusText||"Unsuccessful HTTP response");new_err.original=err;new_err.response=res;new_err.status=res.status}}catch(e){new_err=e}if(new_err){self.callback(new_err,res)}else{self.callback(null,res)}})}index$3(Request.prototype);requestBase(Request.prototype);Request.prototype.type=function(type){this.set("Content-Type",request.types[type]||type);return this};Request.prototype.accept=function(type){this.set("Accept",request.types[type]||type);return this};Request.prototype.auth=function(user,pass,options){if((typeof pass==="undefined"?"undefined":_typeof(pass))==="object"&&pass!==null){options=pass}if(!options){options={type:"function"===typeof btoa?"basic":"auto"}}switch(options.type){case"basic":this.set("Authorization","Basic "+btoa(user+":"+pass));break;case"auto":this.username=user;this.password=pass;break;case"bearer":this.set("Authorization","Bearer "+user);break}return this};Request.prototype.query=function(val){if("string"!=typeof val)val=serialize(val);if(val)this._query.push(val);return this};Request.prototype.attach=function(field,file,options){if(file){if(this._data){throw Error("superagent can't mix .send() and .attach()")}this._getFormData().append(field,file,options||file.name)}return this};Request.prototype._getFormData=function(){if(!this._formData){this._formData=new root.FormData}return this._formData};Request.prototype.callback=function(err,res){if(this._maxRetries&&this._retries++<this._maxRetries&&shouldRetry(err,res)){return this._retry()}var fn=this._callback;this.clearTimeout();if(err){if(this._maxRetries)err.retries=this._retries-1;this.emit("error",err)}fn(err,res)};Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=true;err.status=this.status;err.method=this.method;err.url=this.url;this.callback(err)};Request.prototype.buffer=Request.prototype.ca=Request.prototype.agent=function(){console.warn("This is not supported in browser version of superagent");return this};Request.prototype.pipe=Request.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")};Request.prototype._appendQueryString=function(){var query=this._query.join("&");if(query){this.url+=(this.url.indexOf("?")>=0?"&":"?")+query}if(this._sort){var index=this.url.indexOf("?");if(index>=0){var queryArr=this.url.substring(index+1).split("&");if(isFunction_1(this._sort)){queryArr.sort(this._sort)}else{queryArr.sort()}this.url=this.url.substring(0,index)+"?"+queryArr.join("&")}}};Request.prototype._isHost=function _isHost(obj){return obj&&"object"===(typeof obj==="undefined"?"undefined":_typeof(obj))&&!Array.isArray(obj)&&Object.prototype.toString.call(obj)!=="[object Object]"};Request.prototype.end=function(fn){if(this._endCalled){console.warn("Warning: .end() was called twice. This is not supported in superagent")}this._endCalled=true;this._callback=fn||noop;this._appendQueryString();return this._end()};Request.prototype._end=function(){var self=this;var xhr=this.xhr=request.getXHR();var data=this._formData||this._data;this._setTimeouts();xhr.onreadystatechange=function(){var readyState=xhr.readyState;if(readyState>=2&&self._responseTimeoutTimer){
clearTimeout(self._responseTimeoutTimer)}if(4!=readyState){return}var status;try{status=xhr.status}catch(e){status=0}if(!status){if(self.timedout||self._aborted)return;return self.crossDomainError()}self.emit("end")};var handleProgress=function handleProgress(direction,e){if(e.total>0){e.percent=e.loaded/e.total*100}e.direction=direction;self.emit("progress",e)};if(this.hasListeners("progress")){try{xhr.onprogress=handleProgress.bind(null,"download");if(xhr.upload){xhr.upload.onprogress=handleProgress.bind(null,"upload")}}catch(e){}}try{if(this.username&&this.password){xhr.open(this.method,this.url,true,this.username,this.password)}else{xhr.open(this.method,this.url,true)}}catch(err){return this.callback(err)}if(this._withCredentials)xhr.withCredentials=true;if(!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!this._isHost(data)){var contentType=this._header["content-type"];var serialize=this._serializer||request.serialize[contentType?contentType.split(";")[0]:""];if(!serialize&&isJSON(contentType)){serialize=request.serialize["application/json"]}if(serialize)data=serialize(data)}for(var field in this.header){if(null==this.header[field])continue;if(this.header.hasOwnProperty(field))xhr.setRequestHeader(field,this.header[field])}if(this._responseType){xhr.responseType=this._responseType}this.emit("request",this);xhr.send(typeof data!=="undefined"?data:null);return this};request.get=function(url,data,fn){var req=request("GET",url);if("function"==typeof data)fn=data,data=null;if(data)req.query(data);if(fn)req.end(fn);return req};request.head=function(url,data,fn){var req=request("HEAD",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.options=function(url,data,fn){var req=request("OPTIONS",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};function del(url,data,fn){var req=request("DELETE",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req}request["del"]=del;request["delete"]=del;request.patch=function(url,data,fn){var req=request("PATCH",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.post=function(url,data,fn){var req=request("POST",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.put=function(url,data,fn){var req=request("PUT",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req}});var requestWithSource=function requestWithSource(method,url){return client$1[method](url).set("Filestack-Source","JS-0.4.4")};var LANGUAGES={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{"İ":"i",I:"ı","İ":"i"}},az:{regexp:/[\u0130]/g,map:{"İ":"i",I:"ı","İ":"i"}},lt:{regexp:/[\u0049\u004A\u012E\u00CC\u00CD\u0128]/g,map:{I:"i̇",J:"j̇","Į":"į̇","Ì":"i̇̀","Í":"i̇́","Ĩ":"i̇̃"}}};var lowerCase=function lowerCase(str,locale){var lang=LANGUAGES[locale];str=str==null?"":String(str);if(lang){str=str.replace(lang.regexp,function(m){return lang.map[m]})}return str.toLowerCase()};var nonWordRegexp=/[^A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]+/g;var camelCaseRegexp=/([a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A])/g;var camelCaseUpperRegexp=/([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]+)([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A][a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A])/g;var noCase=function noCase(str,locale,replacement){if(str==null){return""}replacement=typeof replacement!=="string"?" ":replacement;function replace(match,index,value){if(index===0||index===value.length-match.length){return""}return replacement}str=String(str).replace(camelCaseRegexp,"$1 $2").replace(camelCaseUpperRegexp,"$1 $2").replace(nonWordRegexp,replace);return lowerCase(str,locale)};var snakeCase=function snakeCase(value,locale){return noCase(value,locale,"_")};var validate$1=index.validate;var checkOptions=function checkOptions(name,allowed,options){var keys=Object.keys(options);var allowedNames=allowed.map(function(a){return a.name});var namesFormatted=allowedNames.join(", ");keys.forEach(function(key){if(allowedNames.indexOf(key)<0){throw new Error(key+" is not a valid option for "+name+". Valid options are: "+namesFormatted)}});allowed.forEach(function(obj){var value=options[obj.name];if(obj.name==="location"&&typeof value==="string"){value=value.toLowerCase()}if(value!==undefined){var result=validate$1(value,obj.type);if(!result.isValid()){throw new Error(result.firstError().message)}}});return keys};var removeEmpty=function removeEmpty(obj){var newObj=Object.assign({},obj);Object.keys(newObj).forEach(function(k){return!newObj[k]&&newObj[k]!==undefined&&delete newObj[k]});return newObj};var snakeKeys=function snakeKeys(opts){var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var options=Object.assign({},opts);return Object.keys(options).reduce(function(prev,curr){prev[snakeCase(prefix+"-"+curr)]=options[curr];delete options[curr];return prev},{})};var storeApiUrl=ENV.storeApiUrl;var storeURL=function storeURL(session,url){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var token=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(!url||typeof url!=="string"){throw new Error("url is required for storeURL")}var allowed=[{name:"filename",type:index.String},{name:"location",type:index.enums.of("s3 gcs rackspace azure dropbox")},{name:"mimetype",type:index.String},{name:"path",type:index.String},{name:"region",type:index.String},{name:"container",type:index.String},{name:"access",type:index.enums.of("public private")}];checkOptions("storeURL",allowed,options);var location=options.location||"s3";var newOptions=removeEmpty(options);if(session.policy&&session.signature){newOptions.policy=session.policy;newOptions.signature=session.signature}var baseURL=storeApiUrl+"/"+location;return new Promise(function(resolve,reject){var req=client$1.post(baseURL).query({key:session.apikey}).query(newOptions).send("url="+url).end(function(err,res){if(err){reject(err)}else if(res.body&&res.body.url){var handle=res.body.url.split("/").pop();var response=Object.assign({},res.body,{handle:handle});resolve(response)}else{resolve(res.body)}});token.cancel=function(){req.abort();reject(new Error("Upload cancelled"))}})};var fileApiUrl=ENV.fileApiUrl;var retrieve=function retrieve(session,handle){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{}
;if(!handle||typeof handle!=="string"){throw new Error("handle is required for retrieve")}var allowed=[{name:"metadata",type:index.Boolean},{name:"head",type:index.Boolean},{name:"cache",type:index.Boolean},{name:"dl",type:index.Boolean},{name:"extension",type:index.String}];checkOptions("retrieve",allowed,options);var baseURL=fileApiUrl+"/"+handle;var newOptions=removeEmpty(options);if(newOptions.extension){baseURL+="+"+newOptions.extension;delete newOptions.extension}if(newOptions.metadata){baseURL+="/metadata"}if(session.policy&&session.signature){newOptions.policy=session.policy;newOptions.signature=session.signature}if(newOptions.head){delete newOptions.head;return new Promise(function(resolve,reject){client$1.head(baseURL).query(newOptions).end(function(err,res){if(err){reject(err)}else{resolve(res.headers)}})})}return new Promise(function(resolve,reject){var responseType=newOptions.metadata?"json":"blob";delete newOptions.metadata;client$1.get(baseURL).query(newOptions).responseType(responseType).end(function(err,res){if(err){reject(err)}else{resolve(res.body)}})})};var remove=function remove(session,handle){if(!handle||typeof handle!=="string"){throw new Error("handle is required for remove")}if(!session.policy||!session.signature){throw new Error("security policy and signature are required for remove")}var baseURL=fileApiUrl+"/"+handle;return new Promise(function(resolve,reject){client$1.delete(baseURL).query({key:session.apikey}).query({policy:session.policy,signature:session.signature}).end(function(err,res){if(err){reject(err)}else{resolve(res)}})})};var metadata=function metadata(session,handle){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!handle||typeof handle!=="string"){throw new Error("handle is required for metadata")}var allowed=[{name:"size",type:index.Boolean},{name:"mimetype",type:index.Boolean},{name:"filename",type:index.Boolean},{name:"width",type:index.Boolean},{name:"height",type:index.Boolean},{name:"uploaded",type:index.Boolean},{name:"writeable",type:index.Boolean},{name:"cloud",type:index.Boolean},{name:"sourceUrl",type:index.Boolean},{name:"md5",type:index.Boolean},{name:"sha1",type:index.Boolean},{name:"sha224",type:index.Boolean},{name:"sha256",type:index.Boolean},{name:"sha384",type:index.Boolean},{name:"sha512",type:index.Boolean},{name:"location",type:index.Boolean},{name:"path",type:index.Boolean},{name:"container",type:index.Boolean},{name:"exif",type:index.Boolean}];checkOptions("retrieve",allowed,options);var newOptions=removeEmpty(snakeKeys(options));if(session.policy&&session.signature){newOptions.policy=session.policy;newOptions.signature=session.signature}var baseURL=fileApiUrl+"/"+handle+"/metadata";return new Promise(function(resolve,reject){client$1.get(baseURL).query(newOptions).end(function(err,res){if(err){reject(err)}else{resolve(res.body)}})})};var onOff={init:function init(){window.filestackInternals.logger.working=false},isWorking:function isWorking(){return window.filestackInternals.logger.working},on:function on(){window.filestackInternals.logger.working=true},off:function off(){window.filestackInternals.logger.working=false}};var _typeof$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof(obj)};var toConsumableArray$1=function toConsumableArray$$1(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}};var context=function context(contextName,onOff){var api=function log(){for(var _len=arguments.length,stuff=Array(_len),_key=0;_key<_len;_key++){stuff[_key]=arguments[_key]}var convertedToStrings=[].concat(stuff).map(function(thing){if((typeof thing==="undefined"?"undefined":_typeof$1(thing))==="object"){return JSON.stringify(thing,function(key,value){if(typeof value==="function"){if(key==="json"){try{return value()}catch(err){}}return"[Function]"}if(value instanceof File){return"[File name: "+value.name+", mimetype: "+value.type+", size: "+value.size+"]"}return value},2)}return thing});if(onOff.isWorking()){var _console;(_console=console).log.apply(_console,["["+contextName+"]"].concat(toConsumableArray$1(convertedToStrings)))}};api.context=function(subContextName){return context(contextName+"]["+subContextName,onOff)};api.on=onOff.on;api.off=onOff.off;return api};var logger=context("filestack",onOff);var initializeGlobalNamespace=function initializeGlobalNamespace(){var namespace=void 0;if((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"){namespace=window.filestackInternals;if(!namespace){namespace={};window.filestackInternals=namespace}if(!namespace.logger){namespace.logger=logger;onOff.init()}}return namespace};initializeGlobalNamespace();var log=logger.context("api-client");var cloudApiUrl=ENV.cloudApiUrl;var _cloud=function _cloud(session,security,cloudName){var params={apikey:session.apikey};if(security&&security.policy&&security.signature){params.policy=security.policy;params.signature=security.signature}var list=function list(path){var token=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};log("cloud.list() called:",path);return new Promise(function(resolve,reject){var req=client$1.get(cloudApiUrl+"/"+cloudName+"/folder/list"+path).query(params).withCredentials().end(function(err,response){if(err){reject(err)}else{log("cloud.list() responded:",response.body);resolve(response.body)}});token.cancel=function(){req.abort();reject(new Error("Cancelled"))}})};var store=function store(path){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var token=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};log("cloud.store() called:",path,options);var allowed=[{name:"location",type:index.enums.of("s3 gcs rackspace azure dropbox")},{name:"region",type:index.String},{name:"path",type:index.String},{name:"container",type:index.String},{name:"access",type:index.enums.of("public private")}];checkOptions("cloud.store",allowed,options);var snakeOpts=snakeKeys(options,"store");return new Promise(function(resolve,reject){var req=client$1.get(cloudApiUrl+"/"+cloudName+"/store"+path).query(params).query(removeEmpty(snakeOpts)).withCredentials().end(function(err,response){if(err){reject(err)}else{log("cloud.store() responded:",response.body);resolve(response.body)}});token.cancel=function(){req.abort();reject(new Error("Cancelled"))}})};var link=function link(path){var token=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};log("cloud.link() called:",path);return new Promise(function(resolve,reject){var req=client$1.get(cloudApiUrl+"/"+cloudName+"/link"+path).query(params).withCredentials().end(function(err,response){if(err){reject(err)}else{log("cloud.link() responded:",response.body);resolve(response.body)}});token.cancel=function(){req.abort();reject(new Error("Cancelled"))}})};var logout=function logout(name){log("cloud.logout() called:",name);var baseURL=name?cloudApiUrl+"/"+name:cloudApiUrl;return new Promise(function(resolve,reject){client$1.get(baseURL+"/auth/logout").query({apikey:session.apikey}).withCredentials().end(function(err,response){if(err){reject(err)}else{log("cloud.logout() responded:",response.body);resolve(response.body)}})})};return{name:cloudName,list:list,store:store,link:link,logout:logout}};var processURL=ENV.processApiUrl;var numberRange=function numberRange(start,end){return index.refinement(index.Number,function(n){return n>=start&&n<=end})};var min$2=function min(int){return index.refinement(index.Integer,function(n){return n>=int})};var max$1=function max(int){return index.refinement(index.Integer,function(n){return n<=int})};var range=function range(start,end){return index.tuple([min$2(start),max$1(end)],"range")};var alignment=index.enums.of("top left right bottom");var alignPair=index.refinement(index.tuple([alignment,alignment]),function(tup){return tup[0]!==tup[1]},"pair");var formatOption=function formatOption(op,options){var name=snakeCase(op.name);var value=options[op.name];if(Array.isArray(value)){return name+":["+value+"]"}return value?name+":"+value:null};var formatOptions=function formatOptions(name,allowed,options){var fOptions=allowed.map(function(op){return formatOption(op,options)}).filter(function(op){return op}).join(",");var snakeName=snakeCase(name);if(fOptions.length){return snakeName+"="+fOptions}return snakeName};var sepia=function sepia(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"tone",type:numberRange(0,100)}];checkOptions("sepia",allowed,options);var sepiaOptions=formatOptions("sepia",allowed,options);return transforms.concat(sepiaOptions)};var blackwhite=function blackwhite(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"threshold",type:numberRange(0,100)}];checkOptions("blackwhite",allowed,options);var blackWhiteOptions=formatOptions("blackwhite",allowed,options);return transforms.concat(blackWhiteOptions)};var border=function border(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"width",type:numberRange(1,1e3)},{name:"color",type:index.String},{name:"background",type:index.String}];checkOptions("border",allowed,options);var borderOptions=formatOptions("border",allowed,options);return transforms.concat(borderOptions)};var circle=function circle(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"background",type:index.String}];checkOptions("circle",allowed,options);var circleOptions=formatOptions("circle",allowed,options);return transforms.concat(circleOptions)};var shadow=function shadow(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"blur",type:numberRange(0,20)},{name:"opacity",type:numberRange(0,100)},{name:"vector",type:range(-1e3,1e3)},{name:"color",type:index.String},{name:"background",type:index.String}];checkOptions("shadow",allowed,options);var shadowOptions=formatOptions("shadow",allowed,options);return transforms.concat(shadowOptions)};var tornEdges=function tornEdges(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"spread",type:range(1,1e4)},{name:"background",type:index.String}];checkOptions("tornEdges",allowed,options);var tornEdgesOptions=formatOptions("tornEdges",allowed,options);return transforms.concat(tornEdgesOptions)};var polaroid=function polaroid(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"color",type:index.String},{name:"rotate",type:numberRange(0,359)},{name:"background",type:index.String}];checkOptions("polaroid",allowed,options);var polaroidOptions=formatOptions("polaroid",allowed,options);return transforms.concat(polaroidOptions)};var vignette=function vignette(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"amount",type:numberRange(0,100)},{name:"blurmode",type:index.enums.of("linear gaussian")},{name:"background",type:index.String}];checkOptions("vignette",allowed,options);var vignetteOptions=formatOptions("vignette",allowed,options);return transforms.concat(vignetteOptions)};var roundedCorners=function roundedCorners(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"radius",type:index.union([numberRange(1,1e4),index.enums.of("max")])},{name:"blur",type:numberRange(0,20)},{name:"background",type:index.String}];checkOptions("roundedCorners",allowed,options);var roundedCornersOptions=formatOptions("roundedCorners",allowed,options);return transforms.concat(roundedCornersOptions)};var rotate=function rotate(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"deg",type:index.union([numberRange(0,359),index.enums.of("exif")])},{name:"exif",type:index.Boolean},{name:"background",type:index.String}];var keys=checkOptions("rotate",allowed,options);if(keys.length<1){throw new Error("Rotate options must contain either deg or exif")}var rotateOptions=formatOptions("rotate",allowed,options);return transforms.concat(rotateOptions)};var resize=function resize(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"width",type:numberRange(0,1e4)},{name:"height",type:numberRange(0,1e4)},{name:"fit",type:index.enums.of("clip crop scale max")},{name:"align",type:index.union([index.enums.of("center top bottom left right faces"),alignPair])}];var keys=checkOptions("resize",allowed,options);if(keys.length<1){throw new Error("Resize options must contain either width, height, fit, or align")}var resizeOptions=formatOptions("resize",allowed,options);return transforms.concat(resizeOptions)};var flip=function flip(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var value=arguments[1];if(typeof value!=="boolean"){throw Error("flip must be a Boolean value")}return value?transforms.concat("flip"):transforms};var flop=function flop(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var value=arguments[1];if(typeof value!=="boolean"){throw Error("flop must be a Boolean value")}return value?transforms.concat("flop"):transforms};var monochrome=function monochrome(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var value=arguments[1];if(typeof value!=="boolean"){throw Error("monochrome must be a Boolean value")}return value?transforms.concat("monochrome"):transforms};var crop=function crop(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var options=arguments[1];var allowed=[{name:"dim",type:index.struct({x:index.Integer,y:index.Integer,width:index.Integer,height:index.Integer})}];checkOptions("crop",allowed,options);var dim=options.dim;var cropOptions="crop=dim:["+dim.x+","+dim.y+","+dim.width+","+dim.height+"]";return transforms.concat(cropOptions)};var transformers={crop:crop,resize:resize,rotate:rotate,roundedCorners:roundedCorners,vignette:vignette,polaroid:polaroid,tornEdges:tornEdges,shadow:shadow,circle:circle,border:border,flip:flip,flop:flop,blackwhite:blackwhite,monochrome:monochrome,sepia:sepia};var transform=function transform(session,url,config){var allowed=Object.keys(transformers);var keys=Object.keys(config);keys.forEach(function(key){if(allowed.indexOf(key)<0){throw new Error("Invalid option specified: "+key+" is not a valid transform option.")}});var construct=function construct(){var arr=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var count=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(count===keys.length){return arr}var transformIndex=keys[count];var transformConfig=config[transformIndex];var transformer=transformers[transformIndex];var newCount=count+1;return construct(transformer(arr,transformConfig),newCount)};if(session.policy&&session.signature){var secString="security=policy:"+session.policy+",signature:"+session.signature;var _baseURL=processURL+"/"+session.apikey+"/"+secString;var transformString=construct().join("/");return _baseURL+"/"+transformString+"/"+url}var baseURL=processURL+"/"+session.apikey;var transforms=construct();if(transforms.length){var _transformString=construct().join("/");return baseURL+"/"+_transformString+"/"+url}return url};var sparkMd5=createCommonjsModule$1(function(module,exports){(function(factory){{module.exports=factory()}})(function(undefined){"use strict";var add32=function add32(a,b){return a+b&4294967295},hex_chr=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a+=(b&c|~b&d)+k[0]-680876936|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[1]-389564586|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[2]+606105819|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[3]-1044525330|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[4]-176418897|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[5]+1200080426|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[6]-1473231341|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[7]-45705983|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[8]+1770035416|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[9]-1958414417|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[10]-42063|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[11]-1990404162|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[12]+1804603682|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[13]-40341101|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[14]-1502002290|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[15]+1236535329|0;b=(b<<22|b>>>10)+c|0;a+=(b&d|c&~d)+k[1]-165796510|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[6]-1069501632|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[11]+643717713|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[0]-373897302|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[5]-701558691|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[10]+38016083|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[15]-660478335|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[4]-405537848|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[9]+568446438|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[14]-1019803690|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[3]-187363961|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[8]+1163531501|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[13]-1444681467|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[2]-51403784|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[7]+1735328473|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[12]-1926607734|0;b=(b<<20|b>>>12)+c|0;a+=(b^c^d)+k[5]-378558|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[8]-2022574463|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[11]+1839030562|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[14]-35309556|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[1]-1530992060|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[4]+1272893353|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[7]-155497632|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[10]-1094730640|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[13]+681279174|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[0]-358537222|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[3]-722521979|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[6]+76029189|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[9]-640364487|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[12]-421815835|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[15]+530742520|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[2]-995338651|0;b=(b<<23|b>>>9)+c|0;a+=(c^(b|~d))+k[0]-198630844|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[7]+1126891415|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[14]-1416354905|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[5]-57434055|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[12]+1700485571|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[3]-1894986606|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[10]-1051523|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[1]-2054922799|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[8]+1873313359|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[15]-30611744|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[6]-1560198380|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[13]+1309151649|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[4]-145523070|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[11]-1120210379|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[2]+718787259|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[9]-343485551|0;b=(b<<21|b>>>11)+c|0;x[0]=a+x[0]|0;x[1]=b+x[1]|0;x[2]=c+x[2]|0;x[3]=d+x[3]|0}function md5blk(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24)}return md5blks}function md5blk_array(a){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+(a[i+3]<<24)}return md5blks}function md51(s){var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)))}s=s.substring(i-64);length=s.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function md51_array(a){var n=a.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk_array(a.subarray(i-64,i)))}a=i-64<n?a.subarray(i-64):new Uint8Array(0);length=a.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=a[i]<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function rhex(n){var s="",j;for(j=0;j<4;j+=1){s+=hex_chr[n>>j*8+4&15]+hex_chr[n>>j*8&15]}return s}function hex(x){var i;for(i=0;i<x.length;i+=1){x[i]=rhex(x[i])}return x.join("")}if(hex(md51("hello"))!=="5d41402abc4b2a76b9719d911017c592"){add32=function add32(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}}if(typeof ArrayBuffer!=="undefined"&&!ArrayBuffer.prototype.slice){(function(){function clamp(val,length){val=val|0||0;if(val<0){return Math.max(val+length,0)}return Math.min(val,length)}ArrayBuffer.prototype.slice=function(from,to){var length=this.byteLength,begin=clamp(from,length),end=length,num,target,targetArray,sourceArray;if(to!==undefined){end=clamp(to,length)}if(begin>end){return new ArrayBuffer(0)}num=end-begin;target=new ArrayBuffer(num);targetArray=new Uint8Array(target);sourceArray=new Uint8Array(this,begin,num);targetArray.set(sourceArray);return target}})()}function toUtf8(str){if(/[\u0080-\uFFFF]/.test(str)){str=unescape(encodeURIComponent(str))}return str}function utf8Str2ArrayBuffer(str,returnUInt8Array){var length=str.length,buff=new ArrayBuffer(length),arr=new Uint8Array(buff),i;for(i=0;i<length;i+=1){arr[i]=str.charCodeAt(i)}return returnUInt8Array?arr:buff}function arrayBuffer2Utf8Str(buff){return String.fromCharCode.apply(null,new Uint8Array(buff))}function concatenateArrayBuffers(first,second,returnUInt8Array){var result=new Uint8Array(first.byteLength+second.byteLength);result.set(new Uint8Array(first));result.set(new Uint8Array(second),first.byteLength);return returnUInt8Array?result:result.buffer}function hexToBinaryString(hex){var bytes=[],length=hex.length,x;for(x=0;x<length-1;x+=2){bytes.push(parseInt(hex.substr(x,2),16))}return String.fromCharCode.apply(String,bytes)}function SparkMD5(){this.reset()}SparkMD5.prototype.append=function(str){this.appendBinary(toUtf8(str));return this};SparkMD5.prototype.appendBinary=function(contents){this._buff+=contents;this._length+=contents.length;var length=this._buff.length,i;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk(this._buff.substring(i-64,i)))}this._buff=this._buff.substring(i-64);return this};SparkMD5.prototype.end=function(raw){var buff=this._buff,length=buff.length,i,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff.charCodeAt(i)<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.prototype.reset=function(){this._buff="";this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}};SparkMD5.prototype.setState=function(state){this._buff=state.buff;this._length=state.length;this._hash=state.hash;return this};SparkMD5.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length};SparkMD5.prototype._finish=function(tail,length){var i=length,tmp,lo,hi;tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(this._hash,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=this._length*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(this._hash,tail)};SparkMD5.hash=function(str,raw){return SparkMD5.hashBinary(toUtf8(str),raw)};SparkMD5.hashBinary=function(content,raw){var hash=md51(content),ret=hex(hash);return raw?hexToBinaryString(ret):ret};SparkMD5.ArrayBuffer=function(){this.reset()};SparkMD5.ArrayBuffer.prototype.append=function(arr){var buff=concatenateArrayBuffers(this._buff.buffer,arr,true),length=buff.length,i;this._length+=arr.byteLength;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk_array(buff.subarray(i-64,i)))}this._buff=i-64<length?new Uint8Array(buff.buffer.slice(i-64)):new Uint8Array(0);return this};SparkMD5.ArrayBuffer.prototype.end=function(raw){var buff=this._buff,length=buff.length,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff[i]<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.ArrayBuffer.prototype.getState=function(){var state=SparkMD5.prototype.getState.call(this);state.buff=arrayBuffer2Utf8Str(state.buff);return state};SparkMD5.ArrayBuffer.prototype.setState=function(state){state.buff=utf8Str2ArrayBuffer(state.buff,true);return SparkMD5.prototype.setState.call(this,state)};SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy;SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish;SparkMD5.ArrayBuffer.hash=function(arr,raw){var hash=md51_array(new Uint8Array(arr)),ret=hex(hash);return raw?hexToBinaryString(ret):ret};return SparkMD5})});var index$5=createCommonjsModule$1(function(module){"use strict";module.exports=function(PromiseArgument){var Promise;function throat(size,fn){var queue=[];function run(fn,self,args){if(size){size--;var result=new Promise(function(resolve){resolve(fn.apply(self,args))});result.then(release,release);return result}else{return new Promise(function(resolve){queue.push(new Delayed(resolve,fn,self,args))})}}function release(){size++;if(queue.length){var next=queue.shift();next.resolve(run(next.fn,next.self,next.args))}}if(typeof size==="function"){var temp=fn;fn=size;size=temp}if(typeof size!=="number"){throw new TypeError("Expected throat size to be a number but got "+(typeof size==="undefined"?"undefined":_typeof(size)))}if(fn!==undefined&&typeof fn!=="function"){throw new TypeError("Expected throat fn to be a function but got "+(typeof fn==="undefined"?"undefined":_typeof(fn)))}if(typeof fn==="function"){return function(){var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}return run(fn,this,args)}}else{return function(fn){if(typeof fn!=="function"){throw new TypeError("Expected throat fn to be a function but got "+(typeof fn==="undefined"?"undefined":_typeof(fn)))}var args=[];for(var i=1;i<arguments.length;i++){args.push(arguments[i])}return run(fn,this,args)}}}if(arguments.length===1&&typeof PromiseArgument==="function"){Promise=PromiseArgument;return throat}else{Promise=module.exports.Promise;if(typeof Promise!=="function"){throw new Error("You must provide a Promise polyfill for this library to work in older environments")}return throat(arguments[0],arguments[1])}};if(typeof Promise==="function"){module.exports.Promise=Promise}function Delayed(resolve,fn,self,args){this.resolve=resolve;this.fn=fn;this.self=self||null;this.args=args}});var INFINITY=1/0;var MAX_SAFE_INTEGER=9007199254740991;var MAX_INTEGER=1.7976931348623157e308;var NAN=0/0;var funcTag="[object Function]";var genTag="[object GeneratorFunction]";var symbolTag="[object Symbol]";var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var freeParseInt=parseInt;var objectProto=Object.prototype;var objectToString=objectProto.toString;var nativeCeil=Math.ceil;var nativeMax=Math.max;function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step}return result}function createRange(fromRight){return function(start,end,step){if(step&&typeof step!="number"&&isIterateeCall(start,end,step)){end=step=undefined}start=toFinite(start);if(end===undefined){end=start;start=0}else{end=toFinite(end)}step=step===undefined?start<end?1:-1:toFinite(step);return baseRange(start,end,step,fromRight)}}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject$5(object)){return false}var type=typeof index==="undefined"?"undefined":_typeof(index);if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function eq(value,other){return value===other||value!==value&&other!==other}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction$5(value)}function isFunction$5(value){var tag=isObject$5(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject$5(value){var type=typeof value==="undefined"?"undefined":_typeof(value);return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof(value))=="object"}function isSymbol(value){return(typeof value==="undefined"?"undefined":_typeof(value))=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject$5(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject$5(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var range$1=createRange();var index$6=range$1;var FUNC_ERROR_TEXT="Expected a function";var NAN$1=0/0;var symbolTag$1="[object Symbol]";var reTrim$1=/^\s+|\s+$/g;var reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i;var reIsBinary$1=/^0b[01]+$/i;var reIsOctal$1=/^0o[0-7]+$/i;var freeParseInt$1=parseInt;var freeGlobal=(typeof commonjsGlobal$1==="undefined"?"undefined":_typeof(commonjsGlobal$1))=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1;var freeSelf=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var objectProto$1=Object.prototype;var objectToString$1=objectProto$1.toString;var nativeMax$1=Math.max;var nativeMin=Math.min;var now=function now(){return root.Date.now()};function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber$1(wait)||0;if(isObject$6(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax$1(toNumber$1(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}
function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(isObject$6(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function isObject$6(value){var type=typeof value==="undefined"?"undefined":_typeof(value);return!!value&&(type=="object"||type=="function")}function isObjectLike$1(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof(value))=="object"}function isSymbol$1(value){return(typeof value==="undefined"?"undefined":_typeof(value))=="symbol"||isObjectLike$1(value)&&objectToString$1.call(value)==symbolTag$1}function toNumber$1(value){if(typeof value=="number"){return value}if(isSymbol$1(value)){return NAN$1}if(isObject$6(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject$6(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim$1,"");var isBinary=reIsBinary$1.test(value);return isBinary||reIsOctal$1.test(value)?freeParseInt$1(value.slice(2),isBinary?2:8):reIsBadHex$1.test(value)?NAN$1:+value}var index$7=throttle;var log$1=logger.context("api-client");var https=function https(url){return"https://"+url};var getLocationURL=function getLocationURL(url){return url&&https(url)};var getName=function getName(file){return file.customName||file.name};var isFile=function isFile(file){return file.toString()==="[object File]"};var isBlob=function isBlob(blob){return isFile(blob)||blob.toString()==="[object Blob]"};var getRange=function getRange(file,partNumber,cfg){var start=partNumber*cfg.partSize;var end=start+cfg.partSize>=file.size?file.size:start+cfg.partSize;return{start:start,end:end}};var sliceFile=function sliceFile(file,partNumber,cfg){var slice=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;var _getRange=getRange(file,partNumber,cfg),start=_getRange.start,end=_getRange.end;return slice.call(file,start,end)};var readFile=function readFile(file){return new Promise(function(resolve,reject){var reader=void 0;if(window.File&&window.FileReader&&window.Blob){reader=new FileReader}else{reject(new Error("The File APIs are not fully supported by your browser"))}reader.onload=resolve;reader.onerror=reject;reader.readAsArrayBuffer(file)})};var calcMD5=function calcMD5(data){return window.btoa(sparkMd5.ArrayBuffer.hash(data,true))};var getFormData=function getFormData(fields,cfg){var fd=new FormData;Object.keys(fields).forEach(function(key){fd.append(key,fields[key])});Object.keys(cfg.store).forEach(function(key){fd.append(key,cfg.store[key])});return fd};var start=function start(file,cfg){var fields={apikey:cfg.apikey,filename:getName(file),mimetype:file.type||"application/octet-stream",size:file.size};if(cfg.policy&&cfg.signature){fields.policy=cfg.policy;fields.signature=cfg.signature}var formData=getFormData(fields,cfg);return requestWithSource("post",cfg.host+"/multipart/start").send(formData)};var getS3PartData=function getS3PartData(startParams,partNumber,size,md5,cfg){var host=cfg.debug?cfg.host:getLocationURL(startParams.location_url)||cfg.host;var fields=Object.assign({},{apikey:cfg.apikey,part:partNumber,size:size,md5:md5},startParams);var formData=getFormData(fields,cfg);return requestWithSource("post",host+"/multipart/upload").send(formData)};var uploadPart=function uploadPart(part,params,onProgress){var req=client$1.put(params.url).set(params.headers).send(new Uint8Array(part));if(onProgress){return req.on("progress",onProgress)}return req};var complete=function complete(file,parts,startParams,cfg){var host=cfg.debug?cfg.host:getLocationURL(startParams.location_url)||cfg.host;var fields=Object.assign({},{apikey:cfg.apikey,size:file.size,filename:file.customName||file.name,mimetype:file.type||"application/octet-stream",parts:parts},startParams);var formData=getFormData(fields,cfg);return requestWithSource("post",host+"/multipart/complete").send(formData)};var formatETags=function formatETags(etags){return etags.map(function(tag,idx){return idx+1+":"+tag}).join(";")};var _upload=function _upload(file,cfg,token){log$1("calling upload with config:",cfg);var mkPart=function mkPart(num){return{size:null,number:num,loaded:0,request:null}};var state={progressTick:null,paused:false,failed:false,done:false,retries:{}};var totalParts=Math.ceil(file.size/cfg.partSize);var allParts=index$6(0,totalParts).map(mkPart);var sumBytes=function sumBytes(bytes){return bytes.reduce(function(a,b){return a+b},0)};var percentOfFile=function percentOfFile(bytes){return Math.round(bytes/file.size*100)};var startProgress=function startProgress(){if(cfg.onProgress){state.progressTick=setInterval(function(){var totalBytes=sumBytes(allParts.map(function(p){return p.loaded}));var totalPercent=percentOfFile(totalBytes);var payload={totalBytes:totalBytes,totalPercent:totalPercent};cfg.onProgress(payload)},cfg.progressInterval)}};var finishProgress=function finishProgress(){if(cfg.onProgress){var totalBytes=sumBytes(allParts.map(function(p){return p.size}));var totalPercent=percentOfFile(totalBytes);var payload={totalBytes:totalBytes,totalPercent:totalPercent};cfg.onProgress(payload);clearInterval(state.progressTick)}};token.pause=function(){if(!state.failed&&!state.done&&!state.paused){log$1("Upload flow paused");state.paused=true;clearInterval(state.progressTick)}};token.resume=function(){if(!state.failed&&!state.done&&state.paused){log$1("Upload flow resumed");state.paused=false;startProgress()}if(state.paused&&state.done){state.paused=false;finishProgress()}};var cancelAllRequests=function cancelAllRequests(){allParts.map(function(p){return p.request}).map(function(req){if(req){return req.abort()}return null})};var cancel=new Promise(function(resolve,reject){token.cancel=function(){if(!state.failed&&!state.done){clearInterval(state.progressTick);cancelAllRequests();state.failed=true;reject(new Error("Upload cancelled"))}}});var retry=function retry(location,func,err){var attempt=state.retries[location]||0;var promise=new Promise(function(resolve,reject){if(attempt===cfg.retry||err.status===403){clearInterval(state.progressTick);state.failed=true;reject(new Error("Upload for "+getName(file)+" failed: "+err))}else{setTimeout(function(){if(state.failed){resolve()}else{attempt+=1;state.retries[location]=attempt;if(cfg.onRetry){cfg.onRetry({location:location,parts:allParts,filename:getName(file),attempt:attempt})}resolve(func())}},2e3*attempt)}});return Promise.race([cancel,promise])};var sliceAndUpload=function sliceAndUpload(part,startParams){var slice=sliceFile(file,part.number,cfg);return readFile(slice).then(function(evt){var chunk=evt.target.result;part.size=chunk.byteLength;if(chunk.byteLength===0){return Promise.reject(new Error("Upload aborted due to empty chunk."))}var md5=calcMD5(chunk);var req=getS3PartData(startParams,part.number+1,chunk.byteLength,md5,cfg);part.request=req;return req.then(function(res){var onProgress=void 0;if(cfg.onProgress){onProgress=index$7(function(evt){if(evt.loaded>0){part.loaded=evt.loaded}},cfg.progressInterval)}var uploadReq=uploadPart(chunk,res.body,onProgress);part.request=uploadReq;return uploadReq})})};var uploadParts=function uploadParts(startParams){var go=function go(part){if(state.failed){return Promise.resolve()}if(state.paused){return new Promise(function(resolve){var check=function check(){if(state.paused){setTimeout(function(){return check()},100)}else{resolve(go(part))}};check()})}return sliceAndUpload(part,startParams).catch(function(err){part.loaded=0;return retry("upload part "+(part.number+1),function(){return go(part)},err)})};var partsFlow=Promise.all(allParts.map(index$5(cfg.concurrency,go)));return Promise.race([cancel,partsFlow]).then(function(results){var etags=formatETags(results.map(function(res){return res.headers&&res.headers.etag}));var go=function go(){return complete(file,etags,startParams,cfg).then(function(res){state.done=true;if(!state.paused)finishProgress();return res.body}).catch(function(err){return retry("complete",go,err)})};return go()})};var startFlow=function startFlow(){return start(file,cfg).catch(function(err){return retry("start",startFlow,err)})};return Promise.race([cancel,startFlow()]).then(function(res){startProgress();return uploadParts(res.body)})};var upload=function upload(session,file){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var storeOptions=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var token=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};if(!file||!isBlob(file)){throw new TypeError("File parameter is not a valid Blob or File instance")}if(file.size!==undefined&&file.size===0){throw new Error("File has a size of 0.")}var allowedOptions=[{name:"host",type:index.String},{name:"partSize",type:index.Number},{name:"concurrency",type:index.refinement(index.Integer,function(n){return n>0})},{name:"onProgress",type:index.Function},{name:"progressInterval",type:index.Integer},{name:"onRetry",type:index.Function},{name:"retry",type:index.Integer},{name:"debug",type:index.Bool}];var allowedStoreOptions=[{name:"location",type:index.enums.of("s3 gcs rackspace azure dropbox")},{name:"region",type:index.String},{name:"path",type:index.String},{name:"container",type:index.String},{name:"filename",type:index.String},{name:"access",type:index.enums.of("public private")}];checkOptions("upload (options)",allowedOptions,options);checkOptions("upload (storeOptions)",allowedStoreOptions,storeOptions);if(storeOptions.filename){file.customName=storeOptions.filename}else if(file.name===undefined){if(file.type){var ext=file.type.split("/").pop();file.customName="untitled."+ext}else{file.customName="untitled"}}delete storeOptions.filename;if(storeOptions.location===undefined){storeOptions.location="s3"}var snakeOpts=snakeKeys(storeOptions,"store");var config=Object.assign({},{host:ENV.uploadApiUrl,apikey:session.apikey,policy:session.policy,signature:session.signature,partSize:6*1024*1024,concurrency:5,onProgress:null,progressInterval:1e3,onRetry:null,retry:10,store:snakeOpts,debug:false},options);return _upload(file,config,token)};var init$1=function init(apikey,security){if(!apikey||typeof apikey!=="string"){throw new Error("apikey is required to initialize the Filestack client")}if(security&&!(security.policy&&security.signature)){throw new Error("signature and policy are both required for security")}var session=Object.assign({},security,{apikey:apikey});return{getSecurity:function getSecurity(){return{policy:session.policy,signature:session.signature}},setSecurity:function setSecurity(sec){if(sec&&!(sec.policy&&sec.signature)){throw new Error("signature and policy are both required for security")}session.policy=sec.policy;session.signature=sec.signature;return session},storeURL:function storeURL$$1(url,uploadOptions,token){return storeURL(session,url,uploadOptions,token)},retrieve:function retrieve$$1(handle,uploadOptions){return retrieve(session,handle,uploadOptions)},remove:function remove$$1(handle,options){return remove(session,handle,options)},metadata:function metadata$$1(handle,options){return metadata(session,handle,options)},cloud:function cloud(name){return _cloud(session,security,name)},transform:function transform$$1(url,options){return transform(session,url,options)},upload:function upload$$1(file,options,storeOptions,token){return upload(session,file,options,storeOptions,token)}}};var client={version:"0.4.4",init:init$1};var onOff$1={init:function init(){window.filestackInternals.logger.working=false},isWorking:function isWorking(){return window.filestackInternals.logger.working},on:function on(){window.filestackInternals.logger.working=true},off:function off(){window.filestackInternals.logger.working=false}};var context$1=function context(contextName,onOff){var api=function log(){for(var _len=arguments.length,stuff=Array(_len),_key=0;_key<_len;_key++){stuff[_key]=arguments[_key]}var convertedToStrings=[].concat(stuff).map(function(thing){if((typeof thing==="undefined"?"undefined":_typeof(thing))==="object"){return JSON.stringify(thing,function(key,value){if(typeof value==="function"){if(key==="json"){try{return value()}catch(err){}}return"[Function]"}if(value instanceof File){return"[File name: "+value.name+", mimetype: "+value.type+", size: "+value.size+"]"}return value},2)}return thing});if(onOff.isWorking()){var _console;(_console=console).log.apply(_console,["["+contextName+"]"].concat(toConsumableArray(convertedToStrings)))}};api.context=function(subContextName){return context(contextName+"]["+subContextName,onOff)};api.on=onOff.on;api.off=onOff.off;return api};var logger$1=context$1("filestack",onOff$1);var initializeGlobalNamespace$1=function initializeGlobalNamespace(){var namespace=void 0;if((typeof window==="undefined"?"undefined":_typeof(window))==="object"){namespace=window.filestackInternals;if(!namespace){namespace={};window.filestackInternals=namespace}if(!namespace.logger){namespace.logger=logger$1;onOff$1.init()}}return namespace};initializeGlobalNamespace$1();var ENV$1={css:{main:"https://static.filestackapi.com/picker/v3/0.6.6/main.css"}};var GlobalVue=window.Vue;window.Vue=null;function isUndef(v){return v===undefined||v===null}function isDef(v){return v!==undefined&&v!==null}function isTrue(v){return v===true}function isFalse(v){return v===false}function isPrimitive(value){return typeof value==="string"||typeof value==="number"}function isObject$4(obj){return obj!==null&&(typeof obj==="undefined"?"undefined":_typeof(obj))==="object"}var _toString=Object.prototype.toString;function isPlainObject(obj){return _toString.call(obj)==="[object Object]"}function isRegExp(v){return _toString.call(v)==="[object RegExp]"}function toString$1(val){return val==null?"":(typeof val==="undefined"?"undefined":_typeof(val))==="object"?JSON.stringify(val,null,2):String(val)}function toNumber$1$1(val){var n=parseFloat(val);return isNaN(n)?val:n}function makeMap(str,expectsLowerCase){var map=Object.create(null);var list=str.split(",");for(var i=0;i<list.length;i++){map[list[i]]=true}return expectsLowerCase?function(val){return map[val.toLowerCase()]}:function(val){return map[val]}}var isBuiltInTag=makeMap("slot,component",true);function remove$1(arr,item){if(arr.length){var index=arr.indexOf(item);if(index>-1){return arr.splice(index,1)}}}var hasOwnProperty$1=Object.prototype.hasOwnProperty;function hasOwn(obj,key){return hasOwnProperty$1.call(obj,key)}function cached(fn){var cache=Object.create(null);return function cachedFn(str){var hit=cache[str];return hit||(cache[str]=fn(str))}}var camelizeRE=/-(\w)/g;var camelize=cached(function(str){return str.replace(camelizeRE,function(_,c){return c?c.toUpperCase():""})});var capitalize=cached(function(str){return str.charAt(0).toUpperCase()+str.slice(1)});var hyphenateRE=/([^-])([A-Z])/g;var hyphenate=cached(function(str){return str.replace(hyphenateRE,"$1-$2").replace(hyphenateRE,"$1-$2").toLowerCase()});function bind(fn,ctx){function boundFn(a){var l=arguments.length;return l?l>1?fn.apply(ctx,arguments):fn.call(ctx,a):fn.call(ctx)}boundFn._length=fn.length;return boundFn}function toArray$1(list,start){start=start||0;var i=list.length-start;var ret=new Array(i);while(i--){ret[i]=list[i+start]}return ret}function extend$1(to,_from){for(var key in _from){to[key]=_from[key]}return to}function toObject$1(arr){var res={};for(var i=0;i<arr.length;i++){if(arr[i]){extend$1(res,arr[i])}}return res}function noop(){}var no=function no(){return false};var identity=function identity(_){return _};function looseEqual(a,b){var isObjectA=isObject$4(a);var isObjectB=isObject$4(b);if(isObjectA&&isObjectB){try{return JSON.stringify(a)===JSON.stringify(b)}catch(e){return a===b}}else if(!isObjectA&&!isObjectB){return String(a)===String(b)}else{return false}}function looseIndexOf(arr,val){for(var i=0;i<arr.length;i++){if(looseEqual(arr[i],val)){return i}}return-1}function once(fn){var called=false;return function(){if(!called){called=true;fn.apply(this,arguments)}}}var SSR_ATTR="data-server-rendered";var ASSET_TYPES=["component","directive","filter"];var LIFECYCLE_HOOKS=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"];var config={optionMergeStrategies:Object.create(null),silent:false,productionTip:"production"!=="production",devtools:"production"!=="production",performance:false,errorHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:no,isReservedAttr:no,isUnknownElement:no,getTagNamespace:noop,parsePlatformTagName:identity,mustUseProp:no,_lifecycleHooks:LIFECYCLE_HOOKS};var emptyObject=Object.freeze({});function isReserved(str){var c=(str+"").charCodeAt(0);return c===36||c===95}function def(obj,key,val,enumerable){Object.defineProperty(obj,key,{value:val,enumerable:!!enumerable,writable:true,configurable:true})}var bailRE=/[^\w.$]/;function parsePath(path){if(bailRE.test(path)){return}var segments=path.split(".");return function(obj){for(var i=0;i<segments.length;i++){if(!obj){return}obj=obj[segments[i]]}return obj}}var warn=noop;var formatComponentName=null;function handleError(err,vm,info){if(config.errorHandler){config.errorHandler.call(null,err,vm,info)}else{if(inBrowser&&typeof console!=="undefined"){console.error(err)}else{throw err}}}var hasProto="__proto__"in{};var inBrowser=typeof window!=="undefined";var UA=inBrowser&&window.navigator.userAgent.toLowerCase();var isIE=UA&&/msie|trident/.test(UA);var isIE9=UA&&UA.indexOf("msie 9.0")>0;var isEdge=UA&&UA.indexOf("edge/")>0;var isAndroid=UA&&UA.indexOf("android")>0;var isIOS=UA&&/iphone|ipad|ipod|ios/.test(UA);var isChrome=UA&&/chrome\/\d+/.test(UA)&&!isEdge;var supportsPassive=false;if(inBrowser){try{var opts={};Object.defineProperty(opts,"passive",{get:function get$$1(){supportsPassive=true}});window.addEventListener("test-passive",null,opts)}catch(e){}}var _isServer;var isServerRendering=function isServerRendering(){if(_isServer===undefined){if(!inBrowser&&typeof global!=="undefined"){_isServer=global["process"].env.VUE_ENV==="server"}else{_isServer=false}}return _isServer};var devtools=inBrowser&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function isNative(Ctor){return typeof Ctor==="function"&&/native code/.test(Ctor.toString())}var hasSymbol=typeof Symbol!=="undefined"&&isNative(Symbol)&&typeof Reflect!=="undefined"&&isNative(Reflect.ownKeys);var nextTick=function(){var callbacks=[];var pending=false;var timerFunc;function nextTickHandler(){pending=false;var copies=callbacks.slice(0);callbacks.length=0;for(var i=0;i<copies.length;i++){copies[i]()}}if(typeof Promise!=="undefined"&&isNative(Promise)){var p=Promise.resolve();var logError=function logError(err){console.error(err)};timerFunc=function timerFunc(){p.then(nextTickHandler).catch(logError);if(isIOS){setTimeout(noop)}}}else if(typeof MutationObserver!=="undefined"&&(isNative(MutationObserver)||MutationObserver.toString()==="[object MutationObserverConstructor]")){var counter=1;var observer=new MutationObserver(nextTickHandler);var textNode=document.createTextNode(String(counter));observer.observe(textNode,{characterData:true});timerFunc=function timerFunc(){counter=(counter+1)%2;textNode.data=String(counter)}}else{timerFunc=function timerFunc(){setTimeout(nextTickHandler,0)}}return function queueNextTick(cb,ctx){var _resolve;callbacks.push(function(){if(cb){try{cb.call(ctx)}catch(e){handleError(e,ctx,"nextTick")}}else if(_resolve){_resolve(ctx)}});if(!pending){pending=true;timerFunc()}if(!cb&&typeof Promise!=="undefined"){return new Promise(function(resolve,reject){_resolve=resolve})}}}();var _Set;if(typeof Set!=="undefined"&&isNative(Set)){_Set=Set}else{_Set=function(){function Set(){this.set=Object.create(null)}Set.prototype.has=function has(key){return this.set[key]===true};Set.prototype.add=function add(key){this.set[key]=true};Set.prototype.clear=function clear(){this.set=Object.create(null)};return Set}()}var uid$1=0;var Dep=function Dep(){this.id=uid$1++;this.subs=[]};Dep.prototype.addSub=function addSub(sub){this.subs.push(sub)};Dep.prototype.removeSub=function removeSub(sub){remove$1(this.subs,sub)};Dep.prototype.depend=function depend(){if(Dep.target){Dep.target.addDep(this)}};Dep.prototype.notify=function notify(){var subs=this.subs.slice();for(var i=0,l=subs.length;i<l;i++){subs[i].update()}};Dep.target=null;var targetStack=[];function pushTarget(_target){if(Dep.target){targetStack.push(Dep.target)}Dep.target=_target}function popTarget(){Dep.target=targetStack.pop()}var arrayProto=Array.prototype;var arrayMethods=Object.create(arrayProto);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(method){var original=arrayProto[method];def(arrayMethods,method,function mutator(){var arguments$1=arguments;var i=arguments.length;var args=new Array(i);while(i--){args[i]=arguments$1[i]}var result=original.apply(this,args);var ob=this.__ob__;var inserted;switch(method){case"push":inserted=args;break;case"unshift":inserted=args;break;case"splice":inserted=args.slice(2);break}if(inserted){ob.observeArray(inserted)}ob.dep.notify();return result})});var arrayKeys=Object.getOwnPropertyNames(arrayMethods);var observerState={shouldConvert:true,isSettingProps:false};var Observer=function Observer(value){this.value=value;this.dep=new Dep;this.vmCount=0;def(value,"__ob__",this);if(Array.isArray(value)){var augment=hasProto?protoAugment:copyAugment;augment(value,arrayMethods,arrayKeys);this.observeArray(value)}else{this.walk(value)}};Observer.prototype.walk=function walk(obj){var keys=Object.keys(obj);for(var i=0;i<keys.length;i++){defineReactive$$1(obj,keys[i],obj[keys[i]])}};Observer.prototype.observeArray=function observeArray(items){for(var i=0,l=items.length;i<l;i++){observe(items[i])}};function protoAugment(target,src){target.__proto__=src}function copyAugment(target,src,keys){for(var i=0,l=keys.length;i<l;i++){var key=keys[i];def(target,key,src[key])}}function observe(value,asRootData){if(!isObject$4(value)){return}var ob;if(hasOwn(value,"__ob__")&&value.__ob__ instanceof Observer){ob=value.__ob__}else if(observerState.shouldConvert&&!isServerRendering()&&(Array.isArray(value)||isPlainObject(value))&&Object.isExtensible(value)&&!value._isVue){ob=new Observer(value)}if(asRootData&&ob){ob.vmCount++}return ob}function defineReactive$$1(obj,key,val,customSetter){var dep=new Dep;var property=Object.getOwnPropertyDescriptor(obj,key);if(property&&property.configurable===false){return}var getter=property&&property.get;var setter=property&&property.set;var childOb=observe(val);Object.defineProperty(obj,key,{enumerable:true,configurable:true,get:function reactiveGetter(){var value=getter?getter.call(obj):val;if(Dep.target){dep.depend();if(childOb){childOb.dep.depend()}if(Array.isArray(value)){dependArray(value)}}return value},set:function reactiveSetter(newVal){var value=getter?getter.call(obj):val;if(newVal===value||newVal!==newVal&&value!==value){return}if("production"!=="production"&&customSetter){customSetter()}if(setter){setter.call(obj,newVal)}else{val=newVal}childOb=observe(newVal);dep.notify()}})}function set$1(target,key,val){if(Array.isArray(target)&&typeof key==="number"){target.length=Math.max(target.length,key);target.splice(key,1,val);return val}if(hasOwn(target,key)){target[key]=val;return val}var ob=target.__ob__;if(target._isVue||ob&&ob.vmCount){"production"!=="production"&&warn("Avoid adding reactive properties to a Vue instance or its root $data "+"at runtime - declare it upfront in the data option.");return val}if(!ob){target[key]=val;return val}defineReactive$$1(ob.value,key,val);ob.dep.notify();return val}function del(target,key){if(Array.isArray(target)&&typeof key==="number"){target.splice(key,1);return}var ob=target.__ob__;if(target._isVue||ob&&ob.vmCount){"production"!=="production"&&warn("Avoid deleting properties on a Vue instance or its root $data "+"- just set it to null.");return}if(!hasOwn(target,key)){return}delete target[key];if(!ob){return}ob.dep.notify()}function dependArray(value){for(var e=void 0,i=0,l=value.length;i<l;i++){e=value[i];e&&e.__ob__&&e.__ob__.dep.depend();if(Array.isArray(e)){dependArray(e)}}}var strats=config.optionMergeStrategies;function mergeData(to,from){if(!from){return to}var key,toVal,fromVal;var keys=Object.keys(from);for(var i=0;i<keys.length;i++){key=keys[i];toVal=to[key];fromVal=from[key];if(!hasOwn(to,key)){set$1(to,key,fromVal)}else if(isPlainObject(toVal)&&isPlainObject(fromVal)){mergeData(toVal,fromVal)}}return to}strats.data=function(parentVal,childVal,vm){if(!vm){if(!childVal){return parentVal}if(typeof childVal!=="function"){"production"!=="production"&&warn('The "data" option should be a function '+"that returns a per-instance value in component "+"definitions.",vm);return parentVal}if(!parentVal){return childVal}return function mergedDataFn(){return mergeData(childVal.call(this),parentVal.call(this))}}else if(parentVal||childVal){return function mergedInstanceDataFn(){var instanceData=typeof childVal==="function"?childVal.call(vm):childVal;var defaultData=typeof parentVal==="function"?parentVal.call(vm):undefined;if(instanceData){return mergeData(instanceData,defaultData)}else{return defaultData}}}};function mergeHook(parentVal,childVal){return childVal?parentVal?parentVal.concat(childVal):Array.isArray(childVal)?childVal:[childVal]:parentVal}LIFECYCLE_HOOKS.forEach(function(hook){strats[hook]=mergeHook});function mergeAssets(parentVal,childVal){var res=Object.create(parentVal||null);return childVal?extend$1(res,childVal):res}ASSET_TYPES.forEach(function(type){strats[type+"s"]=mergeAssets});strats.watch=function(parentVal,childVal){if(!childVal){return Object.create(parentVal||null)}if(!parentVal){return childVal}var ret={};extend$1(ret,parentVal);for(var key in childVal){var parent=ret[key];var child=childVal[key];if(parent&&!Array.isArray(parent)){parent=[parent]}ret[key]=parent?parent.concat(child):[child]}return ret};strats.props=strats.methods=strats.computed=function(parentVal,childVal){if(!childVal){return Object.create(parentVal||null)}if(!parentVal){return childVal}var ret=Object.create(null);extend$1(ret,parentVal);extend$1(ret,childVal);return ret};var defaultStrat=function defaultStrat(parentVal,childVal){return childVal===undefined?parentVal:childVal};function normalizeProps(options){var props=options.props;if(!props){return}var res={};var i,val,name;if(Array.isArray(props)){i=props.length;while(i--){val=props[i];if(typeof val==="string"){name=camelize(val);res[name]={type:null}}else{}}}else if(isPlainObject(props)){for(var key in props){val=props[key];name=camelize(key);res[name]=isPlainObject(val)?val:{type:val}}}options.props=res}function normalizeDirectives(options){var dirs=options.directives;if(dirs){for(var key in dirs){var def=dirs[key];if(typeof def==="function"){dirs[key]={bind:def,update:def}}}}}function mergeOptions(parent,child,vm){if(typeof child==="function"){child=child.options}normalizeProps(child);normalizeDirectives(child);var extendsFrom=child.extends;if(extendsFrom){parent=mergeOptions(parent,extendsFrom,vm)}if(child.mixins){for(var i=0,l=child.mixins.length;i<l;i++){parent=mergeOptions(parent,child.mixins[i],vm)}}var options={};var key;for(key in parent){mergeField(key)}for(key in child){if(!hasOwn(parent,key)){mergeField(key)}}function mergeField(key){var strat=strats[key]||defaultStrat;options[key]=strat(parent[key],child[key],vm,key)}return options}function resolveAsset(options,type,id,warnMissing){if(typeof id!=="string"){return}var assets=options[type];if(hasOwn(assets,id)){return assets[id]}var camelizedId=camelize(id);if(hasOwn(assets,camelizedId)){return assets[camelizedId]}var PascalCaseId=capitalize(camelizedId);if(hasOwn(assets,PascalCaseId)){return assets[PascalCaseId]}var res=assets[id]||assets[camelizedId]||assets[PascalCaseId];if("production"!=="production"&&warnMissing&&!res){warn("Failed to resolve "+type.slice(0,-1)+": "+id,options)}return res}function validateProp(key,propOptions,propsData,vm){var prop=propOptions[key];var absent=!hasOwn(propsData,key);var value=propsData[key];if(isType$1(Boolean,prop.type)){if(absent&&!hasOwn(prop,"default")){value=false}else if(!isType$1(String,prop.type)&&(value===""||value===hyphenate(key))){value=true}}if(value===undefined){value=getPropDefaultValue(vm,prop,key);var prevShouldConvert=observerState.shouldConvert;observerState.shouldConvert=true;observe(value);observerState.shouldConvert=prevShouldConvert}return value}function getPropDefaultValue(vm,prop,key){if(!hasOwn(prop,"default")){return undefined}var def=prop.default;if("production"!=="production"&&isObject$4(def)){warn('Invalid default value for prop "'+key+'": '+"Props with type Object/Array must use a factory function "+"to return the default value.",vm)}if(vm&&vm.$options.propsData&&vm.$options.propsData[key]===undefined&&vm._props[key]!==undefined){return vm._props[key]}return typeof def==="function"&&getType(prop.type)!=="Function"?def.call(vm):def}function getType(fn){var match=fn&&fn.toString().match(/^\s*function (\w+)/);return match?match[1]:""}function isType$1(type,fn){if(!Array.isArray(fn)){return getType(fn)===getType(type)}for(var i=0,len=fn.length;i<len;i++){if(getType(fn[i])===getType(type)){return true}}return false}var mark;var measure;var VNode=function VNode(tag,data,children,text,elm,context,componentOptions){this.tag=tag;this.data=data;this.children=children;this.text=text;this.elm=elm;this.ns=undefined;this.context=context;this.functionalContext=undefined;this.key=data&&data.key;this.componentOptions=componentOptions;this.componentInstance=undefined;this.parent=undefined;this.raw=false;this.isStatic=false;this.isRootInsert=true;this.isComment=false;this.isCloned=false;this.isOnce=false};var prototypeAccessors={child:{}};prototypeAccessors.child.get=function(){return this.componentInstance};Object.defineProperties(VNode.prototype,prototypeAccessors);var createEmptyVNode=function createEmptyVNode(){var node=new VNode;node.text="";node.isComment=true;return node};function createTextVNode(val){return new VNode(undefined,undefined,undefined,String(val))}function cloneVNode(vnode){var cloned=new VNode(vnode.tag,vnode.data,vnode.children,vnode.text,vnode.elm,vnode.context,vnode.componentOptions);cloned.ns=vnode.ns;cloned.isStatic=vnode.isStatic;cloned.key=vnode.key;cloned.isComment=vnode.isComment;cloned.isCloned=true
;return cloned}function cloneVNodes(vnodes){var len=vnodes.length;var res=new Array(len);for(var i=0;i<len;i++){res[i]=cloneVNode(vnodes[i])}return res}var normalizeEvent=cached(function(name){var passive=name.charAt(0)==="&";name=passive?name.slice(1):name;var once$$1=name.charAt(0)==="~";name=once$$1?name.slice(1):name;var capture=name.charAt(0)==="!";name=capture?name.slice(1):name;return{name:name,once:once$$1,capture:capture,passive:passive}});function createFnInvoker(fns){function invoker(){var arguments$1=arguments;var fns=invoker.fns;if(Array.isArray(fns)){for(var i=0;i<fns.length;i++){fns[i].apply(null,arguments$1)}}else{return fns.apply(null,arguments)}}invoker.fns=fns;return invoker}function updateListeners(on,oldOn,add,remove$$1,vm){var name,cur,old,event;for(name in on){cur=on[name];old=oldOn[name];event=normalizeEvent(name);if(isUndef(cur)){"production"!=="production"&&warn('Invalid handler for event "'+event.name+'": got '+String(cur),vm)}else if(isUndef(old)){if(isUndef(cur.fns)){cur=on[name]=createFnInvoker(cur)}add(event.name,cur,event.once,event.capture,event.passive)}else if(cur!==old){old.fns=cur;on[name]=old}}for(name in oldOn){if(isUndef(on[name])){event=normalizeEvent(name);remove$$1(event.name,oldOn[name],event.capture)}}}function mergeVNodeHook(def,hookKey,hook){var invoker;var oldHook=def[hookKey];function wrappedHook(){hook.apply(this,arguments);remove$1(invoker.fns,wrappedHook)}if(isUndef(oldHook)){invoker=createFnInvoker([wrappedHook])}else{if(isDef(oldHook.fns)&&isTrue(oldHook.merged)){invoker=oldHook;invoker.fns.push(wrappedHook)}else{invoker=createFnInvoker([oldHook,wrappedHook])}}invoker.merged=true;def[hookKey]=invoker}function extractPropsFromVNodeData(data,Ctor,tag){var propOptions=Ctor.options.props;if(isUndef(propOptions)){return}var res={};var attrs=data.attrs;var props=data.props;if(isDef(attrs)||isDef(props)){for(var key in propOptions){var altKey=hyphenate(key);checkProp(res,props,key,altKey,true)||checkProp(res,attrs,key,altKey,false)}}return res}function checkProp(res,hash,key,altKey,preserve){if(isDef(hash)){if(hasOwn(hash,key)){res[key]=hash[key];if(!preserve){delete hash[key]}return true}else if(hasOwn(hash,altKey)){res[key]=hash[altKey];if(!preserve){delete hash[altKey]}return true}}return false}function simpleNormalizeChildren(children){for(var i=0;i<children.length;i++){if(Array.isArray(children[i])){return Array.prototype.concat.apply([],children)}}return children}function normalizeChildren(children){return isPrimitive(children)?[createTextVNode(children)]:Array.isArray(children)?normalizeArrayChildren(children):undefined}function isTextNode(node){return isDef(node)&&isDef(node.text)&&isFalse(node.isComment)}function normalizeArrayChildren(children,nestedIndex){var res=[];var i,c,last;for(i=0;i<children.length;i++){c=children[i];if(isUndef(c)||typeof c==="boolean"){continue}last=res[res.length-1];if(Array.isArray(c)){res.push.apply(res,normalizeArrayChildren(c,(nestedIndex||"")+"_"+i))}else if(isPrimitive(c)){if(isTextNode(last)){last.text+=String(c)}else if(c!==""){res.push(createTextVNode(c))}}else{if(isTextNode(c)&&isTextNode(last)){res[res.length-1]=createTextVNode(last.text+c.text)}else{if(isTrue(children._isVList)&&isDef(c.tag)&&isUndef(c.key)&&isDef(nestedIndex)){c.key="__vlist"+nestedIndex+"_"+i+"__"}res.push(c)}}}return res}function ensureCtor(comp,base){return isObject$4(comp)?base.extend(comp):comp}function resolveAsyncComponent(factory,baseCtor,context){if(isTrue(factory.error)&&isDef(factory.errorComp)){return factory.errorComp}if(isDef(factory.resolved)){return factory.resolved}if(isTrue(factory.loading)&&isDef(factory.loadingComp)){return factory.loadingComp}if(isDef(factory.contexts)){factory.contexts.push(context)}else{var contexts=factory.contexts=[context];var sync=true;var forceRender=function forceRender(){for(var i=0,l=contexts.length;i<l;i++){contexts[i].$forceUpdate()}};var resolve=once(function(res){factory.resolved=ensureCtor(res,baseCtor);if(!sync){forceRender()}});var reject=once(function(reason){"production"!=="production"&&warn("Failed to resolve async component: "+String(factory)+(reason?"\nReason: "+reason:""));if(isDef(factory.errorComp)){factory.error=true;forceRender()}});var res=factory(resolve,reject);if(isObject$4(res)){if(typeof res.then==="function"){if(isUndef(factory.resolved)){res.then(resolve,reject)}}else if(isDef(res.component)&&typeof res.component.then==="function"){res.component.then(resolve,reject);if(isDef(res.error)){factory.errorComp=ensureCtor(res.error,baseCtor)}if(isDef(res.loading)){factory.loadingComp=ensureCtor(res.loading,baseCtor);if(res.delay===0){factory.loading=true}else{setTimeout(function(){if(isUndef(factory.resolved)&&isUndef(factory.error)){factory.loading=true;forceRender()}},res.delay||200)}}if(isDef(res.timeout)){setTimeout(function(){if(isUndef(factory.resolved)){reject(null)}},res.timeout)}}}sync=false;return factory.loading?factory.loadingComp:factory.resolved}}function getFirstComponentChild(children){if(Array.isArray(children)){for(var i=0;i<children.length;i++){var c=children[i];if(isDef(c)&&isDef(c.componentOptions)){return c}}}}function initEvents(vm){vm._events=Object.create(null);vm._hasHookEvent=false;var listeners=vm.$options._parentListeners;if(listeners){updateComponentListeners(vm,listeners)}}var target;function add(event,fn,once$$1){if(once$$1){target.$once(event,fn)}else{target.$on(event,fn)}}function remove$1$1(event,fn){target.$off(event,fn)}function updateComponentListeners(vm,listeners,oldListeners){target=vm;updateListeners(listeners,oldListeners||{},add,remove$1$1,vm)}function eventsMixin(Vue){var hookRE=/^hook:/;Vue.prototype.$on=function(event,fn){var this$1=this;var vm=this;if(Array.isArray(event)){for(var i=0,l=event.length;i<l;i++){this$1.$on(event[i],fn)}}else{(vm._events[event]||(vm._events[event]=[])).push(fn);if(hookRE.test(event)){vm._hasHookEvent=true}}return vm};Vue.prototype.$once=function(event,fn){var vm=this;function on(){vm.$off(event,on);fn.apply(vm,arguments)}on.fn=fn;vm.$on(event,on);return vm};Vue.prototype.$off=function(event,fn){var this$1=this;var vm=this;if(!arguments.length){vm._events=Object.create(null);return vm}if(Array.isArray(event)){for(var i$1=0,l=event.length;i$1<l;i$1++){this$1.$off(event[i$1],fn)}return vm}var cbs=vm._events[event];if(!cbs){return vm}if(arguments.length===1){vm._events[event]=null;return vm}var cb;var i=cbs.length;while(i--){cb=cbs[i];if(cb===fn||cb.fn===fn){cbs.splice(i,1);break}}return vm};Vue.prototype.$emit=function(event){var vm=this;var cbs=vm._events[event];if(cbs){cbs=cbs.length>1?toArray$1(cbs):cbs;var args=toArray$1(arguments,1);for(var i=0,l=cbs.length;i<l;i++){cbs[i].apply(vm,args)}}return vm}}function resolveSlots(children,context){var slots={};if(!children){return slots}var defaultSlot=[];for(var i=0,l=children.length;i<l;i++){var child=children[i];if((child.context===context||child.functionalContext===context)&&child.data&&child.data.slot!=null){var name=child.data.slot;var slot=slots[name]||(slots[name]=[]);if(child.tag==="template"){slot.push.apply(slot,child.children)}else{slot.push(child)}}else{defaultSlot.push(child)}}if(!defaultSlot.every(isWhitespace)){slots.default=defaultSlot}return slots}function isWhitespace(node){return node.isComment||node.text===" "}function resolveScopedSlots(fns,res){res=res||{};for(var i=0;i<fns.length;i++){if(Array.isArray(fns[i])){resolveScopedSlots(fns[i],res)}else{res[fns[i].key]=fns[i].fn}}return res}var activeInstance=null;function initLifecycle(vm){var options=vm.$options;var parent=options.parent;if(parent&&!options.abstract){while(parent.$options.abstract&&parent.$parent){parent=parent.$parent}parent.$children.push(vm)}vm.$parent=parent;vm.$root=parent?parent.$root:vm;vm.$children=[];vm.$refs={};vm._watcher=null;vm._inactive=null;vm._directInactive=false;vm._isMounted=false;vm._isDestroyed=false;vm._isBeingDestroyed=false}function lifecycleMixin(Vue){Vue.prototype._update=function(vnode,hydrating){var vm=this;if(vm._isMounted){callHook(vm,"beforeUpdate")}var prevEl=vm.$el;var prevVnode=vm._vnode;var prevActiveInstance=activeInstance;activeInstance=vm;vm._vnode=vnode;if(!prevVnode){vm.$el=vm.__patch__(vm.$el,vnode,hydrating,false,vm.$options._parentElm,vm.$options._refElm)}else{vm.$el=vm.__patch__(prevVnode,vnode)}activeInstance=prevActiveInstance;if(prevEl){prevEl.__vue__=null}if(vm.$el){vm.$el.__vue__=vm}if(vm.$vnode&&vm.$parent&&vm.$vnode===vm.$parent._vnode){vm.$parent.$el=vm.$el}};Vue.prototype.$forceUpdate=function(){var vm=this;if(vm._watcher){vm._watcher.update()}};Vue.prototype.$destroy=function(){var vm=this;if(vm._isBeingDestroyed){return}callHook(vm,"beforeDestroy");vm._isBeingDestroyed=true;var parent=vm.$parent;if(parent&&!parent._isBeingDestroyed&&!vm.$options.abstract){remove$1(parent.$children,vm)}if(vm._watcher){vm._watcher.teardown()}var i=vm._watchers.length;while(i--){vm._watchers[i].teardown()}if(vm._data.__ob__){vm._data.__ob__.vmCount--}vm._isDestroyed=true;vm.__patch__(vm._vnode,null);callHook(vm,"destroyed");vm.$off();if(vm.$el){vm.$el.__vue__=null}vm.$options._parentElm=vm.$options._refElm=null}}function mountComponent(vm,el,hydrating){vm.$el=el;if(!vm.$options.render){vm.$options.render=createEmptyVNode}callHook(vm,"beforeMount");var updateComponent;if("production"!=="production"&&config.performance&&mark){updateComponent=function updateComponent(){var name=vm._name;var id=vm._uid;var startTag="vue-perf-start:"+id;var endTag="vue-perf-end:"+id;mark(startTag);var vnode=vm._render();mark(endTag);measure(name+" render",startTag,endTag);mark(startTag);vm._update(vnode,hydrating);mark(endTag);measure(name+" patch",startTag,endTag)}}else{updateComponent=function updateComponent(){vm._update(vm._render(),hydrating)}}vm._watcher=new Watcher(vm,updateComponent,noop);hydrating=false;if(vm.$vnode==null){vm._isMounted=true;callHook(vm,"mounted")}return vm}function updateChildComponent(vm,propsData,listeners,parentVnode,renderChildren){var hasChildren=!!(renderChildren||vm.$options._renderChildren||parentVnode.data.scopedSlots||vm.$scopedSlots!==emptyObject);vm.$options._parentVnode=parentVnode;vm.$vnode=parentVnode;if(vm._vnode){vm._vnode.parent=parentVnode}vm.$options._renderChildren=renderChildren;if(propsData&&vm.$options.props){observerState.shouldConvert=false;var props=vm._props;var propKeys=vm.$options._propKeys||[];for(var i=0;i<propKeys.length;i++){var key=propKeys[i];props[key]=validateProp(key,vm.$options.props,propsData,vm)}observerState.shouldConvert=true;vm.$options.propsData=propsData}if(listeners){var oldListeners=vm.$options._parentListeners;vm.$options._parentListeners=listeners;updateComponentListeners(vm,listeners,oldListeners)}if(hasChildren){vm.$slots=resolveSlots(renderChildren,parentVnode.context);vm.$forceUpdate()}}function isInInactiveTree(vm){while(vm&&(vm=vm.$parent)){if(vm._inactive){return true}}return false}function activateChildComponent(vm,direct){if(direct){vm._directInactive=false;if(isInInactiveTree(vm)){return}}else if(vm._directInactive){return}if(vm._inactive||vm._inactive===null){vm._inactive=false;for(var i=0;i<vm.$children.length;i++){activateChildComponent(vm.$children[i])}callHook(vm,"activated")}}function deactivateChildComponent(vm,direct){if(direct){vm._directInactive=true;if(isInInactiveTree(vm)){return}}if(!vm._inactive){vm._inactive=true;for(var i=0;i<vm.$children.length;i++){deactivateChildComponent(vm.$children[i])}callHook(vm,"deactivated")}}function callHook(vm,hook){var handlers=vm.$options[hook];if(handlers){for(var i=0,j=handlers.length;i<j;i++){try{handlers[i].call(vm)}catch(e){handleError(e,vm,hook+" hook")}}}if(vm._hasHookEvent){vm.$emit("hook:"+hook)}}var MAX_UPDATE_COUNT=100;var queue=[];var activatedChildren=[];var has$1={};var circular={};var waiting=false;var flushing=false;var index$1$1=0;function resetSchedulerState(){index$1$1=queue.length=activatedChildren.length=0;has$1={};waiting=flushing=false}function flushSchedulerQueue(){flushing=true;var watcher,id;queue.sort(function(a,b){return a.id-b.id});for(index$1$1=0;index$1$1<queue.length;index$1$1++){watcher=queue[index$1$1];id=watcher.id;has$1[id]=null;watcher.run();if("production"!=="production"&&has$1[id]!=null){circular[id]=(circular[id]||0)+1;if(circular[id]>MAX_UPDATE_COUNT){warn("You may have an infinite update loop "+(watcher.user?'in watcher with expression "'+watcher.expression+'"':"in a component render function."),watcher.vm);break}}}var activatedQueue=activatedChildren.slice();var updatedQueue=queue.slice();resetSchedulerState();callActivatedHooks(activatedQueue);callUpdateHooks(updatedQueue);if(devtools&&config.devtools){devtools.emit("flush")}}function callUpdateHooks(queue){var i=queue.length;while(i--){var watcher=queue[i];var vm=watcher.vm;if(vm._watcher===watcher&&vm._isMounted){callHook(vm,"updated")}}}function queueActivatedComponent(vm){vm._inactive=false;activatedChildren.push(vm)}function callActivatedHooks(queue){for(var i=0;i<queue.length;i++){queue[i]._inactive=true;activateChildComponent(queue[i],true)}}function queueWatcher(watcher){var id=watcher.id;if(has$1[id]==null){has$1[id]=true;if(!flushing){queue.push(watcher)}else{var i=queue.length-1;while(i>index$1$1&&queue[i].id>watcher.id){i--}queue.splice(i+1,0,watcher)}if(!waiting){waiting=true;nextTick(flushSchedulerQueue)}}}var uid$2=0;var Watcher=function Watcher(vm,expOrFn,cb,options){this.vm=vm;vm._watchers.push(this);if(options){this.deep=!!options.deep;this.user=!!options.user;this.lazy=!!options.lazy;this.sync=!!options.sync}else{this.deep=this.user=this.lazy=this.sync=false}this.cb=cb;this.id=++uid$2;this.active=true;this.dirty=this.lazy;this.deps=[];this.newDeps=[];this.depIds=new _Set;this.newDepIds=new _Set;this.expression="";if(typeof expOrFn==="function"){this.getter=expOrFn}else{this.getter=parsePath(expOrFn);if(!this.getter){this.getter=function(){};"production"!=="production"&&warn('Failed watching path: "'+expOrFn+'" '+"Watcher only accepts simple dot-delimited paths. "+"For full control, use a function instead.",vm)}}this.value=this.lazy?undefined:this.get()};Watcher.prototype.get=function get$$1(){pushTarget(this);var value;var vm=this.vm;if(this.user){try{value=this.getter.call(vm,vm)}catch(e){handleError(e,vm,'getter for watcher "'+this.expression+'"')}}else{value=this.getter.call(vm,vm)}if(this.deep){traverse(value)}popTarget();this.cleanupDeps();return value};Watcher.prototype.addDep=function addDep(dep){var id=dep.id;if(!this.newDepIds.has(id)){this.newDepIds.add(id);this.newDeps.push(dep);if(!this.depIds.has(id)){dep.addSub(this)}}};Watcher.prototype.cleanupDeps=function cleanupDeps(){var this$1=this;var i=this.deps.length;while(i--){var dep=this$1.deps[i];if(!this$1.newDepIds.has(dep.id)){dep.removeSub(this$1)}}var tmp=this.depIds;this.depIds=this.newDepIds;this.newDepIds=tmp;this.newDepIds.clear();tmp=this.deps;this.deps=this.newDeps;this.newDeps=tmp;this.newDeps.length=0};Watcher.prototype.update=function update(){if(this.lazy){this.dirty=true}else if(this.sync){this.run()}else{queueWatcher(this)}};Watcher.prototype.run=function run(){if(this.active){var value=this.get();if(value!==this.value||isObject$4(value)||this.deep){var oldValue=this.value;this.value=value;if(this.user){try{this.cb.call(this.vm,value,oldValue)}catch(e){handleError(e,this.vm,'callback for watcher "'+this.expression+'"')}}else{this.cb.call(this.vm,value,oldValue)}}}};Watcher.prototype.evaluate=function evaluate(){this.value=this.get();this.dirty=false};Watcher.prototype.depend=function depend(){var this$1=this;var i=this.deps.length;while(i--){this$1.deps[i].depend()}};Watcher.prototype.teardown=function teardown(){var this$1=this;if(this.active){if(!this.vm._isBeingDestroyed){remove$1(this.vm._watchers,this)}var i=this.deps.length;while(i--){this$1.deps[i].removeSub(this$1)}this.active=false}};var seenObjects=new _Set;function traverse(val){seenObjects.clear();_traverse(val,seenObjects)}function _traverse(val,seen){var i,keys;var isA=Array.isArray(val);if(!isA&&!isObject$4(val)||!Object.isExtensible(val)){return}if(val.__ob__){var depId=val.__ob__.dep.id;if(seen.has(depId)){return}seen.add(depId)}if(isA){i=val.length;while(i--){_traverse(val[i],seen)}}else{keys=Object.keys(val);i=keys.length;while(i--){_traverse(val[keys[i]],seen)}}}var sharedPropertyDefinition={enumerable:true,configurable:true,get:noop,set:noop};function proxy(target,sourceKey,key){sharedPropertyDefinition.get=function proxyGetter(){return this[sourceKey][key]};sharedPropertyDefinition.set=function proxySetter(val){this[sourceKey][key]=val};Object.defineProperty(target,key,sharedPropertyDefinition)}function initState(vm){vm._watchers=[];var opts=vm.$options;if(opts.props){initProps(vm,opts.props)}if(opts.methods){initMethods(vm,opts.methods)}if(opts.data){initData(vm)}else{observe(vm._data={},true)}if(opts.computed){initComputed(vm,opts.computed)}if(opts.watch){initWatch(vm,opts.watch)}}function initProps(vm,propsOptions){var propsData=vm.$options.propsData||{};var props=vm._props={};var keys=vm.$options._propKeys=[];var isRoot=!vm.$parent;observerState.shouldConvert=isRoot;var loop=function loop(key){keys.push(key);var value=validateProp(key,propsOptions,propsData,vm);{defineReactive$$1(props,key,value)}if(!(key in vm)){proxy(vm,"_props",key)}};for(var key in propsOptions){loop(key)}observerState.shouldConvert=true}function initData(vm){var data=vm.$options.data;data=vm._data=typeof data==="function"?getData(data,vm):data||{};if(!isPlainObject(data)){data={};"production"!=="production"&&warn("data functions should return an object:\n"+"https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",vm)}var keys=Object.keys(data);var props=vm.$options.props;var i=keys.length;while(i--){if(props&&hasOwn(props,keys[i])){"production"!=="production"&&warn('The data property "'+keys[i]+'" is already declared as a prop. '+"Use prop default value instead.",vm)}else if(!isReserved(keys[i])){proxy(vm,"_data",keys[i])}}observe(data,true)}function getData(data,vm){try{return data.call(vm)}catch(e){handleError(e,vm,"data()");return{}}}var computedWatcherOptions={lazy:true};function initComputed(vm,computed){var watchers=vm._computedWatchers=Object.create(null);for(var key in computed){var userDef=computed[key];var getter=typeof userDef==="function"?userDef:userDef.get;watchers[key]=new Watcher(vm,getter,noop,computedWatcherOptions);if(!(key in vm)){defineComputed(vm,key,userDef)}else{}}}function defineComputed(target,key,userDef){if(typeof userDef==="function"){sharedPropertyDefinition.get=createComputedGetter(key);sharedPropertyDefinition.set=noop}else{sharedPropertyDefinition.get=userDef.get?userDef.cache!==false?createComputedGetter(key):userDef.get:noop;sharedPropertyDefinition.set=userDef.set?userDef.set:noop}Object.defineProperty(target,key,sharedPropertyDefinition)}function createComputedGetter(key){return function computedGetter(){var watcher=this._computedWatchers&&this._computedWatchers[key];if(watcher){if(watcher.dirty){watcher.evaluate()}if(Dep.target){watcher.depend()}return watcher.value}}}function initMethods(vm,methods){var props=vm.$options.props;for(var key in methods){vm[key]=methods[key]==null?noop:bind(methods[key],vm)}}function initWatch(vm,watch){for(var key in watch){var handler=watch[key];if(Array.isArray(handler)){for(var i=0;i<handler.length;i++){createWatcher(vm,key,handler[i])}}else{createWatcher(vm,key,handler)}}}function createWatcher(vm,key,handler){var options;if(isPlainObject(handler)){options=handler;handler=handler.handler}if(typeof handler==="string"){handler=vm[handler]}vm.$watch(key,handler,options)}function stateMixin(Vue){var dataDef={};dataDef.get=function(){return this._data};var propsDef={};propsDef.get=function(){return this._props};Object.defineProperty(Vue.prototype,"$data",dataDef);Object.defineProperty(Vue.prototype,"$props",propsDef);Vue.prototype.$set=set$1;Vue.prototype.$delete=del;Vue.prototype.$watch=function(expOrFn,cb,options){var vm=this;options=options||{};options.user=true;var watcher=new Watcher(vm,expOrFn,cb,options);if(options.immediate){cb.call(vm,watcher.value)}return function unwatchFn(){watcher.teardown()}}}function initProvide(vm){var provide=vm.$options.provide;if(provide){vm._provided=typeof provide==="function"?provide.call(vm):provide}}function initInjections(vm){var result=resolveInject(vm.$options.inject,vm);if(result){Object.keys(result).forEach(function(key){{defineReactive$$1(vm,key,result[key])}})}}function resolveInject(inject,vm){if(inject){var isArray=Array.isArray(inject);var result=Object.create(null);var keys=isArray?inject:hasSymbol?Reflect.ownKeys(inject):Object.keys(inject);for(var i=0;i<keys.length;i++){var key=keys[i];var provideKey=isArray?key:inject[key];var source=vm;while(source){if(source._provided&&provideKey in source._provided){result[key]=source._provided[provideKey];break}source=source.$parent}}return result}}function createFunctionalComponent(Ctor,propsData,data,context,children){var props={};var propOptions=Ctor.options.props;if(isDef(propOptions)){for(var key in propOptions){props[key]=validateProp(key,propOptions,propsData||{})}}else{if(isDef(data.attrs)){mergeProps(props,data.attrs)}if(isDef(data.props)){mergeProps(props,data.props)}}var _context=Object.create(context);var h=function h(a,b,c,d){return createElement(_context,a,b,c,d,true)};var vnode=Ctor.options.render.call(null,h,{data:data,props:props,children:children,parent:context,listeners:data.on||{},injections:resolveInject(Ctor.options.inject,context),slots:function slots(){return resolveSlots(children,context)}});if(vnode instanceof VNode){vnode.functionalContext=context;vnode.functionalOptions=Ctor.options;if(data.slot){(vnode.data||(vnode.data={})).slot=data.slot}}return vnode}function mergeProps(to,from){for(var key in from){to[camelize(key)]=from[key]}}var componentVNodeHooks={init:function init(vnode,hydrating,parentElm,refElm){if(!vnode.componentInstance||vnode.componentInstance._isDestroyed){var child=vnode.componentInstance=createComponentInstanceForVnode(vnode,activeInstance,parentElm,refElm);child.$mount(hydrating?vnode.elm:undefined,hydrating)}else if(vnode.data.keepAlive){var mountedNode=vnode;componentVNodeHooks.prepatch(mountedNode,mountedNode)}},prepatch:function prepatch(oldVnode,vnode){var options=vnode.componentOptions;var child=vnode.componentInstance=oldVnode.componentInstance;updateChildComponent(child,options.propsData,options.listeners,vnode,options.children)},insert:function insert(vnode){var context=vnode.context;var componentInstance=vnode.componentInstance;if(!componentInstance._isMounted){componentInstance._isMounted=true;callHook(componentInstance,"mounted")}if(vnode.data.keepAlive){if(context._isMounted){queueActivatedComponent(componentInstance)}else{activateChildComponent(componentInstance,true)}}},destroy:function destroy(vnode){var componentInstance=vnode.componentInstance;if(!componentInstance._isDestroyed){if(!vnode.data.keepAlive){componentInstance.$destroy()}else{deactivateChildComponent(componentInstance,true)}}}};var hooksToMerge=Object.keys(componentVNodeHooks);function createComponent(Ctor,data,context,children,tag){if(isUndef(Ctor)){return}var baseCtor=context.$options._base;if(isObject$4(Ctor)){Ctor=baseCtor.extend(Ctor)}if(typeof Ctor!=="function"){return}if(isUndef(Ctor.cid)){Ctor=resolveAsyncComponent(Ctor,baseCtor,context);if(Ctor===undefined){return}}resolveConstructorOptions(Ctor);data=data||{};if(isDef(data.model)){transformModel(Ctor.options,data)}var propsData=extractPropsFromVNodeData(data,Ctor,tag);if(isTrue(Ctor.options.functional)){return createFunctionalComponent(Ctor,propsData,data,context,children)}var listeners=data.on;data.on=data.nativeOn;if(isTrue(Ctor.options.abstract)){data={}}mergeHooks(data);var name=Ctor.options.name||tag;var vnode=new VNode("vue-component-"+Ctor.cid+(name?"-"+name:""),data,undefined,undefined,undefined,context,{Ctor:Ctor,propsData:propsData,listeners:listeners,tag:tag,children:children});return vnode}function createComponentInstanceForVnode(vnode,parent,parentElm,refElm){var vnodeComponentOptions=vnode.componentOptions;var options={_isComponent:true,parent:parent,propsData:vnodeComponentOptions.propsData,_componentTag:vnodeComponentOptions.tag,_parentVnode:vnode,_parentListeners:vnodeComponentOptions.listeners,_renderChildren:vnodeComponentOptions.children,_parentElm:parentElm||null,_refElm:refElm||null};var inlineTemplate=vnode.data.inlineTemplate;if(isDef(inlineTemplate)){options.render=inlineTemplate.render;options.staticRenderFns=inlineTemplate.staticRenderFns}return new vnodeComponentOptions.Ctor(options)}function mergeHooks(data){if(!data.hook){data.hook={}}for(var i=0;i<hooksToMerge.length;i++){var key=hooksToMerge[i];var fromParent=data.hook[key];var ours=componentVNodeHooks[key];data.hook[key]=fromParent?mergeHook$1(ours,fromParent):ours}}function mergeHook$1(one,two){return function(a,b,c,d){one(a,b,c,d);two(a,b,c,d)}}function transformModel(options,data){var prop=options.model&&options.model.prop||"value";var event=options.model&&options.model.event||"input";(data.props||(data.props={}))[prop]=data.model.value;var on=data.on||(data.on={});if(isDef(on[event])){on[event]=[data.model.callback].concat(on[event])}else{on[event]=data.model.callback}}var SIMPLE_NORMALIZE=1;var ALWAYS_NORMALIZE=2;function createElement(context,tag,data,children,normalizationType,alwaysNormalize){if(Array.isArray(data)||isPrimitive(data)){normalizationType=children;children=data;data=undefined}if(isTrue(alwaysNormalize)){normalizationType=ALWAYS_NORMALIZE}return _createElement(context,tag,data,children,normalizationType)}function _createElement(context,tag,data,children,normalizationType){if(isDef(data)&&isDef(data.__ob__)){"production"!=="production"&&warn("Avoid using observed data object as vnode data: "+JSON.stringify(data)+"\n"+"Always create fresh vnode data objects in each render!",context);return createEmptyVNode()}if(!tag){return createEmptyVNode()}if(Array.isArray(children)&&typeof children[0]==="function"){data=data||{};data.scopedSlots={default:children[0]};children.length=0}if(normalizationType===ALWAYS_NORMALIZE){children=normalizeChildren(children)}else if(normalizationType===SIMPLE_NORMALIZE){children=simpleNormalizeChildren(children)}var vnode,ns;if(typeof tag==="string"){var Ctor;ns=config.getTagNamespace(tag);if(config.isReservedTag(tag)){vnode=new VNode(config.parsePlatformTagName(tag),data,children,undefined,undefined,context)}else if(isDef(Ctor=resolveAsset(context.$options,"components",tag))){vnode=createComponent(Ctor,data,context,children,tag)}else{vnode=new VNode(tag,data,children,undefined,undefined,context)}}else{vnode=createComponent(tag,data,context,children)}if(isDef(vnode)){if(ns){applyNS(vnode,ns)}return vnode}else{return createEmptyVNode()}}function applyNS(vnode,ns){vnode.ns=ns;if(vnode.tag==="foreignObject"){return}if(isDef(vnode.children)){for(var i=0,l=vnode.children.length;i<l;i++){var child=vnode.children[i];if(isDef(child.tag)&&isUndef(child.ns)){applyNS(child,ns)}}}}function renderList(val,render){var ret,i,l,keys,key;if(Array.isArray(val)||typeof val==="string"){ret=new Array(val.length);for(i=0,l=val.length;i<l;i++){ret[i]=render(val[i],i)}}else if(typeof val==="number"){ret=new Array(val);for(i=0;i<val;i++){ret[i]=render(i+1,i)}}else if(isObject$4(val)){keys=Object.keys(val);ret=new Array(keys.length);for(i=0,l=keys.length;i<l;i++){key=keys[i];ret[i]=render(val[key],key,i)}}if(isDef(ret)){ret._isVList=true}return ret}function renderSlot(name,fallback,props,bindObject){var scopedSlotFn=this.$scopedSlots[name];if(scopedSlotFn){props=props||{};if(bindObject){extend$1(props,bindObject)}return scopedSlotFn(props)||fallback}else{var slotNodes=this.$slots[name];if(slotNodes&&"production"!=="production"){slotNodes._rendered&&warn('Duplicate presence of slot "'+name+'" found in the same render tree '+"- this will likely cause render errors.",this);slotNodes._rendered=true}return slotNodes||fallback}}function resolveFilter(id){return resolveAsset(this.$options,"filters",id,true)||identity}function checkKeyCodes(eventKeyCode,key,builtInAlias){var keyCodes=config.keyCodes[key]||builtInAlias;if(Array.isArray(keyCodes)){return keyCodes.indexOf(eventKeyCode)===-1}else{return keyCodes!==eventKeyCode}}function bindObjectProps(data,tag,value,asProp){if(value){if(!isObject$4(value)){"production"!=="production"&&warn("v-bind without argument expects an Object or Array value",this)}else{if(Array.isArray(value)){value=toObject$1(value)}var hash;for(var key in value){if(key==="class"||key==="style"){hash=data}else{var type=data.attrs&&data.attrs.type;hash=asProp||config.mustUseProp(tag,type,key)?data.domProps||(data.domProps={}):data.attrs||(data.attrs={})}if(!(key in hash)){hash[key]=value[key]}}}}return data}function renderStatic(index,isInFor){var tree=this._staticTrees[index];if(tree&&!isInFor){return Array.isArray(tree)?cloneVNodes(tree):cloneVNode(tree)}tree=this._staticTrees[index]=this.$options.staticRenderFns[index].call(this._renderProxy);markStatic(tree,"__static__"+index,false);return tree}function markOnce(tree,index,key){markStatic(tree,"__once__"+index+(key?"_"+key:""),true);return tree}function markStatic(tree,key,isOnce){if(Array.isArray(tree)){for(var i=0;i<tree.length;i++){if(tree[i]&&typeof tree[i]!=="string"){markStaticNode(tree[i],key+"_"+i,isOnce)}}}else{markStaticNode(tree,key,isOnce)}}function markStaticNode(node,key,isOnce){node.isStatic=true;node.key=key;node.isOnce=isOnce}function initRender(vm){vm._vnode=null;vm._staticTrees=null;var parentVnode=vm.$vnode=vm.$options._parentVnode;var renderContext=parentVnode&&parentVnode.context;vm.$slots=resolveSlots(vm.$options._renderChildren,renderContext);vm.$scopedSlots=emptyObject;vm._c=function(a,b,c,d){return createElement(vm,a,b,c,d,false)};vm.$createElement=function(a,b,c,d){return createElement(vm,a,b,c,d,true)}}function renderMixin(Vue){Vue.prototype.$nextTick=function(fn){return nextTick(fn,this)};Vue.prototype._render=function(){var vm=this;var ref=vm.$options;var render=ref.render;var staticRenderFns=ref.staticRenderFns;var _parentVnode=ref._parentVnode;if(vm._isMounted){for(var key in vm.$slots){vm.$slots[key]=cloneVNodes(vm.$slots[key])}}vm.$scopedSlots=_parentVnode&&_parentVnode.data.scopedSlots||emptyObject;if(staticRenderFns&&!vm._staticTrees){vm._staticTrees=[]}vm.$vnode=_parentVnode;var vnode;try{vnode=render.call(vm._renderProxy,vm.$createElement)}catch(e){handleError(e,vm,"render function");{vnode=vm._vnode}}if(!(vnode instanceof VNode)){if("production"!=="production"&&Array.isArray(vnode)){warn("Multiple root nodes returned from render function. Render function "+"should return a single root node.",vm)}vnode=createEmptyVNode()}vnode.parent=_parentVnode;return vnode};Vue.prototype._o=markOnce;Vue.prototype._n=toNumber$1$1;Vue.prototype._s=toString$1;Vue.prototype._l=renderList;Vue.prototype._t=renderSlot;Vue.prototype._q=looseEqual;Vue.prototype._i=looseIndexOf;Vue.prototype._m=renderStatic;Vue.prototype._f=resolveFilter;Vue.prototype._k=checkKeyCodes;Vue.prototype._b=bindObjectProps;Vue.prototype._v=createTextVNode;Vue.prototype._e=createEmptyVNode;Vue.prototype._u=resolveScopedSlots}var uid$1$1=0;function initMixin(Vue){Vue.prototype._init=function(options){var vm=this;vm._uid=uid$1$1++;var startTag,endTag;if("production"!=="production"&&config.performance&&mark){startTag="vue-perf-init:"+vm._uid;endTag="vue-perf-end:"+vm._uid;mark(startTag)}vm._isVue=true;if(options&&options._isComponent){initInternalComponent(vm,options)}else{vm.$options=mergeOptions(resolveConstructorOptions(vm.constructor),options||{},vm)}{vm._renderProxy=vm}vm._self=vm;initLifecycle(vm);initEvents(vm);initRender(vm);callHook(vm,"beforeCreate");initInjections(vm);initState(vm);initProvide(vm);callHook(vm,"created");if("production"!=="production"&&config.performance&&mark){vm._name=formatComponentName(vm,false);mark(endTag)
;measure(vm._name+" init",startTag,endTag)}if(vm.$options.el){vm.$mount(vm.$options.el)}}}function initInternalComponent(vm,options){var opts=vm.$options=Object.create(vm.constructor.options);opts.parent=options.parent;opts.propsData=options.propsData;opts._parentVnode=options._parentVnode;opts._parentListeners=options._parentListeners;opts._renderChildren=options._renderChildren;opts._componentTag=options._componentTag;opts._parentElm=options._parentElm;opts._refElm=options._refElm;if(options.render){opts.render=options.render;opts.staticRenderFns=options.staticRenderFns}}function resolveConstructorOptions(Ctor){var options=Ctor.options;if(Ctor.super){var superOptions=resolveConstructorOptions(Ctor.super);var cachedSuperOptions=Ctor.superOptions;if(superOptions!==cachedSuperOptions){Ctor.superOptions=superOptions;var modifiedOptions=resolveModifiedOptions(Ctor);if(modifiedOptions){extend$1(Ctor.extendOptions,modifiedOptions)}options=Ctor.options=mergeOptions(superOptions,Ctor.extendOptions);if(options.name){options.components[options.name]=Ctor}}}return options}function resolveModifiedOptions(Ctor){var modified;var latest=Ctor.options;var extended=Ctor.extendOptions;var sealed=Ctor.sealedOptions;for(var key in latest){if(latest[key]!==sealed[key]){if(!modified){modified={}}modified[key]=dedupe(latest[key],extended[key],sealed[key])}}return modified}function dedupe(latest,extended,sealed){if(Array.isArray(latest)){var res=[];sealed=Array.isArray(sealed)?sealed:[sealed];extended=Array.isArray(extended)?extended:[extended];for(var i=0;i<latest.length;i++){if(extended.indexOf(latest[i])>=0||sealed.indexOf(latest[i])<0){res.push(latest[i])}}return res}else{return latest}}function Vue$3(options){if("production"!=="production"&&!(this instanceof Vue$3)){warn("Vue is a constructor and should be called with the `new` keyword")}this._init(options)}initMixin(Vue$3);stateMixin(Vue$3);eventsMixin(Vue$3);lifecycleMixin(Vue$3);renderMixin(Vue$3);function initUse(Vue){Vue.use=function(plugin){if(plugin.installed){return this}var args=toArray$1(arguments,1);args.unshift(this);if(typeof plugin.install==="function"){plugin.install.apply(plugin,args)}else if(typeof plugin==="function"){plugin.apply(null,args)}plugin.installed=true;return this}}function initMixin$1(Vue){Vue.mixin=function(mixin){this.options=mergeOptions(this.options,mixin);return this}}function initExtend(Vue){Vue.cid=0;var cid=1;Vue.extend=function(extendOptions){extendOptions=extendOptions||{};var Super=this;var SuperId=Super.cid;var cachedCtors=extendOptions._Ctor||(extendOptions._Ctor={});if(cachedCtors[SuperId]){return cachedCtors[SuperId]}var name=extendOptions.name||Super.options.name;var Sub=function VueComponent(options){this._init(options)};Sub.prototype=Object.create(Super.prototype);Sub.prototype.constructor=Sub;Sub.cid=cid++;Sub.options=mergeOptions(Super.options,extendOptions);Sub["super"]=Super;if(Sub.options.props){initProps$1(Sub)}if(Sub.options.computed){initComputed$1(Sub)}Sub.extend=Super.extend;Sub.mixin=Super.mixin;Sub.use=Super.use;ASSET_TYPES.forEach(function(type){Sub[type]=Super[type]});if(name){Sub.options.components[name]=Sub}Sub.superOptions=Super.options;Sub.extendOptions=extendOptions;Sub.sealedOptions=extend$1({},Sub.options);cachedCtors[SuperId]=Sub;return Sub}}function initProps$1(Comp){var props=Comp.options.props;for(var key in props){proxy(Comp.prototype,"_props",key)}}function initComputed$1(Comp){var computed=Comp.options.computed;for(var key in computed){defineComputed(Comp.prototype,key,computed[key])}}function initAssetRegisters(Vue){ASSET_TYPES.forEach(function(type){Vue[type]=function(id,definition){if(!definition){return this.options[type+"s"][id]}else{if(type==="component"&&isPlainObject(definition)){definition.name=definition.name||id;definition=this.options._base.extend(definition)}if(type==="directive"&&typeof definition==="function"){definition={bind:definition,update:definition}}this.options[type+"s"][id]=definition;return definition}}})}var patternTypes=[String,RegExp];function getComponentName(opts){return opts&&(opts.Ctor.options.name||opts.tag)}function matches(pattern,name){if(typeof pattern==="string"){return pattern.split(",").indexOf(name)>-1}else if(isRegExp(pattern)){return pattern.test(name)}return false}function pruneCache(cache,current,filter){for(var key in cache){var cachedNode=cache[key];if(cachedNode){var name=getComponentName(cachedNode.componentOptions);if(name&&!filter(name)){if(cachedNode!==current){pruneCacheEntry(cachedNode)}cache[key]=null}}}}function pruneCacheEntry(vnode){if(vnode){vnode.componentInstance.$destroy()}}var KeepAlive={name:"keep-alive",abstract:true,props:{include:patternTypes,exclude:patternTypes},created:function created(){this.cache=Object.create(null)},destroyed:function destroyed(){var this$1=this;for(var key in this$1.cache){pruneCacheEntry(this$1.cache[key])}},watch:{include:function include(val){pruneCache(this.cache,this._vnode,function(name){return matches(val,name)})},exclude:function exclude(val){pruneCache(this.cache,this._vnode,function(name){return!matches(val,name)})}},render:function render(){var vnode=getFirstComponentChild(this.$slots.default);var componentOptions=vnode&&vnode.componentOptions;if(componentOptions){var name=getComponentName(componentOptions);if(name&&(this.include&&!matches(this.include,name)||this.exclude&&matches(this.exclude,name))){return vnode}var key=vnode.key==null?componentOptions.Ctor.cid+(componentOptions.tag?"::"+componentOptions.tag:""):vnode.key;if(this.cache[key]){vnode.componentInstance=this.cache[key].componentInstance}else{this.cache[key]=vnode}vnode.data.keepAlive=true}return vnode}};var builtInComponents={KeepAlive:KeepAlive};function initGlobalAPI(Vue){var configDef={};configDef.get=function(){return config};Object.defineProperty(Vue,"config",configDef);Vue.util={warn:warn,extend:extend$1,mergeOptions:mergeOptions,defineReactive:defineReactive$$1};Vue.set=set$1;Vue.delete=del;Vue.nextTick=nextTick;Vue.options=Object.create(null);ASSET_TYPES.forEach(function(type){Vue.options[type+"s"]=Object.create(null)});Vue.options._base=Vue;extend$1(Vue.options.components,builtInComponents);initUse(Vue);initMixin$1(Vue);initExtend(Vue);initAssetRegisters(Vue)}initGlobalAPI(Vue$3);Object.defineProperty(Vue$3.prototype,"$isServer",{get:isServerRendering});Object.defineProperty(Vue$3.prototype,"$ssrContext",{get:function get$$1(){return this.$vnode.ssrContext}});Vue$3.version="2.3.3";var isReservedAttr=makeMap("style,class");var acceptValue=makeMap("input,textarea,option,select");var mustUseProp=function mustUseProp(tag,type,attr){return attr==="value"&&acceptValue(tag)&&type!=="button"||attr==="selected"&&tag==="option"||attr==="checked"&&tag==="input"||attr==="muted"&&tag==="video"};var isEnumeratedAttr=makeMap("contenteditable,draggable,spellcheck");var isBooleanAttr=makeMap("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,"+"default,defaultchecked,defaultmuted,defaultselected,defer,disabled,"+"enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,"+"muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,"+"required,reversed,scoped,seamless,selected,sortable,translate,"+"truespeed,typemustmatch,visible");var xlinkNS="http://www.w3.org/1999/xlink";var isXlink=function isXlink(name){return name.charAt(5)===":"&&name.slice(0,5)==="xlink"};var getXlinkProp=function getXlinkProp(name){return isXlink(name)?name.slice(6,name.length):""};var isFalsyAttrValue=function isFalsyAttrValue(val){return val==null||val===false};function genClassForVnode(vnode){var data=vnode.data;var parentNode=vnode;var childNode=vnode;while(isDef(childNode.componentInstance)){childNode=childNode.componentInstance._vnode;if(childNode.data){data=mergeClassData(childNode.data,data)}}while(isDef(parentNode=parentNode.parent)){if(parentNode.data){data=mergeClassData(data,parentNode.data)}}return genClassFromData(data)}function mergeClassData(child,parent){return{staticClass:concat(child.staticClass,parent.staticClass),class:isDef(child.class)?[child.class,parent.class]:parent.class}}function genClassFromData(data){var dynamicClass=data.class;var staticClass=data.staticClass;if(isDef(staticClass)||isDef(dynamicClass)){return concat(staticClass,stringifyClass(dynamicClass))}return""}function concat(a,b){return a?b?a+" "+b:a:b||""}function stringifyClass(value){if(isUndef(value)){return""}if(typeof value==="string"){return value}var res="";if(Array.isArray(value)){var stringified;for(var i=0,l=value.length;i<l;i++){if(isDef(value[i])){if(isDef(stringified=stringifyClass(value[i]))&&stringified!==""){res+=stringified+" "}}}return res.slice(0,-1)}if(isObject$4(value)){for(var key in value){if(value[key]){res+=key+" "}}return res.slice(0,-1)}return res}var namespaceMap={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};var isHTMLTag=makeMap("html,body,base,head,link,meta,style,title,"+"address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,"+"div,dd,dl,dt,figcaption,figure,hr,img,li,main,ol,p,pre,ul,"+"a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,"+"s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,"+"embed,object,param,source,canvas,script,noscript,del,ins,"+"caption,col,colgroup,table,thead,tbody,td,th,tr,"+"button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,"+"output,progress,select,textarea,"+"details,dialog,menu,menuitem,summary,"+"content,element,shadow,template");var isSVG=makeMap("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,"+"foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,"+"polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",true);var isReservedTag=function isReservedTag(tag){return isHTMLTag(tag)||isSVG(tag)};function getTagNamespace(tag){if(isSVG(tag)){return"svg"}if(tag==="math"){return"math"}}var unknownElementCache=Object.create(null);function isUnknownElement(tag){if(!inBrowser){return true}if(isReservedTag(tag)){return false}tag=tag.toLowerCase();if(unknownElementCache[tag]!=null){return unknownElementCache[tag]}var el=document.createElement(tag);if(tag.indexOf("-")>-1){return unknownElementCache[tag]=el.constructor===window.HTMLUnknownElement||el.constructor===window.HTMLElement}else{return unknownElementCache[tag]=/HTMLUnknownElement/.test(el.toString())}}function query(el){if(typeof el==="string"){var selected=document.querySelector(el);if(!selected){"production"!=="production"&&warn("Cannot find element: "+el);return document.createElement("div")}return selected}else{return el}}function createElement$1(tagName,vnode){var elm=document.createElement(tagName);if(tagName!=="select"){return elm}if(vnode.data&&vnode.data.attrs&&vnode.data.attrs.multiple!==undefined){elm.setAttribute("multiple","multiple")}return elm}function createElementNS(namespace,tagName){return document.createElementNS(namespaceMap[namespace],tagName)}function createTextNode(text){return document.createTextNode(text)}function createComment(text){return document.createComment(text)}function insertBefore(parentNode,newNode,referenceNode){parentNode.insertBefore(newNode,referenceNode)}function removeChild(node,child){node.removeChild(child)}function appendChild(node,child){node.appendChild(child)}function parentNode(node){return node.parentNode}function nextSibling(node){return node.nextSibling}function tagName(node){return node.tagName}function setTextContent(node,text){node.textContent=text}function setAttribute(node,key,val){node.setAttribute(key,val)}var nodeOps=Object.freeze({createElement:createElement$1,createElementNS:createElementNS,createTextNode:createTextNode,createComment:createComment,insertBefore:insertBefore,removeChild:removeChild,appendChild:appendChild,parentNode:parentNode,nextSibling:nextSibling,tagName:tagName,setTextContent:setTextContent,setAttribute:setAttribute});var ref={create:function create(_,vnode){registerRef(vnode)},update:function update(oldVnode,vnode){if(oldVnode.data.ref!==vnode.data.ref){registerRef(oldVnode,true);registerRef(vnode)}},destroy:function destroy(vnode){registerRef(vnode,true)}};function registerRef(vnode,isRemoval){var key=vnode.data.ref;if(!key){return}var vm=vnode.context;var ref=vnode.componentInstance||vnode.elm;var refs=vm.$refs;if(isRemoval){if(Array.isArray(refs[key])){remove$1(refs[key],ref)}else if(refs[key]===ref){refs[key]=undefined}}else{if(vnode.data.refInFor){if(Array.isArray(refs[key])&&refs[key].indexOf(ref)<0){refs[key].push(ref)}else{refs[key]=[ref]}}else{refs[key]=ref}}}var emptyNode=new VNode("",{},[]);var hooks=["create","activate","update","remove","destroy"];function sameVnode(a,b){return a.key===b.key&&a.tag===b.tag&&a.isComment===b.isComment&&isDef(a.data)===isDef(b.data)&&sameInputType(a,b)}function sameInputType(a,b){if(a.tag!=="input"){return true}var i;var typeA=isDef(i=a.data)&&isDef(i=i.attrs)&&i.type;var typeB=isDef(i=b.data)&&isDef(i=i.attrs)&&i.type;return typeA===typeB}function createKeyToOldIdx(children,beginIdx,endIdx){var i,key;var map={};for(i=beginIdx;i<=endIdx;++i){key=children[i].key;if(isDef(key)){map[key]=i}}return map}function createPatchFunction(backend){var i,j;var cbs={};var modules=backend.modules;var nodeOps=backend.nodeOps;for(i=0;i<hooks.length;++i){cbs[hooks[i]]=[];for(j=0;j<modules.length;++j){if(isDef(modules[j][hooks[i]])){cbs[hooks[i]].push(modules[j][hooks[i]])}}}function emptyNodeAt(elm){return new VNode(nodeOps.tagName(elm).toLowerCase(),{},[],undefined,elm)}function createRmCb(childElm,listeners){function remove$$1(){if(--remove$$1.listeners===0){removeNode(childElm)}}remove$$1.listeners=listeners;return remove$$1}function removeNode(el){var parent=nodeOps.parentNode(el);if(isDef(parent)){nodeOps.removeChild(parent,el)}}var inPre=0;function createElm(vnode,insertedVnodeQueue,parentElm,refElm,nested){vnode.isRootInsert=!nested;if(createComponent(vnode,insertedVnodeQueue,parentElm,refElm)){return}var data=vnode.data;var children=vnode.children;var tag=vnode.tag;if(isDef(tag)){vnode.elm=vnode.ns?nodeOps.createElementNS(vnode.ns,tag):nodeOps.createElement(tag,vnode);setScope(vnode);{createChildren(vnode,children,insertedVnodeQueue);if(isDef(data)){invokeCreateHooks(vnode,insertedVnodeQueue)}insert(parentElm,vnode.elm,refElm)}if("production"!=="production"&&data&&data.pre){inPre--}}else if(isTrue(vnode.isComment)){vnode.elm=nodeOps.createComment(vnode.text);insert(parentElm,vnode.elm,refElm)}else{vnode.elm=nodeOps.createTextNode(vnode.text);insert(parentElm,vnode.elm,refElm)}}function createComponent(vnode,insertedVnodeQueue,parentElm,refElm){var i=vnode.data;if(isDef(i)){var isReactivated=isDef(vnode.componentInstance)&&i.keepAlive;if(isDef(i=i.hook)&&isDef(i=i.init)){i(vnode,false,parentElm,refElm)}if(isDef(vnode.componentInstance)){initComponent(vnode,insertedVnodeQueue);if(isTrue(isReactivated)){reactivateComponent(vnode,insertedVnodeQueue,parentElm,refElm)}return true}}}function initComponent(vnode,insertedVnodeQueue){if(isDef(vnode.data.pendingInsert)){insertedVnodeQueue.push.apply(insertedVnodeQueue,vnode.data.pendingInsert)}vnode.elm=vnode.componentInstance.$el;if(isPatchable(vnode)){invokeCreateHooks(vnode,insertedVnodeQueue);setScope(vnode)}else{registerRef(vnode);insertedVnodeQueue.push(vnode)}}function reactivateComponent(vnode,insertedVnodeQueue,parentElm,refElm){var i;var innerNode=vnode;while(innerNode.componentInstance){innerNode=innerNode.componentInstance._vnode;if(isDef(i=innerNode.data)&&isDef(i=i.transition)){for(i=0;i<cbs.activate.length;++i){cbs.activate[i](emptyNode,innerNode)}insertedVnodeQueue.push(innerNode);break}}insert(parentElm,vnode.elm,refElm)}function insert(parent,elm,ref){if(isDef(parent)){if(isDef(ref)){if(ref.parentNode===parent){nodeOps.insertBefore(parent,elm,ref)}}else{nodeOps.appendChild(parent,elm)}}}function createChildren(vnode,children,insertedVnodeQueue){if(Array.isArray(children)){for(var i=0;i<children.length;++i){createElm(children[i],insertedVnodeQueue,vnode.elm,null,true)}}else if(isPrimitive(vnode.text)){nodeOps.appendChild(vnode.elm,nodeOps.createTextNode(vnode.text))}}function isPatchable(vnode){while(vnode.componentInstance){vnode=vnode.componentInstance._vnode}return isDef(vnode.tag)}function invokeCreateHooks(vnode,insertedVnodeQueue){for(var i$1=0;i$1<cbs.create.length;++i$1){cbs.create[i$1](emptyNode,vnode)}i=vnode.data.hook;if(isDef(i)){if(isDef(i.create)){i.create(emptyNode,vnode)}if(isDef(i.insert)){insertedVnodeQueue.push(vnode)}}}function setScope(vnode){var i;var ancestor=vnode;while(ancestor){if(isDef(i=ancestor.context)&&isDef(i=i.$options._scopeId)){nodeOps.setAttribute(vnode.elm,i,"")}ancestor=ancestor.parent}if(isDef(i=activeInstance)&&i!==vnode.context&&isDef(i=i.$options._scopeId)){nodeOps.setAttribute(vnode.elm,i,"")}}function addVnodes(parentElm,refElm,vnodes,startIdx,endIdx,insertedVnodeQueue){for(;startIdx<=endIdx;++startIdx){createElm(vnodes[startIdx],insertedVnodeQueue,parentElm,refElm)}}function invokeDestroyHook(vnode){var i,j;var data=vnode.data;if(isDef(data)){if(isDef(i=data.hook)&&isDef(i=i.destroy)){i(vnode)}for(i=0;i<cbs.destroy.length;++i){cbs.destroy[i](vnode)}}if(isDef(i=vnode.children)){for(j=0;j<vnode.children.length;++j){invokeDestroyHook(vnode.children[j])}}}function removeVnodes(parentElm,vnodes,startIdx,endIdx){for(;startIdx<=endIdx;++startIdx){var ch=vnodes[startIdx];if(isDef(ch)){if(isDef(ch.tag)){removeAndInvokeRemoveHook(ch);invokeDestroyHook(ch)}else{removeNode(ch.elm)}}}}function removeAndInvokeRemoveHook(vnode,rm){if(isDef(rm)||isDef(vnode.data)){var i;var listeners=cbs.remove.length+1;if(isDef(rm)){rm.listeners+=listeners}else{rm=createRmCb(vnode.elm,listeners)}if(isDef(i=vnode.componentInstance)&&isDef(i=i._vnode)&&isDef(i.data)){removeAndInvokeRemoveHook(i,rm)}for(i=0;i<cbs.remove.length;++i){cbs.remove[i](vnode,rm)}if(isDef(i=vnode.data.hook)&&isDef(i=i.remove)){i(vnode,rm)}else{rm()}}else{removeNode(vnode.elm)}}function updateChildren(parentElm,oldCh,newCh,insertedVnodeQueue,removeOnly){var oldStartIdx=0;var newStartIdx=0;var oldEndIdx=oldCh.length-1;var oldStartVnode=oldCh[0];var oldEndVnode=oldCh[oldEndIdx];var newEndIdx=newCh.length-1;var newStartVnode=newCh[0];var newEndVnode=newCh[newEndIdx];var oldKeyToIdx,idxInOld,elmToMove,refElm;var canMove=!removeOnly;while(oldStartIdx<=oldEndIdx&&newStartIdx<=newEndIdx){if(isUndef(oldStartVnode)){oldStartVnode=oldCh[++oldStartIdx]}else if(isUndef(oldEndVnode)){oldEndVnode=oldCh[--oldEndIdx]}else if(sameVnode(oldStartVnode,newStartVnode)){patchVnode(oldStartVnode,newStartVnode,insertedVnodeQueue);oldStartVnode=oldCh[++oldStartIdx];newStartVnode=newCh[++newStartIdx]}else if(sameVnode(oldEndVnode,newEndVnode)){patchVnode(oldEndVnode,newEndVnode,insertedVnodeQueue);oldEndVnode=oldCh[--oldEndIdx];newEndVnode=newCh[--newEndIdx]}else if(sameVnode(oldStartVnode,newEndVnode)){patchVnode(oldStartVnode,newEndVnode,insertedVnodeQueue);canMove&&nodeOps.insertBefore(parentElm,oldStartVnode.elm,nodeOps.nextSibling(oldEndVnode.elm));oldStartVnode=oldCh[++oldStartIdx];newEndVnode=newCh[--newEndIdx]}else if(sameVnode(oldEndVnode,newStartVnode)){patchVnode(oldEndVnode,newStartVnode,insertedVnodeQueue);canMove&&nodeOps.insertBefore(parentElm,oldEndVnode.elm,oldStartVnode.elm);oldEndVnode=oldCh[--oldEndIdx];newStartVnode=newCh[++newStartIdx]}else{if(isUndef(oldKeyToIdx)){oldKeyToIdx=createKeyToOldIdx(oldCh,oldStartIdx,oldEndIdx)}idxInOld=isDef(newStartVnode.key)?oldKeyToIdx[newStartVnode.key]:null;if(isUndef(idxInOld)){createElm(newStartVnode,insertedVnodeQueue,parentElm,oldStartVnode.elm);newStartVnode=newCh[++newStartIdx]}else{elmToMove=oldCh[idxInOld];if("production"!=="production"&&!elmToMove){warn("It seems there are duplicate keys that is causing an update error. "+"Make sure each v-for item has a unique key.")}if(sameVnode(elmToMove,newStartVnode)){patchVnode(elmToMove,newStartVnode,insertedVnodeQueue);oldCh[idxInOld]=undefined;canMove&&nodeOps.insertBefore(parentElm,newStartVnode.elm,oldStartVnode.elm);newStartVnode=newCh[++newStartIdx]}else{createElm(newStartVnode,insertedVnodeQueue,parentElm,oldStartVnode.elm);newStartVnode=newCh[++newStartIdx]}}}}if(oldStartIdx>oldEndIdx){refElm=isUndef(newCh[newEndIdx+1])?null:newCh[newEndIdx+1].elm;addVnodes(parentElm,refElm,newCh,newStartIdx,newEndIdx,insertedVnodeQueue)}else if(newStartIdx>newEndIdx){removeVnodes(parentElm,oldCh,oldStartIdx,oldEndIdx)}}function patchVnode(oldVnode,vnode,insertedVnodeQueue,removeOnly){if(oldVnode===vnode){return}if(isTrue(vnode.isStatic)&&isTrue(oldVnode.isStatic)&&vnode.key===oldVnode.key&&(isTrue(vnode.isCloned)||isTrue(vnode.isOnce))){vnode.elm=oldVnode.elm;vnode.componentInstance=oldVnode.componentInstance;return}var i;var data=vnode.data;if(isDef(data)&&isDef(i=data.hook)&&isDef(i=i.prepatch)){i(oldVnode,vnode)}var elm=vnode.elm=oldVnode.elm;var oldCh=oldVnode.children;var ch=vnode.children;if(isDef(data)&&isPatchable(vnode)){for(i=0;i<cbs.update.length;++i){cbs.update[i](oldVnode,vnode)}if(isDef(i=data.hook)&&isDef(i=i.update)){i(oldVnode,vnode)}}if(isUndef(vnode.text)){if(isDef(oldCh)&&isDef(ch)){if(oldCh!==ch){updateChildren(elm,oldCh,ch,insertedVnodeQueue,removeOnly)}}else if(isDef(ch)){if(isDef(oldVnode.text)){nodeOps.setTextContent(elm,"")}addVnodes(elm,null,ch,0,ch.length-1,insertedVnodeQueue)}else if(isDef(oldCh)){removeVnodes(elm,oldCh,0,oldCh.length-1)}else if(isDef(oldVnode.text)){nodeOps.setTextContent(elm,"")}}else if(oldVnode.text!==vnode.text){nodeOps.setTextContent(elm,vnode.text)}if(isDef(data)){if(isDef(i=data.hook)&&isDef(i=i.postpatch)){i(oldVnode,vnode)}}}function invokeInsertHook(vnode,queue,initial){if(isTrue(initial)&&isDef(vnode.parent)){vnode.parent.data.pendingInsert=queue}else{for(var i=0;i<queue.length;++i){queue[i].data.hook.insert(queue[i])}}}var bailed=false;var isRenderedModule=makeMap("attrs,style,class,staticClass,staticStyle,key");function hydrate(elm,vnode,insertedVnodeQueue){vnode.elm=elm;var tag=vnode.tag;var data=vnode.data;var children=vnode.children;if(isDef(data)){if(isDef(i=data.hook)&&isDef(i=i.init)){i(vnode,true)}if(isDef(i=vnode.componentInstance)){initComponent(vnode,insertedVnodeQueue);return true}}if(isDef(tag)){if(isDef(children)){if(!elm.hasChildNodes()){createChildren(vnode,children,insertedVnodeQueue)}else{var childrenMatch=true;var childNode=elm.firstChild;for(var i$1=0;i$1<children.length;i$1++){if(!childNode||!hydrate(childNode,children[i$1],insertedVnodeQueue)){childrenMatch=false;break}childNode=childNode.nextSibling}if(!childrenMatch||childNode){if("production"!=="production"&&typeof console!=="undefined"&&!bailed){bailed=true;console.warn("Parent: ",elm);console.warn("Mismatching childNodes vs. VNodes: ",elm.childNodes,children)}return false}}}if(isDef(data)){for(var key in data){if(!isRenderedModule(key)){invokeCreateHooks(vnode,insertedVnodeQueue);break}}}}else if(elm.data!==vnode.text){elm.data=vnode.text}return true}return function patch(oldVnode,vnode,hydrating,removeOnly,parentElm,refElm){if(isUndef(vnode)){if(isDef(oldVnode)){invokeDestroyHook(oldVnode)}return}var isInitialPatch=false;var insertedVnodeQueue=[];if(isUndef(oldVnode)){isInitialPatch=true;createElm(vnode,insertedVnodeQueue,parentElm,refElm)}else{var isRealElement=isDef(oldVnode.nodeType);if(!isRealElement&&sameVnode(oldVnode,vnode)){patchVnode(oldVnode,vnode,insertedVnodeQueue,removeOnly)}else{if(isRealElement){if(oldVnode.nodeType===1&&oldVnode.hasAttribute(SSR_ATTR)){oldVnode.removeAttribute(SSR_ATTR);hydrating=true}if(isTrue(hydrating)){if(hydrate(oldVnode,vnode,insertedVnodeQueue)){invokeInsertHook(vnode,insertedVnodeQueue,true);return oldVnode}else{}}oldVnode=emptyNodeAt(oldVnode)}var oldElm=oldVnode.elm;var parentElm$1=nodeOps.parentNode(oldElm);createElm(vnode,insertedVnodeQueue,oldElm._leaveCb?null:parentElm$1,nodeOps.nextSibling(oldElm));if(isDef(vnode.parent)){var ancestor=vnode.parent;while(ancestor){ancestor.elm=vnode.elm;ancestor=ancestor.parent}if(isPatchable(vnode)){for(var i=0;i<cbs.create.length;++i){cbs.create[i](emptyNode,vnode.parent)}}}if(isDef(parentElm$1)){removeVnodes(parentElm$1,[oldVnode],0,0)}else if(isDef(oldVnode.tag)){invokeDestroyHook(oldVnode)}}}invokeInsertHook(vnode,insertedVnodeQueue,isInitialPatch);return vnode.elm}}var directives={create:updateDirectives,update:updateDirectives,destroy:function unbindDirectives(vnode){updateDirectives(vnode,emptyNode)}};function updateDirectives(oldVnode,vnode){if(oldVnode.data.directives||vnode.data.directives){_update(oldVnode,vnode)}}function _update(oldVnode,vnode){var isCreate=oldVnode===emptyNode;var isDestroy=vnode===emptyNode;var oldDirs=normalizeDirectives$1(oldVnode.data.directives,oldVnode.context);var newDirs=normalizeDirectives$1(vnode.data.directives,vnode.context);var dirsWithInsert=[];var dirsWithPostpatch=[];var key,oldDir,dir;for(key in newDirs){oldDir=oldDirs[key];dir=newDirs[key];if(!oldDir){callHook$1(dir,"bind",vnode,oldVnode);if(dir.def&&dir.def.inserted){dirsWithInsert.push(dir)}}else{dir.oldValue=oldDir.value;callHook$1(dir,"update",vnode,oldVnode);if(dir.def&&dir.def.componentUpdated){dirsWithPostpatch.push(dir)}}}if(dirsWithInsert.length){var callInsert=function callInsert(){for(var i=0;i<dirsWithInsert.length;i++){callHook$1(dirsWithInsert[i],"inserted",vnode,oldVnode)}};if(isCreate){mergeVNodeHook(vnode.data.hook||(vnode.data.hook={}),"insert",callInsert)}else{callInsert()}}if(dirsWithPostpatch.length){mergeVNodeHook(vnode.data.hook||(vnode.data.hook={}),"postpatch",function(){for(var i=0;i<dirsWithPostpatch.length;i++){callHook$1(dirsWithPostpatch[i],"componentUpdated",vnode,oldVnode)}})}if(!isCreate){for(key in oldDirs){if(!newDirs[key]){callHook$1(oldDirs[key],"unbind",oldVnode,oldVnode,isDestroy)}}}}var emptyModifiers=Object.create(null);function normalizeDirectives$1(dirs,vm){var res=Object.create(null);if(!dirs){return res}var i,dir;for(i=0;i<dirs.length;i++){dir=dirs[i];if(!dir.modifiers){dir.modifiers=emptyModifiers}res[getRawDirName(dir)]=dir;dir.def=resolveAsset(vm.$options,"directives",dir.name,true)}return res}function getRawDirName(dir){return dir.rawName||dir.name+"."+Object.keys(dir.modifiers||{}).join(".")}function callHook$1(dir,hook,vnode,oldVnode,isDestroy){var fn=dir.def&&dir.def[hook];if(fn){try{fn(vnode.elm,dir,vnode,oldVnode,isDestroy)}catch(e){handleError(e,vnode.context,"directive "+dir.name+" "+hook+" hook")}}}var baseModules=[ref,directives];function updateAttrs(oldVnode,vnode){if(isUndef(oldVnode.data.attrs)&&isUndef(vnode.data.attrs)){return}var key,cur,old;var elm=vnode.elm;var oldAttrs=oldVnode.data.attrs||{};var attrs=vnode.data.attrs||{};if(isDef(attrs.__ob__)){attrs=vnode.data.attrs=extend$1({},attrs)}for(key in attrs){cur=attrs[key];old=oldAttrs[key];if(old!==cur){setAttr(elm,key,cur)}}if(isIE9&&attrs.value!==oldAttrs.value){setAttr(elm,"value",attrs.value)}for(key in oldAttrs){if(isUndef(attrs[key])){if(isXlink(key)){elm.removeAttributeNS(xlinkNS,getXlinkProp(key))}else if(!isEnumeratedAttr(key)){elm.removeAttribute(key)}}}}function setAttr(el,key,value){if(isBooleanAttr(key)){if(isFalsyAttrValue(value)){el.removeAttribute(key)}else{el.setAttribute(key,key)}}else if(isEnumeratedAttr(key)){el.setAttribute(key,isFalsyAttrValue(value)||value==="false"?"false":"true")}else if(isXlink(key)){if(isFalsyAttrValue(value)){el.removeAttributeNS(xlinkNS,getXlinkProp(key))}else{el.setAttributeNS(xlinkNS,key,value)}}else{if(isFalsyAttrValue(value)){el.removeAttribute(key)}else{el.setAttribute(key,value)}}}var attrs={create:updateAttrs,update:updateAttrs};function updateClass(oldVnode,vnode){var el=vnode.elm;var data=vnode.data;var oldData=oldVnode.data;if(isUndef(data.staticClass)&&isUndef(data.class)&&(isUndef(oldData)||isUndef(oldData.staticClass)&&isUndef(oldData.class))){return}var cls=genClassForVnode(vnode);var transitionClass=el._transitionClasses;if(isDef(transitionClass)){cls=concat(cls,stringifyClass(transitionClass))}if(cls!==el._prevClass){el.setAttribute("class",cls);el._prevClass=cls}}var klass={create:updateClass,update:updateClass};var RANGE_TOKEN="__r";var CHECKBOX_RADIO_TOKEN="__c";function normalizeEvents(on){var event;if(isDef(on[RANGE_TOKEN])){event=isIE?"change":"input";on[event]=[].concat(on[RANGE_TOKEN],on[event]||[]);delete on[RANGE_TOKEN]}if(isDef(on[CHECKBOX_RADIO_TOKEN])){event=isChrome?"click":"change";on[event]=[].concat(on[CHECKBOX_RADIO_TOKEN],on[event]||[]);delete on[CHECKBOX_RADIO_TOKEN]}}var target$1;function add$1(event,_handler,once$$1,capture,passive){if(once$$1){var oldHandler=_handler;var _target=target$1;_handler=function handler(ev){var res=arguments.length===1?oldHandler(ev):oldHandler.apply(null,arguments);if(res!==null){remove$2(event,_handler,capture,_target)}}}target$1.addEventListener(event,_handler,supportsPassive?{capture:capture,passive:passive}:capture)}function remove$2(event,handler,capture,_target){(_target||target$1).removeEventListener(event,handler,capture)}function updateDOMListeners(oldVnode,vnode){if(isUndef(oldVnode.data.on)&&isUndef(vnode.data.on)){return}var on=vnode.data.on||{};var oldOn=oldVnode.data.on||{};target$1=vnode.elm;normalizeEvents(on);updateListeners(on,oldOn,add$1,remove$2,vnode.context)}var events={create:updateDOMListeners,update:updateDOMListeners};function updateDOMProps(oldVnode,vnode){if(isUndef(oldVnode.data.domProps)&&isUndef(vnode.data.domProps)){return}var key,cur;var elm=vnode.elm;var oldProps=oldVnode.data.domProps||{};var props=vnode.data.domProps||{};if(isDef(props.__ob__)){props=vnode.data.domProps=extend$1({},props)}for(key in oldProps){if(isUndef(props[key])){elm[key]=""}}for(key in props){cur=props[key];if(key==="textContent"||key==="innerHTML"){if(vnode.children){vnode.children.length=0}if(cur===oldProps[key]){continue}}if(key==="value"){elm._value=cur;var strCur=isUndef(cur)?"":String(cur);if(shouldUpdateValue(elm,vnode,strCur)){elm.value=strCur}}else{elm[key]=cur}}}function shouldUpdateValue(elm,vnode,checkVal){return!elm.composing&&(vnode.tag==="option"||isDirty(elm,checkVal)||isInputChanged(elm,checkVal))}function isDirty(elm,checkVal){return document.activeElement!==elm&&elm.value!==checkVal}function isInputChanged(elm,newVal){var value=elm.value;var modifiers=elm._vModifiers;if(isDef(modifiers)&&modifiers.number||elm.type==="number"){return toNumber$1$1(value)!==toNumber$1$1(newVal)}if(isDef(modifiers)&&modifiers.trim){return value.trim()!==newVal.trim()}return value!==newVal}var domProps={create:updateDOMProps,update:updateDOMProps};var parseStyleText=cached(function(cssText){var res={};var listDelimiter=/;(?![^(]*\))/g;var propertyDelimiter=/:(.+)/;cssText.split(listDelimiter).forEach(function(item){if(item){var tmp=item.split(propertyDelimiter);tmp.length>1&&(res[tmp[0].trim()]=tmp[1].trim())}});return res});function normalizeStyleData(data){var style=normalizeStyleBinding(data.style);return data.staticStyle?extend$1(data.staticStyle,style):style}function normalizeStyleBinding(bindingStyle){if(Array.isArray(bindingStyle)){return toObject$1(bindingStyle)}if(typeof bindingStyle==="string"){return parseStyleText(bindingStyle)}return bindingStyle}function getStyle(vnode,checkChild){var res={};var styleData;if(checkChild){var childNode=vnode;while(childNode.componentInstance){childNode=childNode.componentInstance._vnode;if(childNode.data&&(styleData=normalizeStyleData(childNode.data))){extend$1(res,styleData)}}}if(styleData=normalizeStyleData(vnode.data)){extend$1(res,styleData)}var parentNode=vnode;while(parentNode=parentNode.parent){if(parentNode.data&&(styleData=normalizeStyleData(parentNode.data))){extend$1(res,styleData)}}return res}var cssVarRE=/^--/;var importantRE=/\s*!important$/;var setProp=function setProp(el,name,val){if(cssVarRE.test(name)){el.style.setProperty(name,val)}else if(importantRE.test(val)){el.style.setProperty(name,val.replace(importantRE,""),"important")}else{var normalizedName=normalize(name);if(Array.isArray(val)){
for(var i=0,len=val.length;i<len;i++){el.style[normalizedName]=val[i]}}else{el.style[normalizedName]=val}}};var prefixes=["Webkit","Moz","ms"];var testEl;var normalize=cached(function(prop){testEl=testEl||document.createElement("div");prop=camelize(prop);if(prop!=="filter"&&prop in testEl.style){return prop}var upper=prop.charAt(0).toUpperCase()+prop.slice(1);for(var i=0;i<prefixes.length;i++){var prefixed=prefixes[i]+upper;if(prefixed in testEl.style){return prefixed}}});function updateStyle(oldVnode,vnode){var data=vnode.data;var oldData=oldVnode.data;if(isUndef(data.staticStyle)&&isUndef(data.style)&&isUndef(oldData.staticStyle)&&isUndef(oldData.style)){return}var cur,name;var el=vnode.elm;var oldStaticStyle=oldData.staticStyle;var oldStyleBinding=oldData.normalizedStyle||oldData.style||{};var oldStyle=oldStaticStyle||oldStyleBinding;var style=normalizeStyleBinding(vnode.data.style)||{};vnode.data.normalizedStyle=isDef(style.__ob__)?extend$1({},style):style;var newStyle=getStyle(vnode,true);for(name in oldStyle){if(isUndef(newStyle[name])){setProp(el,name,"")}}for(name in newStyle){cur=newStyle[name];if(cur!==oldStyle[name]){setProp(el,name,cur==null?"":cur)}}}var style={create:updateStyle,update:updateStyle};function addClass(el,cls){if(!cls||!(cls=cls.trim())){return}if(el.classList){if(cls.indexOf(" ")>-1){cls.split(/\s+/).forEach(function(c){return el.classList.add(c)})}else{el.classList.add(cls)}}else{var cur=" "+(el.getAttribute("class")||"")+" ";if(cur.indexOf(" "+cls+" ")<0){el.setAttribute("class",(cur+cls).trim())}}}function removeClass(el,cls){if(!cls||!(cls=cls.trim())){return}if(el.classList){if(cls.indexOf(" ")>-1){cls.split(/\s+/).forEach(function(c){return el.classList.remove(c)})}else{el.classList.remove(cls)}}else{var cur=" "+(el.getAttribute("class")||"")+" ";var tar=" "+cls+" ";while(cur.indexOf(tar)>=0){cur=cur.replace(tar," ")}el.setAttribute("class",cur.trim())}}function resolveTransition(def$$1){if(!def$$1){return}if((typeof def$$1==="undefined"?"undefined":_typeof(def$$1))==="object"){var res={};if(def$$1.css!==false){extend$1(res,autoCssTransition(def$$1.name||"v"))}extend$1(res,def$$1);return res}else if(typeof def$$1==="string"){return autoCssTransition(def$$1)}}var autoCssTransition=cached(function(name){return{enterClass:name+"-enter",enterToClass:name+"-enter-to",enterActiveClass:name+"-enter-active",leaveClass:name+"-leave",leaveToClass:name+"-leave-to",leaveActiveClass:name+"-leave-active"}});var hasTransition=inBrowser&&!isIE9;var TRANSITION="transition";var ANIMATION="animation";var transitionProp="transition";var transitionEndEvent="transitionend";var animationProp="animation";var animationEndEvent="animationend";if(hasTransition){if(window.ontransitionend===undefined&&window.onwebkittransitionend!==undefined){transitionProp="WebkitTransition";transitionEndEvent="webkitTransitionEnd"}if(window.onanimationend===undefined&&window.onwebkitanimationend!==undefined){animationProp="WebkitAnimation";animationEndEvent="webkitAnimationEnd"}}var raf=inBrowser&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout;function nextFrame(fn){raf(function(){raf(fn)})}function addTransitionClass(el,cls){(el._transitionClasses||(el._transitionClasses=[])).push(cls);addClass(el,cls)}function removeTransitionClass(el,cls){if(el._transitionClasses){remove$1(el._transitionClasses,cls)}removeClass(el,cls)}function whenTransitionEnds(el,expectedType,cb){var ref=getTransitionInfo(el,expectedType);var type=ref.type;var timeout=ref.timeout;var propCount=ref.propCount;if(!type){return cb()}var event=type===TRANSITION?transitionEndEvent:animationEndEvent;var ended=0;var end=function end(){el.removeEventListener(event,onEnd);cb()};var onEnd=function onEnd(e){if(e.target===el){if(++ended>=propCount){end()}}};setTimeout(function(){if(ended<propCount){end()}},timeout+1);el.addEventListener(event,onEnd)}var transformRE=/\b(transform|all)(,|$)/;function getTransitionInfo(el,expectedType){var styles=window.getComputedStyle(el);var transitionDelays=styles[transitionProp+"Delay"].split(", ");var transitionDurations=styles[transitionProp+"Duration"].split(", ");var transitionTimeout=getTimeout(transitionDelays,transitionDurations);var animationDelays=styles[animationProp+"Delay"].split(", ");var animationDurations=styles[animationProp+"Duration"].split(", ");var animationTimeout=getTimeout(animationDelays,animationDurations);var type;var timeout=0;var propCount=0;if(expectedType===TRANSITION){if(transitionTimeout>0){type=TRANSITION;timeout=transitionTimeout;propCount=transitionDurations.length}}else if(expectedType===ANIMATION){if(animationTimeout>0){type=ANIMATION;timeout=animationTimeout;propCount=animationDurations.length}}else{timeout=Math.max(transitionTimeout,animationTimeout);type=timeout>0?transitionTimeout>animationTimeout?TRANSITION:ANIMATION:null;propCount=type?type===TRANSITION?transitionDurations.length:animationDurations.length:0}var hasTransform=type===TRANSITION&&transformRE.test(styles[transitionProp+"Property"]);return{type:type,timeout:timeout,propCount:propCount,hasTransform:hasTransform}}function getTimeout(delays,durations){while(delays.length<durations.length){delays=delays.concat(delays)}return Math.max.apply(null,durations.map(function(d,i){return toMs(d)+toMs(delays[i])}))}function toMs(s){return Number(s.slice(0,-1))*1e3}function enter(vnode,toggleDisplay){var el=vnode.elm;if(isDef(el._leaveCb)){el._leaveCb.cancelled=true;el._leaveCb()}var data=resolveTransition(vnode.data.transition);if(isUndef(data)){return}if(isDef(el._enterCb)||el.nodeType!==1){return}var css=data.css;var type=data.type;var enterClass=data.enterClass;var enterToClass=data.enterToClass;var enterActiveClass=data.enterActiveClass;var appearClass=data.appearClass;var appearToClass=data.appearToClass;var appearActiveClass=data.appearActiveClass;var beforeEnter=data.beforeEnter;var enter=data.enter;var afterEnter=data.afterEnter;var enterCancelled=data.enterCancelled;var beforeAppear=data.beforeAppear;var appear=data.appear;var afterAppear=data.afterAppear;var appearCancelled=data.appearCancelled;var duration=data.duration;var context=activeInstance;var transitionNode=activeInstance.$vnode;while(transitionNode&&transitionNode.parent){transitionNode=transitionNode.parent;context=transitionNode.context}var isAppear=!context._isMounted||!vnode.isRootInsert;if(isAppear&&!appear&&appear!==""){return}var startClass=isAppear&&appearClass?appearClass:enterClass;var activeClass=isAppear&&appearActiveClass?appearActiveClass:enterActiveClass;var toClass=isAppear&&appearToClass?appearToClass:enterToClass;var beforeEnterHook=isAppear?beforeAppear||beforeEnter:beforeEnter;var enterHook=isAppear?typeof appear==="function"?appear:enter:enter;var afterEnterHook=isAppear?afterAppear||afterEnter:afterEnter;var enterCancelledHook=isAppear?appearCancelled||enterCancelled:enterCancelled;var explicitEnterDuration=toNumber$1$1(isObject$4(duration)?duration.enter:duration);if("production"!=="production"&&explicitEnterDuration!=null){checkDuration(explicitEnterDuration,"enter",vnode)}var expectsCSS=css!==false&&!isIE9;var userWantsControl=getHookArgumentsLength(enterHook);var cb=el._enterCb=once(function(){if(expectsCSS){removeTransitionClass(el,toClass);removeTransitionClass(el,activeClass)}if(cb.cancelled){if(expectsCSS){removeTransitionClass(el,startClass)}enterCancelledHook&&enterCancelledHook(el)}else{afterEnterHook&&afterEnterHook(el)}el._enterCb=null});if(!vnode.data.show){mergeVNodeHook(vnode.data.hook||(vnode.data.hook={}),"insert",function(){var parent=el.parentNode;var pendingNode=parent&&parent._pending&&parent._pending[vnode.key];if(pendingNode&&pendingNode.tag===vnode.tag&&pendingNode.elm._leaveCb){pendingNode.elm._leaveCb()}enterHook&&enterHook(el,cb)})}beforeEnterHook&&beforeEnterHook(el);if(expectsCSS){addTransitionClass(el,startClass);addTransitionClass(el,activeClass);nextFrame(function(){addTransitionClass(el,toClass);removeTransitionClass(el,startClass);if(!cb.cancelled&&!userWantsControl){if(isValidDuration(explicitEnterDuration)){setTimeout(cb,explicitEnterDuration)}else{whenTransitionEnds(el,type,cb)}}})}if(vnode.data.show){toggleDisplay&&toggleDisplay();enterHook&&enterHook(el,cb)}if(!expectsCSS&&!userWantsControl){cb()}}function leave(vnode,rm){var el=vnode.elm;if(isDef(el._enterCb)){el._enterCb.cancelled=true;el._enterCb()}var data=resolveTransition(vnode.data.transition);if(isUndef(data)){return rm()}if(isDef(el._leaveCb)||el.nodeType!==1){return}var css=data.css;var type=data.type;var leaveClass=data.leaveClass;var leaveToClass=data.leaveToClass;var leaveActiveClass=data.leaveActiveClass;var beforeLeave=data.beforeLeave;var leave=data.leave;var afterLeave=data.afterLeave;var leaveCancelled=data.leaveCancelled;var delayLeave=data.delayLeave;var duration=data.duration;var expectsCSS=css!==false&&!isIE9;var userWantsControl=getHookArgumentsLength(leave);var explicitLeaveDuration=toNumber$1$1(isObject$4(duration)?duration.leave:duration);if("production"!=="production"&&isDef(explicitLeaveDuration)){checkDuration(explicitLeaveDuration,"leave",vnode)}var cb=el._leaveCb=once(function(){if(el.parentNode&&el.parentNode._pending){el.parentNode._pending[vnode.key]=null}if(expectsCSS){removeTransitionClass(el,leaveToClass);removeTransitionClass(el,leaveActiveClass)}if(cb.cancelled){if(expectsCSS){removeTransitionClass(el,leaveClass)}leaveCancelled&&leaveCancelled(el)}else{rm();afterLeave&&afterLeave(el)}el._leaveCb=null});if(delayLeave){delayLeave(performLeave)}else{performLeave()}function performLeave(){if(cb.cancelled){return}if(!vnode.data.show){(el.parentNode._pending||(el.parentNode._pending={}))[vnode.key]=vnode}beforeLeave&&beforeLeave(el);if(expectsCSS){addTransitionClass(el,leaveClass);addTransitionClass(el,leaveActiveClass);nextFrame(function(){addTransitionClass(el,leaveToClass);removeTransitionClass(el,leaveClass);if(!cb.cancelled&&!userWantsControl){if(isValidDuration(explicitLeaveDuration)){setTimeout(cb,explicitLeaveDuration)}else{whenTransitionEnds(el,type,cb)}}})}leave&&leave(el,cb);if(!expectsCSS&&!userWantsControl){cb()}}}function checkDuration(val,name,vnode){if(typeof val!=="number"){warn("<transition> explicit "+name+" duration is not a valid number - "+"got "+JSON.stringify(val)+".",vnode.context)}else if(isNaN(val)){warn("<transition> explicit "+name+" duration is NaN - "+"the duration expression might be incorrect.",vnode.context)}}function isValidDuration(val){return typeof val==="number"&&!isNaN(val)}function getHookArgumentsLength(fn){if(isUndef(fn)){return false}var invokerFns=fn.fns;if(isDef(invokerFns)){return getHookArgumentsLength(Array.isArray(invokerFns)?invokerFns[0]:invokerFns)}else{return(fn._length||fn.length)>1}}function _enter(_,vnode){if(vnode.data.show!==true){enter(vnode)}}var transition=inBrowser?{create:_enter,activate:_enter,remove:function remove$$1(vnode,rm){if(vnode.data.show!==true){leave(vnode,rm)}else{rm()}}}:{};var platformModules=[attrs,klass,events,domProps,style,transition];var modules=platformModules.concat(baseModules);var patch=createPatchFunction({nodeOps:nodeOps,modules:modules});if(isIE9){document.addEventListener("selectionchange",function(){var el=document.activeElement;if(el&&el.vmodel){trigger(el,"input")}})}var model$1={inserted:function inserted(el,binding,vnode){if(vnode.tag==="select"){var cb=function cb(){setSelected(el,binding,vnode.context)};cb();if(isIE||isEdge){setTimeout(cb,0)}}else if(vnode.tag==="textarea"||el.type==="text"||el.type==="password"){el._vModifiers=binding.modifiers;if(!binding.modifiers.lazy){el.addEventListener("change",onCompositionEnd);if(!isAndroid){el.addEventListener("compositionstart",onCompositionStart);el.addEventListener("compositionend",onCompositionEnd)}if(isIE9){el.vmodel=true}}}},componentUpdated:function componentUpdated(el,binding,vnode){if(vnode.tag==="select"){setSelected(el,binding,vnode.context);var needReset=el.multiple?binding.value.some(function(v){return hasNoMatchingOption(v,el.options)}):binding.value!==binding.oldValue&&hasNoMatchingOption(binding.value,el.options);if(needReset){trigger(el,"change")}}}};function setSelected(el,binding,vm){var value=binding.value;var isMultiple=el.multiple;if(isMultiple&&!Array.isArray(value)){"production"!=="production"&&warn('<select multiple v-model="'+binding.expression+'"> '+"expects an Array value for its binding, but got "+Object.prototype.toString.call(value).slice(8,-1),vm);return}var selected,option;for(var i=0,l=el.options.length;i<l;i++){option=el.options[i];if(isMultiple){selected=looseIndexOf(value,getValue(option))>-1;if(option.selected!==selected){option.selected=selected}}else{if(looseEqual(getValue(option),value)){if(el.selectedIndex!==i){el.selectedIndex=i}return}}}if(!isMultiple){el.selectedIndex=-1}}function hasNoMatchingOption(value,options){for(var i=0,l=options.length;i<l;i++){if(looseEqual(getValue(options[i]),value)){return false}}return true}function getValue(option){return"_value"in option?option._value:option.value}function onCompositionStart(e){e.target.composing=true}function onCompositionEnd(e){if(!e.target.composing){return}e.target.composing=false;trigger(e.target,"input")}function trigger(el,type){var e=document.createEvent("HTMLEvents");e.initEvent(type,true,true);el.dispatchEvent(e)}function locateNode(vnode){return vnode.componentInstance&&(!vnode.data||!vnode.data.transition)?locateNode(vnode.componentInstance._vnode):vnode}var show={bind:function bind(el,ref,vnode){var value=ref.value;vnode=locateNode(vnode);var transition=vnode.data&&vnode.data.transition;var originalDisplay=el.__vOriginalDisplay=el.style.display==="none"?"":el.style.display;if(value&&transition&&!isIE9){vnode.data.show=true;enter(vnode,function(){el.style.display=originalDisplay})}else{el.style.display=value?originalDisplay:"none"}},update:function update(el,ref,vnode){var value=ref.value;var oldValue=ref.oldValue;if(value===oldValue){return}vnode=locateNode(vnode);var transition=vnode.data&&vnode.data.transition;if(transition&&!isIE9){vnode.data.show=true;if(value){enter(vnode,function(){el.style.display=el.__vOriginalDisplay})}else{leave(vnode,function(){el.style.display="none"})}}else{el.style.display=value?el.__vOriginalDisplay:"none"}},unbind:function unbind(el,binding,vnode,oldVnode,isDestroy){if(!isDestroy){el.style.display=el.__vOriginalDisplay}}};var platformDirectives={model:model$1,show:show};var transitionProps={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function getRealChild(vnode){var compOptions=vnode&&vnode.componentOptions;if(compOptions&&compOptions.Ctor.options.abstract){return getRealChild(getFirstComponentChild(compOptions.children))}else{return vnode}}function extractTransitionData(comp){var data={};var options=comp.$options;for(var key in options.propsData){data[key]=comp[key]}var listeners=options._parentListeners;for(var key$1 in listeners){data[camelize(key$1)]=listeners[key$1]}return data}function placeholder(h,rawChild){if(/\d-keep-alive$/.test(rawChild.tag)){return h("keep-alive",{props:rawChild.componentOptions.propsData})}}function hasParentTransition(vnode){while(vnode=vnode.parent){if(vnode.data.transition){return true}}}function isSameChild(child,oldChild){return oldChild.key===child.key&&oldChild.tag===child.tag}var Transition={name:"transition",props:transitionProps,abstract:true,render:function render(h){var this$1=this;var children=this.$slots.default;if(!children){return}children=children.filter(function(c){return c.tag});if(!children.length){return}if("production"!=="production"&&children.length>1){warn("<transition> can only be used on a single element. Use "+"<transition-group> for lists.",this.$parent)}var mode=this.mode;if("production"!=="production"&&mode&&mode!=="in-out"&&mode!=="out-in"){warn("invalid <transition> mode: "+mode,this.$parent)}var rawChild=children[0];if(hasParentTransition(this.$vnode)){return rawChild}var child=getRealChild(rawChild);if(!child){return rawChild}if(this._leaving){return placeholder(h,rawChild)}var id="__transition-"+this._uid+"-";child.key=child.key==null?id+child.tag:isPrimitive(child.key)?String(child.key).indexOf(id)===0?child.key:id+child.key:child.key;var data=(child.data||(child.data={})).transition=extractTransitionData(this);var oldRawChild=this._vnode;var oldChild=getRealChild(oldRawChild);if(child.data.directives&&child.data.directives.some(function(d){return d.name==="show"})){child.data.show=true}if(oldChild&&oldChild.data&&!isSameChild(child,oldChild)){var oldData=oldChild&&(oldChild.data.transition=extend$1({},data));if(mode==="out-in"){this._leaving=true;mergeVNodeHook(oldData,"afterLeave",function(){this$1._leaving=false;this$1.$forceUpdate()});return placeholder(h,rawChild)}else if(mode==="in-out"){var delayedLeave;var performLeave=function performLeave(){delayedLeave()};mergeVNodeHook(data,"afterEnter",performLeave);mergeVNodeHook(data,"enterCancelled",performLeave);mergeVNodeHook(oldData,"delayLeave",function(leave){delayedLeave=leave})}}return rawChild}};var props=extend$1({tag:String,moveClass:String},transitionProps);delete props.mode;var TransitionGroup={props:props,render:function render(h){var tag=this.tag||this.$vnode.data.tag||"span";var map=Object.create(null);var prevChildren=this.prevChildren=this.children;var rawChildren=this.$slots.default||[];var children=this.children=[];var transitionData=extractTransitionData(this);for(var i=0;i<rawChildren.length;i++){var c=rawChildren[i];if(c.tag){if(c.key!=null&&String(c.key).indexOf("__vlist")!==0){children.push(c);map[c.key]=c;(c.data||(c.data={})).transition=transitionData}else{}}}if(prevChildren){var kept=[];var removed=[];for(var i$1=0;i$1<prevChildren.length;i$1++){var c$1=prevChildren[i$1];c$1.data.transition=transitionData;c$1.data.pos=c$1.elm.getBoundingClientRect();if(map[c$1.key]){kept.push(c$1)}else{removed.push(c$1)}}this.kept=h(tag,null,kept);this.removed=removed}return h(tag,null,children)},beforeUpdate:function beforeUpdate(){this.__patch__(this._vnode,this.kept,false,true);this._vnode=this.kept},updated:function updated(){var children=this.prevChildren;var moveClass=this.moveClass||(this.name||"v")+"-move";if(!children.length||!this.hasMove(children[0].elm,moveClass)){return}children.forEach(callPendingCbs);children.forEach(recordPosition);children.forEach(applyTranslation);var body=document.body;var f=body.offsetHeight;children.forEach(function(c){if(c.data.moved){var el=c.elm;var s=el.style;addTransitionClass(el,moveClass);s.transform=s.WebkitTransform=s.transitionDuration="";el.addEventListener(transitionEndEvent,el._moveCb=function cb(e){if(!e||/transform$/.test(e.propertyName)){el.removeEventListener(transitionEndEvent,cb);el._moveCb=null;removeTransitionClass(el,moveClass)}})}})},methods:{hasMove:function hasMove(el,moveClass){if(!hasTransition){return false}if(this._hasMove!=null){return this._hasMove}var clone=el.cloneNode();if(el._transitionClasses){el._transitionClasses.forEach(function(cls){removeClass(clone,cls)})}addClass(clone,moveClass);clone.style.display="none";this.$el.appendChild(clone);var info=getTransitionInfo(clone);this.$el.removeChild(clone);return this._hasMove=info.hasTransform}}};function callPendingCbs(c){if(c.elm._moveCb){c.elm._moveCb()}if(c.elm._enterCb){c.elm._enterCb()}}function recordPosition(c){c.data.newPos=c.elm.getBoundingClientRect()}function applyTranslation(c){var oldPos=c.data.pos;var newPos=c.data.newPos;var dx=oldPos.left-newPos.left;var dy=oldPos.top-newPos.top;if(dx||dy){c.data.moved=true;var s=c.elm.style;s.transform=s.WebkitTransform="translate("+dx+"px,"+dy+"px)";s.transitionDuration="0s"}}var platformComponents={Transition:Transition,TransitionGroup:TransitionGroup};Vue$3.config.mustUseProp=mustUseProp;Vue$3.config.isReservedTag=isReservedTag;Vue$3.config.isReservedAttr=isReservedAttr;Vue$3.config.getTagNamespace=getTagNamespace;Vue$3.config.isUnknownElement=isUnknownElement;extend$1(Vue$3.options.directives,platformDirectives);extend$1(Vue$3.options.components,platformComponents);Vue$3.prototype.__patch__=inBrowser?patch:noop;Vue$3.prototype.$mount=function(el,hydrating){el=el&&inBrowser?query(el):undefined;return mountComponent(this,el,hydrating)};setTimeout(function(){if(config.devtools){if(devtools){devtools.emit("init",Vue$3)}else if("production"!=="production"&&isChrome){console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\n"+"https://github.com/vuejs/vue-devtools")}}if("production"!=="production"&&config.productionTip!==false&&inBrowser&&typeof console!=="undefined"){console[console.info?"info":"log"]("You are running Vue in development mode.\n"+"Make sure to turn on production mode when deploying for production.\n"+"See more tips at https://vuejs.org/guide/deployment.html")}},0);var commonjsGlobal$2=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule$2(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var vueTranslate_common=createCommonjsModule$2(function(module,exports){"use strict";var vm=null;var VueTranslate={install:function install(Vue){var _Vue$mixin;var version=Vue.version[0];if(!vm){vm=new Vue({data:function data(){return{current:"",locales:{}}},computed:{lang:function lang(){return this.current},locale:function locale(){if(!this.locales[this.current])return null;return this.locales[this.current]}},methods:{setLang:function setLang(val){if(this.current!==val){if(this.current===""){this.$emit("language:init",val)}else{this.$emit("language:changed",val)}}this.current=val;this.$emit("language:modified",val)},setLocales:function setLocales(locales){if(!locales)return;var newLocale=Object.create(this.locales);for(var key in locales){if(!newLocale[key])newLocale[key]={};Vue.util.extend(newLocale[key],locales[key])}this.locales=Object.create(newLocale);this.$emit("locales:loaded",locales)},text:function text(t){if(!this.locale||!this.locale[t]){return t}return this.locale[t]}}});Vue.prototype.$translate=vm}Vue.mixin((_Vue$mixin={},_Vue$mixin[version==="1"?"init":"beforeCreate"]=function(){this.$translate.setLocales(this.$options.locales)},_Vue$mixin.methods={t:function t(_t){return this.$translate.text(_t)}},_Vue$mixin.directives={translate:function(el){if(!el.$translateKey)el.$translateKey=el.innerText;var text=this.$translate.text(el.$translateKey);el.innerText=text}.bind(vm)},_Vue$mixin));Vue.locales=function(locales){vm.$translate.setLocales(locales)}}};{module.exports=VueTranslate}});var onOff$2={init:function init(){window.filestackInternals.logger.working=false},isWorking:function isWorking(){return window.filestackInternals.logger.working},on:function on(){window.filestackInternals.logger.working=true},off:function off(){window.filestackInternals.logger.working=false}};var _typeof$2=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof(obj)};var toConsumableArray$2=function toConsumableArray$$1(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}};var context$2=function context(contextName,onOff){var api=function log(){for(var _len=arguments.length,stuff=Array(_len),_key=0;_key<_len;_key++){stuff[_key]=arguments[_key]}var convertedToStrings=[].concat(stuff).map(function(thing){if((typeof thing==="undefined"?"undefined":_typeof$2(thing))==="object"){return JSON.stringify(thing,function(key,value){if(typeof value==="function"){if(key==="json"){try{return value()}catch(err){}}return"[Function]"}if(value instanceof File){return"[File name: "+value.name+", mimetype: "+value.type+", size: "+value.size+"]"}return value},2)}return thing});if(onOff.isWorking()){var _console;(_console=console).log.apply(_console,["["+contextName+"]"].concat(toConsumableArray$2(convertedToStrings)))}};api.context=function(subContextName){return context(contextName+"]["+subContextName,onOff)};api.on=onOff.on;api.off=onOff.off;return api};var logger$3=context$2("filestack",onOff$2);var initializeGlobalNamespace$2=function initializeGlobalNamespace(){var namespace=void 0;if((typeof window==="undefined"?"undefined":_typeof$2(window))==="object"){namespace=window.filestackInternals;if(!namespace){namespace={};window.filestackInternals=namespace}if(!namespace.logger){namespace.logger=logger$3;onOff$2.init()}}return namespace};initializeGlobalNamespace$2();var _typeof$1$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof(obj)};var initializeGlobalNamespace$1$1=function initializeGlobalNamespace(){var namespace=void 0;if((typeof window==="undefined"?"undefined":_typeof$1$1(window))==="object"){namespace=window.filestackInternals;if(!namespace){namespace={};window.filestackInternals=namespace}if(!namespace.loader){namespace.loader={modules:{}}}}return namespace};var filestackInternals=initializeGlobalNamespace$1$1();var modules$1=filestackInternals.loader.modules;var loadModule=function loadModule(url){var moduleDefinition=modules$1[url];if(!moduleDefinition){modules$1[url]={};moduleDefinition=modules$1[url]}if(moduleDefinition.instance){return Promise.resolve(moduleDefinition.instance)}if(moduleDefinition.promise){return moduleDefinition.promise}var promise=new Promise(function(resolve){var embedScript=function embedScript(){moduleDefinition.resolvePromise=resolve;var script=document.createElement("script");script.src=url;document.body.appendChild(script)};var checkIfDomReady=function checkIfDomReady(){if(document.readyState==="complete"){embedScript()}else{setTimeout(checkIfDomReady,50)}};checkIfDomReady()});moduleDefinition.promise=promise;return promise};var registerReadyModule=function registerReadyModule(instance){var scriptTags=document.getElementsByTagName("script");var thisScript=scriptTags[scriptTags.length-1];var url=thisScript.getAttribute("src");var moduleDefinition=modules$1[url];if(moduleDefinition.resolvePromise){moduleDefinition.instance=instance;moduleDefinition.resolvePromise(instance);delete moduleDefinition.promise;delete moduleDefinition.resolvePromise}};var loadCss=function loadCss(url){var alreadyAddedThisTag=document.querySelector('link[href="'+url+'"]');if(alreadyAddedThisTag!==null){return Promise.resolve()}return new Promise(function(resolve){var head=document.getElementsByTagName("head")[0];var link=document.createElement("link");var loaded=function loaded(){resolve();link.removeEventListener("load",loaded)};link.rel="stylesheet";link.href=url;link.addEventListener("load",loaded);head.appendChild(link)})};var index$2={registerReadyModule:registerReadyModule,loadModule:loadModule,loadCss:loadCss};var applyMixin=function applyMixin(Vue){var version=Number(Vue.version.split(".")[0]);if(version>=2){var usesInit=Vue.config._lifecycleHooks.indexOf("init")>-1;Vue.mixin(usesInit?{init:vuexInit}:{beforeCreate:vuexInit})}else{var _init=Vue.prototype._init;Vue.prototype._init=function(options){if(options===void 0)options={};options.init=options.init?[vuexInit].concat(options.init):vuexInit;_init.call(this,options)}}function vuexInit(){var options=this.$options;if(options.store){this.$store=options.store}else if(options.parent&&options.parent.$store){this.$store=options.parent.$store}}};var devtoolHook=typeof window!=="undefined"&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function devtoolPlugin(store){if(!devtoolHook){return}store._devtoolHook=devtoolHook;devtoolHook.emit("vuex:init",store);devtoolHook.on("vuex:travel-to-state",function(targetState){store.replaceState(targetState)});store.subscribe(function(mutation,state){devtoolHook.emit("vuex:mutation",mutation,state)})}function forEachValue(obj,fn){Object.keys(obj).forEach(function(key){return fn(obj[key],key)})}function isObject$1$1(obj){return obj!==null&&(typeof obj==="undefined"?"undefined":_typeof(obj))==="object"}function isPromise(val){return val&&typeof val.then==="function"}function assert$1(condition,msg){if(!condition){throw new Error("[vuex] "+msg)}}var Module=function Module(rawModule,runtime){this.runtime=runtime;this._children=Object.create(null);this._rawModule=rawModule;var rawState=rawModule.state;this.state=(typeof rawState==="function"?rawState():rawState)||{}};var prototypeAccessors$1={namespaced:{}};prototypeAccessors$1.namespaced.get=function(){return!!this._rawModule.namespaced};Module.prototype.addChild=function addChild(key,module){this._children[key]=module};Module.prototype.removeChild=function removeChild(key){delete this._children[key]};Module.prototype.getChild=function getChild(key){return this._children[key]};Module.prototype.update=function update(rawModule){this._rawModule.namespaced=rawModule.namespaced;if(rawModule.actions){this._rawModule.actions=rawModule.actions}if(rawModule.mutations){this._rawModule.mutations=rawModule.mutations}if(rawModule.getters){this._rawModule.getters=rawModule.getters}};Module.prototype.forEachChild=function forEachChild(fn){forEachValue(this._children,fn)};Module.prototype.forEachGetter=function forEachGetter(fn){if(this._rawModule.getters){forEachValue(this._rawModule.getters,fn)}};Module.prototype.forEachAction=function forEachAction(fn){if(this._rawModule.actions){forEachValue(this._rawModule.actions,fn)}};Module.prototype.forEachMutation=function forEachMutation(fn){if(this._rawModule.mutations){forEachValue(this._rawModule.mutations,fn)}};Object.defineProperties(Module.prototype,prototypeAccessors$1);var ModuleCollection=function ModuleCollection(rawRootModule){var this$1=this;this.root=new Module(rawRootModule,false);if(rawRootModule.modules){forEachValue(rawRootModule.modules,function(rawModule,key){this$1.register([key],rawModule,false)})}};ModuleCollection.prototype.get=function get$$1(path){return path.reduce(function(module,key){return module.getChild(key)},this.root)};ModuleCollection.prototype.getNamespace=function getNamespace(path){var module=this.root;return path.reduce(function(namespace,key){module=module.getChild(key);return namespace+(module.namespaced?key+"/":"")},"")};ModuleCollection.prototype.update=function update$1(rawRootModule){update$1(this.root,rawRootModule)};ModuleCollection.prototype.register=function register(path,rawModule,runtime){var this$1=this;if(runtime===void 0)runtime=true;var parent=this.get(path.slice(0,-1));var newModule=new Module(rawModule,runtime);parent.addChild(path[path.length-1],newModule);if(rawModule.modules){forEachValue(rawModule.modules,function(rawChildModule,key){this$1.register(path.concat(key),rawChildModule,runtime)})}};ModuleCollection.prototype.unregister=function unregister(path){var parent=this.get(path.slice(0,-1));var key=path[path.length-1];if(!parent.getChild(key).runtime){return}parent.removeChild(key)};function update$1(targetModule,newModule){targetModule.update(newModule);if(newModule.modules){for(var key in newModule.modules){if(!targetModule.getChild(key)){console.warn("[vuex] trying to add a new module '"+key+"' on hot reloading, "+"manual reload is needed");return}update$1(targetModule.getChild(key),newModule.modules[key])}}}var Vue$1;var Store=function Store(options){var this$1=this;if(options===void 0)options={};assert$1(Vue$1,"must call Vue.use(Vuex) before creating a store instance.")
;assert$1(typeof Promise!=="undefined","vuex requires a Promise polyfill in this browser.");var state=options.state;if(state===void 0)state={};var plugins=options.plugins;if(plugins===void 0)plugins=[];var strict=options.strict;if(strict===void 0)strict=false;this._committing=false;this._actions=Object.create(null);this._mutations=Object.create(null);this._wrappedGetters=Object.create(null);this._modules=new ModuleCollection(options);this._modulesNamespaceMap=Object.create(null);this._subscribers=[];this._watcherVM=new Vue$1;var store=this;var ref=this;var dispatch=ref.dispatch;var commit=ref.commit;this.dispatch=function boundDispatch(type,payload){return dispatch.call(store,type,payload)};this.commit=function boundCommit(type,payload,options){return commit.call(store,type,payload,options)};this.strict=strict;installModule(this,state,[],this._modules.root);resetStoreVM(this,state);plugins.concat(devtoolPlugin).forEach(function(plugin){return plugin(this$1)})};var prototypeAccessors$1$1={state:{}};prototypeAccessors$1$1.state.get=function(){return this._vm._data.$$state};prototypeAccessors$1$1.state.set=function(v){assert$1(false,"Use store.replaceState() to explicit replace store state.")};Store.prototype.commit=function commit(_type,_payload,_options){var this$1=this;var ref=unifyObjectStyle(_type,_payload,_options);var type=ref.type;var payload=ref.payload;var options=ref.options;var mutation={type:type,payload:payload};var entry=this._mutations[type];if(!entry){console.error("[vuex] unknown mutation type: "+type);return}this._withCommit(function(){entry.forEach(function commitIterator(handler){handler(payload)})});this._subscribers.forEach(function(sub){return sub(mutation,this$1.state)});if(options&&options.silent){console.warn("[vuex] mutation type: "+type+". Silent option has been removed. "+"Use the filter functionality in the vue-devtools")}};Store.prototype.dispatch=function dispatch(_type,_payload){var ref=unifyObjectStyle(_type,_payload);var type=ref.type;var payload=ref.payload;var entry=this._actions[type];if(!entry){console.error("[vuex] unknown action type: "+type);return}return entry.length>1?Promise.all(entry.map(function(handler){return handler(payload)})):entry[0](payload)};Store.prototype.subscribe=function subscribe(fn){var subs=this._subscribers;if(subs.indexOf(fn)<0){subs.push(fn)}return function(){var i=subs.indexOf(fn);if(i>-1){subs.splice(i,1)}}};Store.prototype.watch=function watch(getter,cb,options){var this$1=this;assert$1(typeof getter==="function","store.watch only accepts a function.");return this._watcherVM.$watch(function(){return getter(this$1.state,this$1.getters)},cb,options)};Store.prototype.replaceState=function replaceState(state){var this$1=this;this._withCommit(function(){this$1._vm._data.$$state=state})};Store.prototype.registerModule=function registerModule(path,rawModule){if(typeof path==="string"){path=[path]}assert$1(Array.isArray(path),"module path must be a string or an Array.");this._modules.register(path,rawModule);installModule(this,this.state,path,this._modules.get(path));resetStoreVM(this,this.state)};Store.prototype.unregisterModule=function unregisterModule(path){var this$1=this;if(typeof path==="string"){path=[path]}assert$1(Array.isArray(path),"module path must be a string or an Array.");this._modules.unregister(path);this._withCommit(function(){var parentState=getNestedState(this$1.state,path.slice(0,-1));Vue$1.delete(parentState,path[path.length-1])});resetStore(this)};Store.prototype.hotUpdate=function hotUpdate(newOptions){this._modules.update(newOptions);resetStore(this,true)};Store.prototype._withCommit=function _withCommit(fn){var committing=this._committing;this._committing=true;fn();this._committing=committing};Object.defineProperties(Store.prototype,prototypeAccessors$1$1);function resetStore(store,hot){store._actions=Object.create(null);store._mutations=Object.create(null);store._wrappedGetters=Object.create(null);store._modulesNamespaceMap=Object.create(null);var state=store.state;installModule(store,state,[],store._modules.root,true);resetStoreVM(store,state,hot)}function resetStoreVM(store,state,hot){var oldVm=store._vm;store.getters={};var wrappedGetters=store._wrappedGetters;var computed={};forEachValue(wrappedGetters,function(fn,key){computed[key]=function(){return fn(store)};Object.defineProperty(store.getters,key,{get:function get$$1(){return store._vm[key]},enumerable:true})});var silent=Vue$1.config.silent;Vue$1.config.silent=true;store._vm=new Vue$1({data:{$$state:state},computed:computed});Vue$1.config.silent=silent;if(store.strict){enableStrictMode(store)}if(oldVm){if(hot){store._withCommit(function(){oldVm._data.$$state=null})}Vue$1.nextTick(function(){return oldVm.$destroy()})}}function installModule(store,rootState,path,module,hot){var isRoot=!path.length;var namespace=store._modules.getNamespace(path);if(module.namespaced){store._modulesNamespaceMap[namespace]=module}if(!isRoot&&!hot){var parentState=getNestedState(rootState,path.slice(0,-1));var moduleName=path[path.length-1];store._withCommit(function(){Vue$1.set(parentState,moduleName,module.state)})}var local=module.context=makeLocalContext(store,namespace,path);module.forEachMutation(function(mutation,key){var namespacedType=namespace+key;registerMutation(store,namespacedType,mutation,local)});module.forEachAction(function(action,key){var namespacedType=namespace+key;registerAction(store,namespacedType,action,local)});module.forEachGetter(function(getter,key){var namespacedType=namespace+key;registerGetter(store,namespacedType,getter,local)});module.forEachChild(function(child,key){installModule(store,rootState,path.concat(key),child,hot)})}function makeLocalContext(store,namespace,path){var noNamespace=namespace==="";var local={dispatch:noNamespace?store.dispatch:function(_type,_payload,_options){var args=unifyObjectStyle(_type,_payload,_options);var payload=args.payload;var options=args.options;var type=args.type;if(!options||!options.root){type=namespace+type;if(!store._actions[type]){console.error("[vuex] unknown local action type: "+args.type+", global type: "+type);return}}return store.dispatch(type,payload)},commit:noNamespace?store.commit:function(_type,_payload,_options){var args=unifyObjectStyle(_type,_payload,_options);var payload=args.payload;var options=args.options;var type=args.type;if(!options||!options.root){type=namespace+type;if(!store._mutations[type]){console.error("[vuex] unknown local mutation type: "+args.type+", global type: "+type);return}}store.commit(type,payload,options)}};Object.defineProperties(local,{getters:{get:noNamespace?function(){return store.getters}:function(){return makeLocalGetters(store,namespace)}},state:{get:function get$$1(){return getNestedState(store.state,path)}}});return local}function makeLocalGetters(store,namespace){var gettersProxy={};var splitPos=namespace.length;Object.keys(store.getters).forEach(function(type){if(type.slice(0,splitPos)!==namespace){return}var localType=type.slice(splitPos);Object.defineProperty(gettersProxy,localType,{get:function get$$1(){return store.getters[type]},enumerable:true})});return gettersProxy}function registerMutation(store,type,handler,local){var entry=store._mutations[type]||(store._mutations[type]=[]);entry.push(function wrappedMutationHandler(payload){handler(local.state,payload)})}function registerAction(store,type,handler,local){var entry=store._actions[type]||(store._actions[type]=[]);entry.push(function wrappedActionHandler(payload,cb){var res=handler({dispatch:local.dispatch,commit:local.commit,getters:local.getters,state:local.state,rootGetters:store.getters,rootState:store.state},payload,cb);if(!isPromise(res)){res=Promise.resolve(res)}if(store._devtoolHook){return res.catch(function(err){store._devtoolHook.emit("vuex:error",err);throw err})}else{return res}})}function registerGetter(store,type,rawGetter,local){if(store._wrappedGetters[type]){console.error("[vuex] duplicate getter key: "+type);return}store._wrappedGetters[type]=function wrappedGetter(store){return rawGetter(local.state,local.getters,store.state,store.getters)}}function enableStrictMode(store){store._vm.$watch(function(){return this._data.$$state},function(){assert$1(store._committing,"Do not mutate vuex store state outside mutation handlers.")},{deep:true,sync:true})}function getNestedState(state,path){return path.length?path.reduce(function(state,key){return state[key]},state):state}function unifyObjectStyle(type,payload,options){if(isObject$1$1(type)&&type.type){options=payload;payload=type;type=type.type}assert$1(typeof type==="string","Expects string as the type, but found "+(typeof type==="undefined"?"undefined":_typeof(type))+".");return{type:type,payload:payload,options:options}}function install(_Vue){if(Vue$1){console.error("[vuex] already installed. Vue.use(Vuex) should be called only once.");return}Vue$1=_Vue;applyMixin(Vue$1)}if(typeof window!=="undefined"&&window.Vue){install(window.Vue)}var mapState=normalizeNamespace(function(namespace,states){var res={};normalizeMap(states).forEach(function(ref){var key=ref.key;var val=ref.val;res[key]=function mappedState(){var state=this.$store.state;var getters=this.$store.getters;if(namespace){var module=getModuleByNamespace(this.$store,"mapState",namespace);if(!module){return}state=module.context.state;getters=module.context.getters}return typeof val==="function"?val.call(this,state,getters):state[val]};res[key].vuex=true});return res});var mapMutations=normalizeNamespace(function(namespace,mutations){var res={};normalizeMap(mutations).forEach(function(ref){var key=ref.key;var val=ref.val;val=namespace+val;res[key]=function mappedMutation(){var args=[],len=arguments.length;while(len--){args[len]=arguments[len]}if(namespace&&!getModuleByNamespace(this.$store,"mapMutations",namespace)){return}return this.$store.commit.apply(this.$store,[val].concat(args))}});return res});var mapGetters=normalizeNamespace(function(namespace,getters){var res={};normalizeMap(getters).forEach(function(ref){var key=ref.key;var val=ref.val;val=namespace+val;res[key]=function mappedGetter(){if(namespace&&!getModuleByNamespace(this.$store,"mapGetters",namespace)){return}if(!(val in this.$store.getters)){console.error("[vuex] unknown getter: "+val);return}return this.$store.getters[val]};res[key].vuex=true});return res});var mapActions=normalizeNamespace(function(namespace,actions){var res={};normalizeMap(actions).forEach(function(ref){var key=ref.key;var val=ref.val;val=namespace+val;res[key]=function mappedAction(){var args=[],len=arguments.length;while(len--){args[len]=arguments[len]}if(namespace&&!getModuleByNamespace(this.$store,"mapActions",namespace)){return}return this.$store.dispatch.apply(this.$store,[val].concat(args))}});return res});function normalizeMap(map){return Array.isArray(map)?map.map(function(key){return{key:key,val:key}}):Object.keys(map).map(function(key){return{key:key,val:map[key]}})}function normalizeNamespace(fn){return function(namespace,map){if(typeof namespace!=="string"){map=namespace;namespace=""}else if(namespace.charAt(namespace.length-1)!=="/"){namespace+="/"}return fn(namespace,map)}}function getModuleByNamespace(store,helper,namespace){var module=store._modulesNamespaceMap[namespace];if(!module){console.error("[vuex] module namespace not found in "+helper+"(): "+namespace)}return module}var index_esm={Store:Store,install:install,version:"2.3.0",mapState:mapState,mapMutations:mapMutations,mapGetters:mapGetters,mapActions:mapActions};var getFileEntryFromDataTransferItem=function getFileEntryFromDataTransferItem(file){if(typeof file.getAsEntry==="function"){return file.getAsEntry()}else if(typeof file.webkitGetAsEntry==="function"){return file.webkitGetAsEntry()}return undefined};var isWantedFile=function isWantedFile(filename){var unwantedFiles=[".DS_Store"];return unwantedFiles.indexOf(filename)===-1};var getPath=function getPath(path,name){return path+"/"+name};var extractFromItems=function extractFromItems(items){var files=[];var traverseDirectoryTree=function traverseDirectoryTree(fileEntry){var path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";return new Promise(function(resolve){if(fileEntry.isDirectory){fileEntry.createReader().readEntries(function(dirContent){var promises=dirContent.map(function(dirItem){return traverseDirectoryTree(dirItem,getPath(path,fileEntry.name))});Promise.all(promises).then(resolve)})}else if(fileEntry.isFile){fileEntry.file(function(file){if(isWantedFile(file.name)){file.path=getPath(path,file.name);files.push(file)}resolve()})}})};var extractUrl=function extractUrl(item){return new Promise(function(resolve){item.getAsString(function(url){files.push({url:url,source:"dragged-from-web"});resolve()})})};var promises=[];for(var i=0;i<items.length;i+=1){var item=items[i];if(item.kind==="file"&&item.type&&item.type!=="application/x-moz-file"){var file=item.getAsFile();if(file){files.push(file);promises.push(Promise.resolve())}}else if(item.kind==="file"){var _file=getFileEntryFromDataTransferItem(item);if(_file){promises.push(traverseDirectoryTree(_file))}}else if(item.kind==="string"&&item.type==="text/uri-list"){promises.push(extractUrl(item))}}return Promise.all(promises).then(function(){return files})};var extractFromFiles=function extractFromFiles(fileList){return new Promise(function(resolve){var files=[];for(var i=0;i<fileList.length;i+=1){files.push(fileList[i])}resolve(files)})};var extractFilesFromDataTransfer=function extractFilesFromDataTransfer(dataTransfer){if(dataTransfer.items){return extractFromItems(dataTransfer.items)}if(dataTransfer.files){return extractFromFiles(dataTransfer.files)}return Promise.resolve([])};var _typeof$2$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof(obj)};var defineProperty$1=function defineProperty$$1(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj};var _extends$1=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var toConsumableArray$1$1=function toConsumableArray$1(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}};var DragAndDrop={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.fileAboutToBeDropped,expression:"fileAboutToBeDropped"}],ref:"dropZone",staticClass:"fsp-dropzone-overlay"},[_c("div",{staticClass:"fsp-dropzone-overlay__text"})])},staticRenderFns:[],data:function data(){return{fileAboutToBeDropped:false}},methods:_extends$1({},index_esm.mapActions(["addFile","updateSelectLabelActive"]),{dragenter:function dragenter(event){event.preventDefault();this.fileAboutToBeDropped=true;this.updateSelectLabelActive(true)},dragover:function dragover(event){event.preventDefault()},dragleave:function dragleave(){this.fileAboutToBeDropped=false;this.updateSelectLabelActive(false)},drop:function drop(event){var _this=this;event.preventDefault();this.fileAboutToBeDropped=false;extractFilesFromDataTransfer(event.dataTransfer).then(function(files){files.forEach(function(file){_this.addFile(file)})})},paste:function paste(event){var _this2=this;extractFilesFromDataTransfer(event.clipboardData).then(function(files){files.forEach(function(file){file.name="pasted file";_this2.addFile(file)})})}}),mounted:function mounted(){var root=this.$root.$el;var dropZone=this.$refs.dropZone;root.addEventListener("dragenter",this.dragenter,false);dropZone.addEventListener("dragover",this.dragover,false);dropZone.addEventListener("dragleave",this.dragleave,false);dropZone.addEventListener("drop",this.drop,false);root.addEventListener("paste",this.paste,false)}};var Notifications={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm.notifications.length>0?_c("div",{staticClass:"fsp-notifications__container"},[_c("div",{staticClass:"fsp-notifications__message"},[_vm._v(_vm._s(_vm.mostRecentNotification.message))]),_c("span",{staticClass:"fsp-icon fsp-notifications__close-button",on:{click:_vm.removeAllNotifications}})]):_vm._e()},staticRenderFns:[],computed:_extends$1({},index_esm.mapGetters(["notifications"]),{mostRecentNotification:function mostRecentNotification(){return this.notifications[this.notifications.length-1]}}),methods:_extends$1({},index_esm.mapActions(["removeAllNotifications"]))};var sources=[{name:"local_file_system",label:"My Device",ui:"local"},{name:"webcam",label:"Take Photo",ui:"webcam"},{name:"dropbox",label:"Dropbox",ui:"cloud"},{name:"evernote",label:"Evernote",ui:"cloud"},{name:"facebook",label:"Facebook",ui:"cloud"},{name:"flickr",label:"Flickr",ui:"cloud"},{name:"instagram",label:"Instagram",ui:"cloud"},{name:"box",label:"Box",ui:"cloud"},{name:"googledrive",label:"Google Drive",ui:"cloud"},{name:"github",label:"Github",ui:"cloud"},{name:"gmail",label:"Gmail",ui:"cloud"},{name:"picasa",label:"Google Photos",ui:"cloud"},{name:"onedrive",label:"OneDrive",ui:"cloud"},{name:"clouddrive",label:"Cloud Drive",ui:"cloud"},{name:"imagesearch",label:"Web Search",ui:"imagesearch"},{name:"source-url",label:"Link (URL)",ui:"source-url"}];var getByName=function getByName(name){var definition=void 0;sources.forEach(function(sourceDefinition){if(sourceDefinition.name===name){definition=sourceDefinition}});if(!definition){throw new Error('Unknown source "'+name+'"')}return definition};var SourceNavItem={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return!_vm.isHiddenOnMobile?_c("div",{staticClass:"fsp-source-list__item",class:{active:_vm.isSelectedSource,disabled:_vm.uploadStarted},on:{click:function click($event){_vm.onNavClick(_vm.sourceName)}}},[_vm.sourceSelectedCount(_vm.filesWaiting)?_c("span",{staticClass:"fsp-badge--source"},[_vm._v(_vm._s(_vm.sourceSelectedCount(_vm.filesWaiting)))]):_vm._e(),_vm._v(" "),_c("span",{staticClass:"fsp-source-list__icon fsp-icon",class:"fsp-icon--"+_vm.sourceName}),_vm._v(" "),_c("span",{staticClass:"fsp-source-list__label"},[_vm._v(_vm._s(_vm.t(_vm.sourceLabel)))]),_vm._v(" "),_vm.isAuthorized?_c("span",{staticClass:"fsp-source-list__logout",on:{click:function click($event){$event.stopPropagation();_vm.logout(_vm.sourceName)}}},[_vm._v(_vm._s(_vm.t("Sign Out")))]):_vm._e(),_vm._v(" "),_vm.isMobileLocal?_c("input",{ref:"mobileLocaInput",staticClass:"fsp-local-source__fileinput",attrs:{type:"file",multiple:_vm.multiple},on:{change:function change($event){_vm.onFilesSelected($event)}}}):_vm._e()]):_vm._e()},staticRenderFns:[],props:["sourceName","sourceLabel"],computed:_extends$1({},index_esm.mapGetters(["filesWaiting","route","uploadStarted","cloudsAuthorized","mobileNavActive","maxFiles","accept"]),{isSelectedSource:function isSelectedSource(){if(this.route[0]==="summary"){return false}var selectedRoute=this.route.length>1?this.route[1]:"local_file_system";return selectedRoute===this.sourceName},isAuthorized:function isAuthorized(){return this.cloudsAuthorized[this.sourceName]},isMobileLocal:function isMobileLocal(){return this.mobileNavActive&&this.sourceName==="local_file_system"},isHiddenOnMobile:function isHiddenOnMobile(){return this.mobileNavActive&&this.sourceName==="webcam"},multiple:function multiple(){return this.maxFiles>1}}),methods:_extends$1({},index_esm.mapActions(["updateMobileNavActive","addFile","logout"]),{onNavClick:function onNavClick(sourceName){if(this.isMobileLocal){this.openSelectFile()}else{this.updateMobileNavActive(false);this.$store.commit("CHANGE_ROUTE",["source",sourceName])}},sourceSelectedCount:function sourceSelectedCount(arr){var _this=this;var checkSelected=arr.filter(function(fw){return fw.source===_this.sourceName});return checkSelected.length},openSelectFile:function openSelectFile(){this.$refs.mobileLocaInput.click()},onFilesSelected:function onFilesSelected(event){var files=event.target.files;for(var i=0;i<files.length;i+=1){this.addFile(files[i])}}})};var Sidebar={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-modal__sidebar",class:{"fsp-mobile-nav-active":_vm.mobileNavActive}},[_c("div",{staticClass:"fsp-source-list"},_vm._l(_vm.fromSources,function(source){return _c("source-nav-item",{key:source.name,attrs:{"source-name":source.name,"source-label":source.label}})}))])},staticRenderFns:[],components:{SourceNavItem:SourceNavItem},computed:_extends$1({},index_esm.mapGetters(["fromSources","mobileNavActive"]))};var Modal={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-picker"},[_c("div",{staticClass:"fsp-modal"},[!_vm.isTransformer?_c("sidebar"):_vm._e(),_vm._t("sidebar"),_c("div",{staticClass:"fsp-modal__body",class:_vm.getModalClasses},[_vm._t("header"),_c("div",{staticClass:"fsp-content",class:_vm.getContentClasses},[_vm._t("body")],2),_vm._t("footer")],2)],2),_vm._m(0)])},staticRenderFns:[function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-picker__footer"},[_vm._v("Powered by "),_c("span",{staticClass:"fsp-icon--filestack"}),_vm._v(" Filestack")])}],components:{Sidebar:Sidebar},computed:_extends$1({},index_esm.mapGetters(["cropEnabled","filtersEnabled","filesWaiting","route","uploadStarted"]),{isTransformer:function isTransformer(){return this.route[0]==="transform"},isTransformerDisabled:function isTransformerDisabled(){return!this.cropEnabled&&!this.filtersEnabled},getContentClasses:function getContentClasses(){return{"fsp-content--selected-items":this.filesWaiting.length>0||this.uploadStarted}},getModalClasses:function getModalClasses(){return{"fsp-modal__body--transformer":this.isTransformer,"fsp-modal__body--transformer-disabled":this.isTransformer&&this.isTransformerDisabled}}})};var isMimetype=function isMimetype(str){return str.indexOf("/")!==-1};var matchesMimetype=function matchesMimetype(fileDefinition,singleAcceptOption){if(fileDefinition.mimetype&&singleAcceptOption==="image/*"){return fileDefinition.mimetype.indexOf("image/")!==-1}if(fileDefinition.mimetype&&singleAcceptOption==="video/*"){return fileDefinition.mimetype.indexOf("video/")!==-1}if(fileDefinition.mimetype&&singleAcceptOption==="audio/*"){return fileDefinition.mimetype.indexOf("audio/")!==-1}if(fileDefinition.mimetype&&singleAcceptOption==="application/*"){return fileDefinition.mimetype.indexOf("application/")!==-1}if(fileDefinition.mimetype&&singleAcceptOption==="text/*"){return fileDefinition.mimetype.indexOf("text/")!==-1}return fileDefinition.mimetype===singleAcceptOption};var extractExtension=function extractExtension(filename){return/\.\w+$/.exec(filename)[0]};var normalizeExtension=function normalizeExtension(ext){return ext.replace(".","")};var matchesExtension=function matchesExtension(fileDefinition,singleAcceptOption){var fileExt=normalizeExtension(extractExtension(fileDefinition.name));var acceptExt=normalizeExtension(singleAcceptOption);return fileExt===acceptExt};var canAcceptThisFile=function canAcceptThisFile(fileDefinition,accept){if(accept===undefined){return true}return accept.some(function(singleAcceptOption){if(isMimetype(singleAcceptOption)){return matchesMimetype(fileDefinition,singleAcceptOption)}return matchesExtension(fileDefinition,singleAcceptOption)})};var convertFileForOutsideWorld=function convertFileForOutsideWorld(f){var file={filename:f.name,handle:f.handle,mimetype:f.mimetype||f.type,originalPath:f.path,size:f.size,source:f.source,url:f.url};if(f.status)file.status=f.status;if(f.key)file.key=f.key;if(f.container)file.container=f.container;return file};var convertFileListForOutsideWorld=function convertFileListForOutsideWorld(list){return list.map(convertFileForOutsideWorld)};var roundFileSize=function roundFileSize(numb){if(numb>=1048576){return Math.round(numb/1048576)+"MB"}if(numb>=1024){return Math.round(numb/1024)+"KB"}return numb+"B"};var displayName=function displayName(normalizedFile){if(normalizedFile.name.length<45){return normalizedFile.name}var fileSplit=normalizedFile.name.split(".");if(fileSplit.length===2){var truncName=fileSplit[0].substring(0,42)+"..";var fileExt=fileSplit[1];return truncName+"."+fileExt}if(fileSplit.length>2){var _truncName=normalizedFile.name.substring(0,42)+"..";var _fileExt=fileSplit[fileSplit.length-1];return _truncName+"."+_fileExt}return normalizedFile.name.substring(0,42)+"..."};var isImage=function isImage(file){return file.mimetype&&file.mimetype.indexOf("image/")!==-1};var isAudio=function isAudio(file){return file.mimetype&&file.mimetype.indexOf("audio/")!==-1};var randomByteHex=function randomByteHex(){return Math.round(Math.random()*255).toString(16)};var guid=function guid(length){var guid="";while(guid.length<length*2){guid+=randomByteHex()}return guid};var da={Add:"Tilføj",My:"Min",Connect:"Forbind",View:"Vis",Upload:"Upload",Filter:"Filtrer",Images:"Billeder",of:"af",Loading:"Indlæser",Revert:"Gør om",Edit:"Rediger",More:"Mere",Uploaded:"Uploaded","Web Search":"søgning på internettet","Take Picture":"Tage billede","A new page will open to connect your account.":"En ny side vil åbne for at forbinde med din konto","My Device":"Min enhed","or Drag and Drop, Copy and Paste Files":"Eller træk og slip, kopier og indsæt filer","Pick Your Files":"Vælg dine filer","Select Files to Upload":"Vælg filer til upload","Selected Files":"Valgte filer","Select Files from":"Vælg filer fra","We only extract images and never modify or delete them.":"Vi hiver kun billeder og modificerer eller sletter dem aldrig","You need to authenticate with ":"Du skal godkende med ","Search images":"Søg billeder","Sign Out":"Log ud","Select From":"Vælg fra","View/Edit Selected":"Vis/rediger valgte","Deselect All":"Fravælg alle","Files & Folders":"Filer og foldere","Edited Images":"Redigerede filer","Go Back":"Gå tilbage","No search results found for":"Ingen resultater fundet for","Please select":"Vælg venligst","more file":"fil mere","more files":"flere filer","File {displayName} is not an accepted file type. The accepted file types are {types}":"Filen {displayName} er ikke i et acceptabelt format. De accepterede formater er {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":" Filen {displayName} er for stor. Den accepterede filstørrelse er {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":" Vores filstørrelse er begrænset til {maxFiles} {filesText}"};var de={Add:"Hinzufügen",My:"Mein",Connect:"Verbinden mit",View:"Aussicht",Upload:"Hochladen",Filter:"Filtern",Images:"Bilder",of:"von",Loading:"Laden",Revert:"Rückgängig",Edit:"Bearbeiten",More:"Mehr",Uploaded:"Hochgeladen","Web Search":"Internetsuche","Take Picture":"Foto machen","A new page will open to connect your account.":"Eine neue Seite wird geöffnet, um Ihr Konto zu verbinden","My Device":"Mein Gerät","or Drag and Drop, Copy and Paste Files":"oder ziehen, kopieren und Einfügen von Dateien","Pick Your Files":"Wählen Sie Ihre Dateien","Select Files to Upload":"Wählen Sie Dateien hochladen","Selected Files":"Ausgewählten Dateien","Select Files from":"Wählen Sie Dateien aus","We only extract images and never modify or delete them.":"Wir extrahieren Bilder nur und modifizieren oder löschen sie niemals","You need to authenticate with ":"Sie müssen sich mit anmelden ","Search images":"Suche bilder","Sign Out":"Abmelden","Select From":"Wählen Sie aus","View/Edit Selected":"Anzeigen/Bearbeiten ausgewählt","Deselect All":"Deaktivieren Sie alle","Files & Folders":"Dateien und Ordner","Edited Images":"Bearbeitete Bilder","Go Back":"Zurück","No search results found for":"Keine Suchergebnisse gefunden für","Please select":"Bitte wählen Sie","more file":"weitere Datei","more files":"weitere Dateien","File {displayName} is not an accepted file type. The accepted file types are {types}":"Datei-{displayName} ist keine anerkannte Dateityp. Die akzeptierten Dateitypen sind {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"{displayName} Datei ist zu groß. Die akzeptierten Dateigröße beträgt {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"Unser Dateigrößenlimit ist {maxFiles} {filesText}"};var en={"File {displayName} is not an accepted file type. The accepted file types are {types}":"File {displayName} is not an accepted file type. The accepted file types are {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"File {displayName} is too big. The accepted file size is less than {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"Our file upload limit is {maxFiles} {filesText}"};var es={Add:"Añadir",My:"Mi",Connect:"Conectar",View:"Ver",Upload:"Subir",Filter:"Filtrar",Images:"Imágenes",of:"de",Loading:"Cargando",Revert:"Deshacer",Edit:"Editar",More:"Mas",Uploaded:"Subido","Web Search":"Búsqueda de Internet","Take Picture":"Tomar la foto","A new page will open to connect your account.":"Se abrirá una nueva página para conectar tu cuenta.","My Device":"Mi Dispositivo","or Drag and Drop, Copy and Paste Files":"O arrastrar y soltar, copiar y pegar archivos","Pick Your Files":"Elige tus archivos","Select Files to Upload":"Seleccionar archivos para cargar","Selected Files":"Archivos seleccionados","Select Files from":"Seleccione Archivos de","We only extract images and never modify or delete them.":"Sólo extraemos imágenes y nunca las modificamos o eliminamos","You need to authenticate with ":"Debe autenticarse con","Search images":"Búsqueda de imágenes","Sign Out":"Desconectar","Select From":"Seleccione de","View/Edit Selected":"Ver/Editar Seleccionado","Deselect All":"Deseleccionar Todo","Files & Folders":"Archivos y Carpetas","Edited Images":"Imágenes editadas","Go Back":"Volver","No search results found for":"No hay resultados de búsqueda para","Please select":"Por favor, seleccione","more file":"el archivo más","more files":"el archivo más","File {displayName} is not an accepted file type. The accepted file types are {types}":"Archivo {displayName} no es un tipo de archivo aceptado. Los tipos de archivo aceptados son {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"{displayName} De archivo es demasiado grande. El tamaño aceptado es {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"Nuestro límite de upload de archivo es {maxFiles} {filesText}"};var fr={Add:"Ajouter",My:"Ma",Connect:"Relier",View:"Vue",Upload:"Télécharger",Filter:"Filtrer",Images:"Images",of:"sur",Loading:"Chargement",Revert:"Annuler",Edit:"Modifier",More:"Plus",Uploaded:"Téléchargées","Web Search":"Recherche Internet","Take Picture":"Prendre une Photo","A new page will open to connect your account.":"Une nouvelle page s'ouvrira pour connecter votre compte.","My Device":"Mon appareil","or Drag and Drop, Copy and Paste Files":"ou faites glisser, copier et coller des fichiers","Pick Your Files":"Choisissez vos fichiers","Select Files to Upload":"Sélectionnez les fichiers à télécharger","Selected Files":"Fichiers sélectionnés","Select Files from":"Sélectionnez les fichiers à partir de","We only extract images and never modify or delete them.":"Nous ne faisons qu'extraire les images, et ne les modifions ou supprimons jamais.","You need to authenticate with ":"Vous devez vous authentifier avec ","Search images":"Rechercher des images","Sign Out":"Déconnecter","Select From":"Sélectionnez dans",
"View/Edit Selected":"Afficher/modifier sélectionnée","Deselect All":"Désélectionner tout","Files & Folders":"Fichiers et dossiers","Edited Images":"Images éditées","Go Back":"Retour","No search results found for":"Aucun résultat de recherche trouvé pour","Please select":"Veuillez sélectionner","more file":"plus de fichier","more files":"plus de fichiers","File {displayName} is not an accepted file type. The accepted file types are {types}":"{displayName} De fichier n’est pas un type de fichier accepté. Les types de fichiers acceptés sont {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"Le fichier {displayName} est trop grand. La taille de fichier acceptée est {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"Notre limite de téléchargement de fichier est {maxFiles} {filesText}"};var it={Add:"Aggiungere",My:"Mio",Connect:"Collegare",View:"Visualizza",Upload:"Caricare",Filter:"Filtrare",Images:"Immagini",of:"di",Loading:"Caricamento",Revert:"Annulla",Edit:"Modifica",More:"Più",Uploaded:"Caricato","Web Search":"Scatta Foto","Take Picture":"Fare una foto","A new page will open to connect your account.":"Si aprirà una nuova pagina per collegare il tuo account","My Device":"Il mio dispositivo","or Drag and Drop, Copy and Paste Files":"o trascinare, copiare e incollare file","Pick Your Files":"Selezionare i file","Select Files to Upload":"Selezionare i file da caricare","Selected Files":"File selezionati","Select Files from":"Selezionare i file da","We only extract images and never modify or delete them.":"Abbiamo estratto solo immagini e non modificarli o cancellarli.","You need to authenticate with":"È necessario autenticarsi con","Search images":"Ricerca immagini","Sign Out":"Esci","Select From":"Selezionare da","View/Edit Selected":"Visualizza/Modifica selezionato","Deselect All":"Deselezionare tutto","Files & Folders":"File e cartelle","Edited Images":"Immagini Modificate","Go Back":"Indietro","No search results found for":"È il nostro limite di upload di file","Please select":"Si prega di selezionare","more file":"più file","more files":"più file","File {displayName} is not an accepted file type. The accepted file types are {types}":"{displayName} File non è un tipo di file accettato. I tipi di file accettati sono {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"{displayName} Arquivo é muito grande. O tamanho de arquivo aceito é {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"È il nostro limite di upload di file {maxFiles} {filesText}"};var ja={Add:"追加",My:"私の",Connect:"接続",View:"閲覧",Upload:"アップロード",Filter:"フィルター",Images:"画像",of:"の",Loading:"ロード中",Revert:"元に戻す",Edit:"編集",More:"詳細",Uploaded:"アップロード完了","Web Search":"ウェブ検索","Take Picture":"写真を撮る","A new page will open to connect your account.":"マイページに移動します","My Device":"マイデバイス","or Drag and Drop, Copy and Paste Files":"または、ファイルをドラッグ・アンド・ドロップ、コピー・アンド・ペーストする","Pick Your Files":"ファイルを選択","Select Files to Upload":"アップロードするファイルを選択","Selected Files":"選択済のファイル","Select Files from":"からファイルを選択","We only extract images and never modify or delete them.":"画像の抽出だけを行い、修正や削除をすることはありません","You need to authenticate with ":"を認証してください ","Search images":"画像を検索","Sign Out":"サインアウト","Select From":"から選択","View/Edit Selected":"選択したファイルを閲覧/編集","Deselect All":"選択を全て解除","Files & Folders":"ファイルとフォルダー","Edited Images":"編集された画像","Go Back":"戻る","No search results found for":"に対する検索結果は見つかりませんでした","Please select":"選択してください","more file":"追加ファイル","more files":"追加ファイル","File {displayName} is not an accepted file type. The accepted file types are {types}":"ファイル名{displayName}は、送受信可能なファイル形式ではありません。受け入れ可能なファイル形式は{types}です","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"ファイル名{displayName}の容量が大きすぎます。送受信可能なファイルのサイズは{roundFileSize}です","Our file upload limit is {maxFiles} {filesText}":"一度にアップロードできるファイルの上限は {maxFiles} {filesText}"};var nl={Add:"Toevoegen",My:"Mijn",Connect:"Verbinding maken",View:"Bekijken",Upload:"Uploaden",Filter:"Filtreren",Images:"Afbeeldingen",of:"van de",Loading:"Laden",Revert:"Ongedaan maken",Edit:"Bewerken",More:"Meer",Uploaded:"Geüpload","Web Search":"Zoeken op het web","Take Picture":"Foto nemen","A new page will open to connect your account.":"Een nieuwe pagina wordt geopend om verbinding maken met uw account","My Device":"Mijn apparaat","or Drag and Drop, Copy and Paste Files":"of slepen, kopiëren en plakken van bestanden","Pick Your Files":"Kies uw bestanden","Select Files to Upload":"Selecteer bestanden om te uploaden","Selected Files":"Geselecteerde bestanden","Select Files from":"Selecteer bestanden uit","We only extract images and never modify or delete them.":"We halen alleen afbeeldingen en nooit wijzigen of verwijderen","You need to authenticate with ":"U moet verifiëren bij ","Search images":"Zoek beelden","Sign Out":"Afmelden","Select From":"Selecteren","View/Edit Selected":"Bekijken/bewerken geselecteerd","Deselect All":"Deselecteer alles","Files & Folders":"Bestanden en mappen","Edited Images":"Bewerkte Afbeeldingen","Go Back":"Ga Bacl","No search results found for":"Geen zoekresultaten gevonden voor","Please select":"Gelieve te selecteren","more file":"meer bestand","more files":"meer bestanden","File {displayName} is not an accepted file type. The accepted file types are {types}":"Bestand {displayName} is niet een geaccepteerde bestandstype. De geaccepteerde bestandstypen zijn {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"Bestand {displayName} is te groot. De aanvaarde vijl spanwijdte zit {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"Onze bestand uploaden limiet is {maxFiles} {filesText}"};var pl={Add:"Dodaj",My:"Mój",Connect:"Połączyć",View:"Widok",Upload:"Prześlij pliki",Filter:"Szukaj",Images:"Obrazy",of:"z",Loading:"Ładowanie",Revert:"Cofnij",Edit:"Edytuj",More:"Więcej",Uploaded:"Przesłany","Web Search":"Grafika z internetu","Take Picture":"Zrób zdjęcie","A new page will open to connect your account.":"Nowa strona zostanie otwarta w celu połączenia z Twoim kontem.","My Device":"Moje urządzenie","or Drag and Drop, Copy and Paste Files":"lub przeciągnij i upuść, kopiować i wklejać pliki","Pick Your Files":"Wybierz swoje pliki","Select Files to Upload":"Wybierz pliki do przesłania","Selected Files":"Wybrane pliki","Select Files from":"Wybierz pliki z","We only extract images and never modify or delete them.":"Mamy tylko wyodrębnić obrazy i nigdy zmodyfikować lub usunąć je","You need to authenticate with ":"Musisz uwierzytelnić","Search images":"Szukaj obrazów","Sign Out":"Wyloguj się","Select From":"Wybierz z","View/Edit Selected":"Wyświetl/Edytuj zaznaczone","Deselect All":"Odznacz wszystko","Files & Folders":"Pliki i Foldery","Edited Images":"Edytowane obrazy","Go Back":"Przejdź wstecz","No search results found for":"Brak wyników wyszukiwania","Please select":"Proszę wybrać","more file":"więcej plików","more files":"więcej plików","File {displayName} is not an accepted file type. The accepted file types are {types}":"{displayName} Plik nie jest typem plików akceptowane. Typy plików akceptowane są {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"{displayName} Plik jest zbyt duże. Rozmiar plików akceptowane jest {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"Nasz limit uploadu pliku jest {maxFiles} {filesText}"};var pt={Add:"Adicionar",My:"Meu",Connect:"Conectar-se",View:"Ver",Upload:"Carregar",Filter:"Ordenar",Images:"Imagens",of:"de",Loading:"Carregamento",Revert:"Desfazer",Edit:"Editar",More:"Mais",Uploaded:"Carregado","Web Search":"Buscar imagens na Web","Take Picture":"Tire uma foto","A new page will open to connect your account.":"Uma nova página será aberta para conectar a sua conta.","My Device":"Meu dispositivo","or Drag and Drop, Copy and Paste Files":"ou arrastar, copiar e colar arquivos","Pick Your Files":"Selecione seus arquivos","Select Files to Upload":"Selecionar arquivos para upload","Selected Files":"Arquivos selecionados","Select Files from":"Selecione arquivos de","We only extract images and never modify or delete them.":"Nós apenas extraímos as imagens e nunca a modificamos ou a removemos.","You need to authenticate with ":"Você precisar se autenticar com","Search images":"Procurar fotos","Sign Out":"Desconectar","Select From":"Selecione de","View/Edit Selected":"Exibir/Editar selecionada","Deselect All":"Desmarcar todos","Files & Folders":"Arquivos e pastas","Edited Images":"Imagens editadas","Go Back":"Voltar","No search results found for":"Nenhum resultado de pesquisa encontrado para","Please select":"Por favor selecione","more file":"arquivo mais","more files":"mais arquivos","File {displayName} is not an accepted file type. The accepted file types are {types}":" Arquivo {displayName} não é um tipo de arquivo aceitos. Os tipos de arquivo aceitos são {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"{displayName} Arquivo é muito grande. O tamanho de arquivo aceito é {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"É o nosso limite de upload de arquivo {maxFiles} {filesText}"};var ru={Add:"Добавить",My:"Мой",Connect:"подключить",View:"просмотреть",Upload:"загрузить",Filter:"сортировать по дате",Images:"фото",of:"из",Loading:"загрузки",Revert:"Отменить",Edit:"Изменить",More:"больше",Uploaded:"загружены","Web Search":"Поиск изображений в сети","Take Picture":"Фотографировать","A new page will open to connect your account.":"Новая страница открывается чтобы подключить ваш аккаунт","My Device":"Моё устройство","or Drag and Drop, Copy and Paste Files":"или перетаскивать, копировать и вставлять файлы","Pick Your Files":"Выберите файлы","Select Files to Upload":"Выберите файлы для загрузки","Selected Files":"Выбранные файлы","Select Files from":"Выбрать файлы","We only extract images and never modify or delete them.":"Мы просто извлекаем фото, а никогда не их изменяем или удалим","You need to authenticate with ":"Требуется аутентификация аккаунта с ","Search images":"поиск фото","Sign Out":"выйти","Select From":"выбрать в...","View/Edit Selected":"просмотреть/редактировать","Deselect All":"отмена","Files & Folders":"файлы и папки","Edited Images":"Отредактированные изображения","Go Back":"Вернуться","No search results found for":"Нет результатов поиска найдено для","Please select":"Пожалуйста, выберите","more file":"более файла","more files":"больше файлов","File {displayName} is not an accepted file type. The accepted file types are {types}":"{displayName} Файлов не является типом прикладываемых файлов. Типы прикладываемых файлов являются {types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":"{displayName} Файл слишком большой. Признанных файл имеет размер {roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"Наш предел загрузки файлов {maxFiles} {filesText}"};var zh={Add:"再添加",My:"我的",Connect:"连接",View:"看",Upload:"上传",Filter:"过滤",Images:"图片",of:"/",Loading:"载入中",Revert:"还原",Edit:"编辑",More:"更多",Uploaded:"已上传","Web Search":"为图片搜索网络","Take Picture":"拍照","A new page will open to connect your account.":"一个新页面会打开以关联您的帐户","My Device":"我的设备","or Drag and Drop, Copy and Paste Files":"或拖放，复制和粘贴文件","Pick Your Files":"选择您的文件","Select Files to Upload":"选择要上传的文件","Selected Files":"所选文件","Select Files from":"从中选择文件","We only extract images and never modify or delete them.":"我们只提取图像，从不修改或删除它们","You need to authenticate with":"您需要验证","Search images":"搜索图像","Sign Out":"登出","Select From":"选择自","View/Edit Selected":"查看/编辑所选项","Deselect All":"取消选择全部","Files & Folders":"文件和文件夹","Edited Images":"编辑的图像","Go Back":"返回","No search results found for":"未找到搜索结果","Please select":"请选择","more file":"更多文件","more files":"更多文件","File {displayName} is not an accepted file type. The accepted file types are {types}":" 文件{displayName}不是可接受的文件类型。 可接受的文件类型为{types}","File {displayName} is too big. The accepted file size is less than {roundFileSize}":" 文件{displayName}太大。 可接受的文件大小为{roundFileSize}","Our file upload limit is {maxFiles} {filesText}":"我们的文件上传限制为 {maxFiles} {filesText}"};var languages={da:da,de:de,en:en,es:es,fr:fr,it:it,ja:ja,nl:nl,pl:pl,pt:pt,ru:ru,zh:zh};var errors=function errors(){var lang=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"en";var phrases=languages[lang];return{ERROR_FILE_NOT_ACCEPTABLE:phrases["File {displayName} is not an accepted file type. The accepted file types are {types}"],ERROR_FILE_TOO_BIG:phrases["File {displayName} is too big. The accepted file size is less than {roundFileSize}"],ERROR_MAX_FILES_REACHED:phrases["Our file upload limit is {maxFiles} {filesText}"]}};var log$1$1=logger$3.context("picker");var genUniqueHandle=function genUniqueHandle(file){return file.source+file.path};var getQueueIndex=function getQueueIndex(queue,file){return queue.map(function(f){return genUniqueHandle(f)}).indexOf(genUniqueHandle(file))};var uploadQueue=function uploadQueue(apiClient){var initialState=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var maxSimultaneousUploads=4;var normalizeFileForUploadQueue=function normalizeFileForUploadQueue(file){if(file instanceof File||file instanceof Blob){file={source:"local_file_system",mimetype:file.type,name:file.name,path:file.path||file.name,size:file.size,originalFile:file}}if(file.source==="dragged-from-web"){file.name=file.url.split("/").pop();file.path=file.url;file.mimetype="text/html";var ext=file.url.split(".").pop();var allowed=["jpg","jpeg","png","tiff","gif","bmp"];if(ext&&allowed.indexOf(ext.toLowerCase())!==-1){file.thumbnail=file.url;file.mimetype="image/"+ext}}file.uploadToken=guid(16);file.progress=0;file.progressSize=0;return file};var findFile=function findFile(state,uploadToken){var searchIn=function searchIn(list){var file=void 0;list.some(function(f){if(f.uploadToken===uploadToken){file=f;return true}return false});return file};return searchIn(state.waiting)||searchIn(state.uploading)||searchIn(state.done)||searchIn(state.failed)};var addFile=function addFile(context,file){if(getQueueIndex(context.getters.filesWaiting,file)!==-1){context.commit("CANCEL_UPLOAD",file.uploadToken);context.commit("DESELECT_FILE",file);return}if(file.folder){context.dispatch("addCloudFolder",{name:file.source,path:file.path});return}var maxFilesReached=function maxFilesReached(){if(context.getters.allFilesInQueueCount===context.getters.maxFiles){var filesText=context.getters.maxFiles===1?"file":"files";var errorMsg=errors(context.getters.lang).ERROR_MAX_FILES_REACHED.replace("{maxFiles}",context.getters.maxFiles).replace("{filesText}",filesText);context.dispatch("showNotification",errorMsg);return true}return false};var fileIsSmallEnough=function fileIsSmallEnough(normalizedFile){if(context.getters.maxSize===undefined){return true}if(normalizedFile.size<context.getters.maxSize){return true}if(!normalizedFile.size){return true}var errorMsg=errors(context.getters.lang).ERROR_FILE_TOO_BIG.replace("{displayName}",displayName(normalizedFile)).replace("{roundFileSize}",roundFileSize(context.getters.maxSize));context.dispatch("showNotification",errorMsg);return false};var fileIsAcceptable=function fileIsAcceptable(normalizedFile){if(canAcceptThisFile(normalizedFile,context.getters.accept)){return true}var errorMsg=errors(context.getters.lang).ERROR_FILE_NOT_ACCEPTABLE.replace("{displayName}",displayName(normalizedFile)).replace("{types}",context.getters.accept);context.dispatch("showNotification",errorMsg);return false};var fireOnFileSelected=function fireOnFileSelected(normalizedFile){if(context.getters.onFileSelected!==undefined){try{var customizedFile=context.getters.onFileSelected(convertFileForOutsideWorld(normalizedFile));if(customizedFile&&typeof customizedFile.name==="string"){normalizedFile.name=customizedFile.name}return true}catch(err){context.dispatch("showNotification",err.message);return false}}return true};var startUploadImmediatelyMaybe=function startUploadImmediatelyMaybe(){if(context.getters.startUploadingWhenMaxFilesReached===true&&context.getters.filesWaiting.length===context.getters.maxFiles){context.dispatch("startUploading",true)}else if(context.getters.uploadInBackground){context.dispatch("startUploading")}};if(!maxFilesReached()){var normalizedFile=normalizeFileForUploadQueue(file);if(fileIsAcceptable(normalizedFile)&&fireOnFileSelected(normalizedFile)&&fileIsSmallEnough(normalizedFile)){log$1$1("Selected file:",file);context.commit("MARK_FILE_AS_WAITING",normalizedFile);startUploadImmediatelyMaybe();if(isImage(normalizedFile)&&context.getters.maxFiles===1&&!context.getters.disableTransformer&&!context.getters.uploadStarted){context.dispatch("stageForTransform",normalizedFile)}else if(context.getters.maxFiles===1){context.commit("CHANGE_ROUTE",["summary"]);context.commit("UPDATE_MOBILE_NAV_ACTIVE",false)}else if(context.getters.maxFiles>1&&context.getters.allFilesInQueueCount===context.getters.maxFiles&&context.getters.route[0]!=="summary"){context.commit("CHANGE_ROUTE",["summary"]);context.commit("UPDATE_MOBILE_NAV_ACTIVE",false)}else if(context.getters.maxFiles>1&&normalizedFile.source==="local_file_system"&&context.getters.route[0]!=="summary"){context.commit("CHANGE_ROUTE",["summary"]);context.commit("UPDATE_MOBILE_NAV_ACTIVE",false)}}}};var stageForTransform=function stageForTransform(context,normalizedFile){if(normalizedFile.source==="local_file_system"){var url=window.URL.createObjectURL(normalizedFile.originalFile);context.commit("SET_IMAGE_URL",url)}context.commit("SET_FILE_FOR_TRANSFORM",normalizedFile);context.commit("SET_IMAGE_UPLOADING",true);context.dispatch("uploadFileToTemporaryLocation",normalizedFile.uploadToken).then(function(tempFile){context.commit("SET_IMAGE_UPLOADING",false);if(context.getters.originalUrl!==tempFile.url){context.commit("SET_ORIGINAL_URL",tempFile.url);context.commit("SET_IMAGE_URL",tempFile.url)}}).catch(function(){context.commit("SET_IMAGE_LOADING",false);context.commit("SET_IMAGE_UPLOADING",false)});context.commit("CHANGE_ROUTE",["transform",normalizedFile.uploadToken]);context.commit("UPDATE_MOBILE_NAV_ACTIVE",false)};var startFakeProgress=function startFakeProgress(context,file){var clamp=function clamp(n,min,max){if(n<min)return min;if(n>max)return max;return n};var inc=function inc(){var n=file.progress/100;var amount=void 0;if(n>1){return}if(n>=0&&n<.2)amount=.1;else if(n>=.2&&n<.5)amount=.04;else if(n>=.5&&n<.8)amount=.02;else if(n>=.8&&n<.99)amount=.005;else{amount=0}n=clamp(n+amount,0,.994);context.commit("SET_FILE_UPLOAD_PROGRESS",{file:file,progress:Math.round(n*100)})};var work=function work(){setTimeout(function(){if(file.progress===100)return;inc();work()},200)};return work()};var uploadOne=function uploadOne(context,manualFile){var file=manualFile||context.state.waiting[0];var uploadConfig={progressInterval:500,onProgress:function onProgress(progressEvent){if(context.getters.uploadStarted){context.commit("SET_FILE_UPLOAD_PROGRESS",{file:file,progress:progressEvent.totalPercent,progressSize:roundFileSize(progressEvent.totalBytes)});if(context.getters.onFileUploadProgress!==undefined){context.getters.onFileUploadProgress(convertFileForOutsideWorld(file),progressEvent)}}}};var token={};var pendingRequest=void 0;if(file.tempStorage&&!file.transformed){if(context.getters.uploadStarted){context.commit("SET_FILE_UPLOAD_PROGRESS",{file:file,progress:100})}pendingRequest=Promise.resolve(file.tempStorage)}else if(file.transformed&&!file.transformedFile){pendingRequest=apiClient.storeURL(file.transformed,_extends$1({},context.getters.storeTo,{filename:file.name}),token)}else if(file.transformedFile){if(context.getters.uploadStarted){context.commit("SET_FILE_UPLOAD_PROGRESS",{file:file,progress:100})}pendingRequest=Promise.resolve(file.transformedFile)}else if(file.source==="local_file_system"){pendingRequest=apiClient.upload(file.originalFile,uploadConfig,_extends$1({},context.getters.storeTo,{filename:file.name}),token)}else if(file.source==="source-url"||file.source==="dragged-from-web"){pendingRequest=apiClient.storeURL(file.path,_extends$1({},context.getters.storeTo,{filename:file.name}),token)}else if(file.sourceKind==="cloud"){if(context.getters.preferLinkOverStore){pendingRequest=apiClient.cloud(file.source).link(file.path)}else{pendingRequest=apiClient.cloud(file.source).store(file.path,context.getters.storeTo,token)}}else{throw new Error("Can't upload this file")}context.commit("MARK_FILE_AS_UPLOADING",file);if(token.cancel){context.commit("SET_CANCEL_TOKEN",{uploadToken:file.uploadToken,token:token})}log$1$1("Upload started:",file);if(context.getters.onFileUploadStarted!==undefined){context.getters.onFileUploadStarted(convertFileForOutsideWorld(file))}if(file.transformed||file.sourceKind==="cloud"||file.source==="dragged-from-web"){startFakeProgress(context,file)}pendingRequest.then(function(uploadedFileMetadata){if(context.getters.uploadStarted&&(file.transformed||file.sourceKind==="cloud"||file.source==="dragged-from-web")){context.commit("SET_FILE_UPLOAD_PROGRESS",{file:file,progress:100})}var uploadedFile=_extends$1({},file,uploadedFileMetadata);context.commit("MARK_FILE_AS_DONE",{file:file,uploadMetadata:uploadedFile});context.commit("REMOVE_CANCEL_TOKEN",file.uploadToken);if(context.getters.onFileUploadFinished!==undefined){context.getters.onFileUploadFinished(convertFileForOutsideWorld(uploadedFile))}log$1$1("Upload done:",file)}).catch(function(error){context.commit("SET_FILE_UPLOAD_PROGRESS",{file:file,progress:100});context.commit("MARK_FILE_AS_FAILED",file);context.commit("REMOVE_CANCEL_TOKEN",file.uploadToken);if(context.getters.onFileUploadFailed!==undefined){context.getters.onFileUploadFailed(convertFileForOutsideWorld(file),error)}if(error instanceof Error){log$1$1("Upload failed:",file,error.message)}else{log$1$1("Upload failed:",file,error)}});return pendingRequest};var canUploadMore=function canUploadMore(context){return context.state.uploading.length<maxSimultaneousUploads&&context.state.waiting.length>0};var allUploadsDone=function allUploadsDone(context){return context.state.waiting.length===0&&context.state.uploading.length===0};var finishUploadsMaybe=function finishUploadsMaybe(context){if(allUploadsDone(context)&&context.getters.uploadStarted){context.dispatch("allUploadsDone")}};var uploadMoreMaybe=function uploadMoreMaybe(context){if(canUploadMore(context)){context.dispatch("uploadOne").then(function(){return context.dispatch("uploadMoreMaybe")}).catch(function(){return context.dispatch("uploadMoreMaybe")});context.dispatch("uploadMoreMaybe")}else{context.dispatch("finishUploadsMaybe")}};var startUploading=function startUploading(context){var manual=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(context.getters.uploadStarted){return}if(manual){context.commit("SET_UPLOAD_STARTED",true);context.commit("UPDATE_MOBILE_NAV_ACTIVE",false);if(context.getters.route[0]!=="transform"){context.commit("CHANGE_ROUTE",["summary"])}}context.dispatch("uploadMoreMaybe")};var uploadFileToTemporaryLocation=function uploadFileToTemporaryLocation(context,uploadToken){var file=findFile(context.state,uploadToken);var isUploading=Object.keys(context.state.pendingTokens).indexOf(uploadToken)!==-1;if(!isUploading){return context.dispatch("uploadOne",file).then(function(metadata){context.dispatch("finishUploadsMaybe");return metadata})}return new Promise(function(resolve,reject){var check=function check(){var f=findFile(context.state,uploadToken);if(!f){resolve(null)}else if(f.tempStorage!==undefined){resolve(f.tempStorage)}else{var failed=context.getters.filesFailed.map(function(_f){return _f.uploadToken});if(failed.indexOf(uploadToken)!==-1){reject()}else{setTimeout(check,100)}}};check()})};initialState=_extends$1({uploadStarted:false,waiting:[],uploading:[],done:[],failed:[],stagedForTransform:{},pendingTokens:{}},initialState);var mutations={SET_UPLOAD_STARTED:function SET_UPLOAD_STARTED(state,value){state.uploadStarted=value},MARK_FILE_AS_WAITING:function MARK_FILE_AS_WAITING(state,file){state.waiting.push(file)},DESELECT_FILE:function DESELECT_FILE(state,file){var index=getQueueIndex(state.waiting,file);var index2=getQueueIndex(state.uploading,file);var index3=getQueueIndex(state.done,file);var index4=getQueueIndex(state.failed,file);var result=[index>=0,index2>=0,index3>=0,index4>=0].indexOf(true);switch(result){case-1:throw new Error("Illegal operation for given file");case 0:state.waiting.splice(index,1);break;case 1:state.uploading.splice(index2,1);break;case 2:state.done.splice(index3,1);break;case 3:state.failed.splice(index4,1);break;default:break}},DESELECT_FOLDER:function DESELECT_FOLDER(state,folder){var removeFiles=function removeFiles(queue){return queue.filter(function(f){if(f.sourceKind!=="cloud"){return true}return f.path.indexOf(folder.path)<0})};state.waiting=removeFiles(state.waiting);state.uploading=removeFiles(state.uploading);state.done=removeFiles(state.done);state.failed=removeFiles(state.failed)},DESELECT_ALL_FILES:function DESELECT_ALL_FILES(state){state.waiting.splice(0,state.waiting.length);state.uploading.splice(0,state.uploading.length);state.done.splice(0,state.done.length);state.failed.splice(0,state.failed.length)},MARK_FILE_AS_UPLOADING:function MARK_FILE_AS_UPLOADING(state,file){var index=getQueueIndex(state.waiting,file);if(index>-1){state.waiting.splice(index,1);state.uploading.push(file)}},MARK_FILE_AS_DONE:function MARK_FILE_AS_DONE(state,_ref){var file=_ref.file,uploadMetadata=_ref.uploadMetadata;var index=getQueueIndex(state.uploading,file);if(index>=0){state.uploading.splice(index,1);state.done.push(file);if(file.transformed){Vue$3.set(file,"transformedFile",uploadMetadata)}else{Vue$3.set(file,"tempStorage",uploadMetadata)}Object.keys(uploadMetadata).forEach(function(key){Vue$3.set(file,key,uploadMetadata[key])})}},MARK_FILE_AS_FAILED:function MARK_FILE_AS_FAILED(state,file){var index=getQueueIndex(state.uploading,file);if(index>=0){state.uploading.splice(index,1);state.failed.push(file)}},SET_FILE_UPLOAD_PROGRESS:function SET_FILE_UPLOAD_PROGRESS(state,_ref2){var file=_ref2.file,progress=_ref2.progress,progressSize=_ref2.progressSize;Vue$3.delete(file,"progress");Vue$3.set(file,"progress",progress);Vue$3.set(file,"progressSize",progressSize)},SET_FILE_FOR_TRANSFORM:function SET_FILE_FOR_TRANSFORM(state,file){state.stagedForTransform=file},SET_FILE_TRANSFORMATION:function SET_FILE_TRANSFORMATION(state,transformedUrl){var file=state.stagedForTransform;Vue$3.set(file,"transformed",transformedUrl);var index=getQueueIndex(state.done,file);var failedIndex=getQueueIndex(state.failed,file);var index2=getQueueIndex(state.uploading,file);var index3=getQueueIndex(state.waiting,file);if(index>=0){state.done.splice(index,1)}else if(index2>=0){state.uploading.splice(index2,1)}else if(failedIndex>=0){state.failed.splice(index,1)}if(index3<0){state.waiting.push(file)}},REMOVE_FILE_TRANSFORMATION:function REMOVE_FILE_TRANSFORMATION(state,uploadToken){var file=findFile(state,uploadToken);Vue$3.delete(file,"transformed");Vue$3.delete(file,"transformedFile");if(file.originalFile&&file.originalFile.size){Vue$3.set(file,"size",file.originalFile.size)}var index=getQueueIndex(state.done,file);var failedIndex=getQueueIndex(state.failed,file);var index2=getQueueIndex(state.uploading,file);var index3=getQueueIndex(state.waiting,file);if(index>=0){state.done.splice(index,1)}else if(index2>=0){state.uploading.splice(index2,1)}else if(failedIndex>=0){state.failed.splice(index,1)}if(index3<0){state.waiting.push(file)}},REMOVE_SOURCE_FROM_WAITING:function REMOVE_SOURCE_FROM_WAITING(state,source){var newWaiting=state.waiting.filter(function(f){return f.source!==source});state.waiting=newWaiting},REMOVE_CLOUDS_FROM_WAITING:function REMOVE_CLOUDS_FROM_WAITING(state){var newWaiting=state.waiting.filter(function(f){return f.sourceKind!=="cloud"});state.waiting=newWaiting},SET_CANCEL_TOKEN:function SET_CANCEL_TOKEN(state,_ref3){var uploadToken=_ref3.uploadToken,token=_ref3.token;state.pendingTokens[uploadToken]=token},REMOVE_CANCEL_TOKEN:function REMOVE_CANCEL_TOKEN(state,uploadToken){delete state.pendingTokens[uploadToken]},CANCEL_UPLOAD:function CANCEL_UPLOAD(state,uploadToken){var token=state.pendingTokens[uploadToken];if(token&&token.cancel){token.cancel();delete state.pendingTokens[uploadToken]}},CANCEL_FOLDER_UPLOAD:function CANCEL_FOLDER_UPLOAD(state,folder){var uploadingQueues=state.waiting.concat(state.uploading);var uploadTokens=uploadingQueues.filter(function(f){if(f.sourceKind!=="cloud"){return true}return f.path.indexOf(folder.path)>=0}).map(function(file){return file.uploadToken});uploadTokens.forEach(function(uploadToken){var token=state.pendingTokens[uploadToken];if(token&&token.cancel){token.cancel();delete state.pendingTokens[uploadToken]}})},CANCEL_ALL_UPLOADS:function CANCEL_ALL_UPLOADS(state){var keys=Object.keys(state.pendingTokens);keys.forEach(function(k){var token=state.pendingTokens[k];if(token&&token.cancel){token.cancel()}});state.pendingTokens={}}};var actions={addFile:addFile,finishUploadsMaybe:finishUploadsMaybe,startUploading:startUploading,stageForTransform:stageForTransform,uploadMoreMaybe:uploadMoreMaybe,uploadOne:uploadOne,uploadFileToTemporaryLocation:uploadFileToTemporaryLocation,removeTransformation:function removeTransformation(context,file){context.commit("REMOVE_FILE_TRANSFORMATION",file.uploadToken);context.commit("RESET_TRANSFORMATIONS")},deselectAllFiles:function deselectAllFiles(context){context.commit("CANCEL_ALL_UPLOADS");context.commit("DESELECT_ALL_FILES")},deselectFolder:function deselectFolder(context,folder){context.commit("CANCEL_FOLDER_UPLOAD",folder);context.commit("DESELECT_FOLDER",folder)}};var getters={filesWaiting:function filesWaiting(st,_getters){if(_getters.uploadStarted){return st.waiting}return[].concat(st.waiting,st.uploading,st.done,st.failed).sort(function(a,b){return a.size-b.size})},filesUploading:function filesUploading(st,_getters){if(_getters.uploadStarted){return st.uploading}return[]},filesDone:function filesDone(st){return st.done},filesFailed:function filesFailed(st){return st.failed},allFilesInQueue:function allFilesInQueue(st,_getters){if(!_getters.uploadStarted){return _getters.filesWaiting}return[].concat(_getters.filesWaiting,_getters.filesUploading,_getters.filesDone,_getters.filesFailed)},allFilesInQueueCount:function allFilesInQueueCount(st,_getters){if(!_getters.uploadStarted){return _getters.filesWaiting.length}return _getters.filesWaiting.length+_getters.filesUploading.length+_getters.filesDone.length+_getters.filesFailed.length},filesNeededCount:function filesNeededCount(state,_getters){return _getters.minFiles-_getters.filesWaiting.length},uploadStarted:function uploadStarted(st){return st.uploadStarted},canStartUpload:function canStartUpload(state,_getters){return _getters.filesWaiting.length>=_getters.minFiles},canAddMoreFiles:function canAddMoreFiles(state,_getters){return _getters.filesWaiting.length<_getters.maxFiles},stagedForTransform:function stagedForTransform(st){return st.stagedForTransform}};return{state:initialState,mutations:mutations,actions:actions,getters:getters}};var getFolderPath=function getFolderPath(file){var arr=file.path.split("/");arr.pop();if(file.folder){return file.path}return arr.join("/")};var FileArray={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm.files.length>0?_c("div",{staticClass:"fsp-grid"},[_c("div",{staticClass:"fsp-grid__label"},[_vm._v(_vm._s(_vm.t("Files & Folders")))]),_vm._l(_vm.onlyFolders,function(folder){return _c("div",{staticClass:"fsp-grid__cell",class:{"fsp-grid__cell--selected":_vm.isSelected(folder)},on:{click:function click($event){_vm.handleFolderClick(folder)}}},[_vm.isSelected(folder)?_c("span",{staticClass:"fsp-badge fsp-badge--bright fsp-badge--file"
},[_vm._v(_vm._s(_vm.getFileCount(folder)))]):_c("span",{staticClass:"fsp-grid__icon",class:_vm.getIconClass("fsp-grid__icon-folder",folder)}),_vm._v(" "),_c("span",{staticClass:"fsp-grid__text",class:{"fsp-grid__text--selected":_vm.isSelected(folder)}},[_vm._v(_vm._s(folder.name))]),_vm._v(" "),_vm.isSelected(folder)?_c("span",{staticClass:"fsp-grid__icon--selected",attrs:{title:"Deselect folder"},on:{click:function click($event){$event.stopPropagation();_vm.deselectFolder(folder)}}}):_vm._e(),_vm._v(" "),!_vm.isLoading(folder)&&!_vm.isSelected(folder)?_c("span",{staticClass:"fsp-grid__icon-folder-add",attrs:{title:"Add folder"},on:{click:function click($event){$event.stopPropagation();_vm.addFile(folder)}}}):_vm._e(),_vm.isLoading(folder)?_c("div",{staticClass:"fsp-loading--folder"}):_vm._e()])}),_vm._l(_vm.onlyFiles,function(file){return _c("div",{staticClass:"fsp-grid__cell",class:{"fsp-grid__cell--selected":_vm.isSelected(file)},on:{click:function click($event){_vm.addFile(file)}}},[_vm.isAudio(file)?_c("span",{staticClass:"fsp-grid__icon",class:_vm.getIconClass("fsp-grid__icon-audio",file)}):file.mimetype==="application/pdf"?_c("span",{staticClass:"fsp-grid__icon",class:_vm.getIconClass("fsp-grid__icon-pdf",file)}):file.mimetype==="application/zip"?_c("span",{staticClass:"fsp-grid__icon",class:_vm.getIconClass("fsp-grid__icon-zip",file)}):_c("span",{staticClass:"fsp-grid__icon",class:_vm.getIconClass("fsp-grid__icon-file",file)}),_vm._v(" "),_c("span",{staticClass:"fsp-grid__text",class:{"fsp-grid__text--selected":_vm.isSelected(file)}},[_vm._v(_vm._s(file.name))]),_vm._v(" "),_vm.isSelected(file)?_c("span",{staticClass:"fsp-grid__icon--selected"}):_vm._e()])})],2):_vm._e()},staticRenderFns:[],computed:_extends$1({},index_esm.mapGetters(["cloudFolders","filesWaiting"]),{onlyFolders:function onlyFolders(){return this.files.filter(function(f){return f.folder})},onlyFiles:function onlyFiles(){return this.files.filter(function(f){return!f.folder})}}),methods:_extends$1({},index_esm.mapActions(["addFile","deselectFolder","goToDirectory"]),{handleFolderClick:function handleFolderClick(file){this.goToDirectory(file)},getIconClass:function getIconClass(cls,file){var _ref;return _ref={},defineProperty$1(_ref,cls,!this.isSelected(file)),defineProperty$1(_ref,cls+"--selected",this.isSelected(file)),_ref},isAudio:function isAudio(file){return file&&file.mimetype&&file.mimetype.indexOf("audio/")!==-1},isLoading:function isLoading(file){if(file.folder){return this.cloudFolders[file.path]&&this.cloudFolders[file.path].loading}return false},isSelected:function isSelected(file){if(file.folder){return this.filesWaiting.filter(function(f){return getFolderPath(f)===file.path}).length>0}return getQueueIndex(this.filesWaiting,file)!==-1},getFileCount:function getFileCount(file){return this.filesWaiting.filter(function(f){return getFolderPath(f)===file.path}).length}}),props:["files"]};var ImageArray={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm.images&&_vm.images.length>0?_c("div",{staticClass:"fsp-grid"},[_c("div",{staticClass:"fsp-grid__label"},[_vm._v(_vm._s(_vm.t("Images")))]),_vm._l(_vm.images,function(image){return _c("div",{key:image.path,staticClass:"fsp-image-grid__cell",class:{"fsp-image-grid__cell--selected":_vm.isSelected(image)},on:{click:function click($event){_vm.addFile(image)}}},[_vm.isSelected(image)?_c("span",{staticClass:"fsp-image-grid__icon--selected"}):_vm._e(),_vm._v(" "),_c("img",{staticClass:"fsp-image-grid__image",class:{"fsp-image-grid__image--selected":_vm.isSelected(image)},attrs:{src:image.thumbnail,alt:image.name}}),_vm.isSelected(image)?_c("div",{staticClass:"fsp-image-grid__cell--dark"}):_vm._e()])})],2):_vm._e()},staticRenderFns:[],computed:_extends$1({},index_esm.mapGetters(["filesWaiting"])),methods:_extends$1({},index_esm.mapActions(["addFile"]),{isSelected:function isSelected(file){return getQueueIndex(this.filesWaiting,file)!==-1}}),props:["images"]};var CloudGrid={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_c("file-array",{attrs:{files:_vm.arrayOfFiles}}),_vm.arrayOfFiles.length&&_vm.arrayOfImages.length?_c("hr",{staticClass:"fsp-grid__separator"}):_vm._e(),_c("image-array",{attrs:{images:_vm.arrayOfImages}})],1)},staticRenderFns:[],components:{FileArray:FileArray,ImageArray:ImageArray},computed:_extends$1({},index_esm.mapGetters(["listForCurrentCloudPath"]),{arrayOfImages:function arrayOfImages(){return this.listForCurrentCloudPath.filter(isImage)},arrayOfFiles:function arrayOfFiles(){return this.listForCurrentCloudPath.filter(function(el){return!isImage(el)})}})};var Breadcrumbs={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-breadcrumb__container"},[_vm.crumbs.length<3?_c("span",_vm._l(_vm.crumbs,function(crumb){return _c("span",{staticClass:"fsp-breadcrumb__label",on:{click:function click($event){_vm.handleClick(crumb)}}},[_vm._v(_vm._s(crumb.label)+" ")])})):_c("span",_vm._l(_vm.truncateCrumbs(_vm.crumbs),function(crumb){return _c("span",{staticClass:"fsp-breadcrumb__label",on:{click:function click($event){_vm.handleClick(crumb)}}},[_vm._v(_vm._s(crumb.label))])}))])},staticRenderFns:[],props:["crumbs","onClick"],methods:{truncateCrumbs:function truncateCrumbs(crumbs){var newCrumbs=[crumbs[0]];var lastTwoCrumbs=crumbs.filter(function(crumb,i){return i>=crumbs.length-2});newCrumbs.push.apply(newCrumbs,[{path:"",label:"..."}].concat(toConsumableArray$1$1(lastTwoCrumbs)));return newCrumbs},handleClick:function handleClick(crumb){if(crumb.path&&crumb.label){this.onClick(crumb)}return}}};var Loading={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-loading"})},staticRenderFns:[]};var last=function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined};var Cloud={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-cloud"},[_vm.cloudLoading||_vm.isPrefetching?_c("loading"):_vm._e(),_vm.currentCloudAuthorized!==true?_c("div",{staticClass:"fsp-source-auth__wrapper"},[_c("span",{staticClass:"fsp-icon-auth fsp-icon fsp-source-auth__el",class:"fsp-icon--"+_vm.currentCloudName}),_c("div",{staticClass:"fsp-text__title fsp-source-auth__el"},[_vm._v(_vm._s(_vm.t("Select Files from"))+" "+_vm._s(_vm.currentDisplay.label))]),_c("div",{staticClass:"fsp-source-auth__el"},[_c("span",{staticClass:"fsp-text__subheader"},[_vm._v(_vm._s(_vm.t("You need to authenticate with "))+" "),_c("span",{staticClass:"fsp-cloudname"},[_vm._v(_vm._s(_vm.currentDisplay.label))]),_vm._v("."),_c("div",[_vm._v(_vm._s(_vm.t("We only extract images and never modify or delete them.")))])])]),_c("button",{staticClass:"fsp-button__auth fsp-source-auth__el",attrs:{type:"button"},on:{click:_vm.authorize}},[_vm._v(_vm._s(_vm.t("Connect"))+" "),_c("span",{staticClass:"fsp-cloudname"},[_vm._v(_vm._s(_vm.currentDisplay.label))])]),_c("div",{staticClass:"fsp-source-auth__el"},[_c("span",{staticClass:"fsp-text__subheader"},[_vm._v(_vm._s(_vm.t("A new page will open to connect your account.")))])])]):_vm._e(),_vm.currentCloudAuthorized===true?_c("div",[_vm.currentCrumbs.length>1?_c("div",{staticClass:"fsp-cloud-breadcrumbs"},[_c("breadcrumbs",{attrs:{crumbs:_vm.currentCrumbs,"on-click":_vm.updatePath}})],1):_vm._e(),_c("cloud-grid")],1):_vm._e()],1)},staticRenderFns:[],components:{CloudGrid:CloudGrid,Breadcrumbs:Breadcrumbs,Loading:Loading},computed:_extends$1({},index_esm.mapGetters(["route","currentCloudAuthorized","currentCloudName","currentCloudPath","listForCurrentCloudPath","cloudFolders","cloudLoading","cloudsPrefetching"]),{isPrefetching:function isPrefetching(){var path=this.currentCloudPath;var pathURL=path.length>0?last(path):path;var key=this.currentCloudName+pathURL;return this.cloudsPrefetching[key]},currentDisplay:function currentDisplay(){var displayType=this.route[1];return getByName(displayType)},currentCrumbs:function currentCrumbs(){var _this=this;var rootCrumb=[{label:this.currentDisplay.label,path:"root"}];if(this.currentCloudPath.length){return rootCrumb.concat(this.currentCloudPath.map(function(path){return{label:_this.cloudFolders[path].name,path:path}}))}return rootCrumb}}),methods:_extends$1({},index_esm.mapActions(["showCloudPath"]),{authorize:function authorize(){var _this2=this;var win=window.open(this.currentCloudAuthorized.authUrl,"_blank");var waitUntilWindowClosed=function waitUntilWindowClosed(){if(win.closed!==true){setTimeout(waitUntilWindowClosed,10)}else{_this2.showCloudPath({name:_this2.route[1],path:_this2.route[2]})}};waitUntilWindowClosed()},updatePath:function updatePath(crumb){var index=this.currentCloudPath.indexOf(crumb.path);var newPath=this.currentCloudPath.filter(function(path,i){return i<=index});var rootPath=["source",this.currentCloudName];if(crumb.path==="root"){this.$store.commit("CHANGE_ROUTE",rootPath)}else{rootPath.push(newPath);this.$store.commit("CHANGE_ROUTE",rootPath)}}}),watch:{route:{deep:true,immediate:true,handler:function handler(route){var name=route[1];var path=route[2];this.showCloudPath({name:name,path:path})}}}};var checkMobile=function checkMobile(obj){var isMobileDevice=new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i");return isMobileDevice.test(obj)};var clone=function clone(obj){return JSON.parse(JSON.stringify(obj))};var MobileMenuButton={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-mobile-menu",on:{click:function click($event){_vm.toggleNav()}}},[_c("div",{staticClass:"fsp-nav__menu-toggle"})])},staticRenderFns:[],computed:_extends$1({},index_esm.mapGetters(["mobileNavActive","route"]),{hideLocalOnMobile:function hideLocalOnMobile(){var newRouteHistory=clone(this.route);var lastRoute=newRouteHistory.pop();if(checkMobile(navigator.userAgent)&&lastRoute.indexOf("local_file_system")!==-1){return true}return!this.mobileNavActive}}),methods:_extends$1({},index_esm.mapActions(["updateMobileNavActive"]),{toggleNav:function toggleNav(){this.updateMobileNavActive(this.hideLocalOnMobile)}})};var ContentHeader={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-header",class:{"fsp-hide-header":_vm.hideHeader}},[_vm.source&&_vm.sourceCloud&&!_vm.mobileNavActive?_c("span",{staticClass:"fsp-header-icon",class:"fsp-navbar--"+_vm.source.name}):_vm._e(),_vm._v(" "),_vm.source&&!_vm.sourceCloud&&!_vm.mobileNavActive?_c("span",{staticClass:"fsp-header-text--visible"},[_vm._v(_vm._s(_vm.t(_vm.source.label))+" ")]):_vm._e(),_vm.mobileNavActive?_c("span",{staticClass:"fsp-header-text"},[_vm._v(_vm._s(_vm.t("Select From")))]):_vm._e(),!_vm.mobileNavActive?_vm._t("default"):_vm._e(),!_vm.hideMenu?_c("mobile-menu-button"):_vm._e(),_c("span",{staticClass:"fsp-picker__close-button fsp-icon--close-modal",on:{click:_vm.closePicker}})],2)},staticRenderFns:[],computed:_extends$1({},index_esm.mapGetters(["mobileNavActive"]),{sourceCloud:function sourceCloud(){return this.source.ui==="cloud"}}),components:{MobileMenuButton:MobileMenuButton},methods:{closePicker:function closePicker(){this.$root.$destroy()}},props:["source","hideHeader","hideMenu"]};var FooterNav={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-footer",class:{"fsp-footer--appeared":_vm.isVisible}},[_c("div",{staticClass:"fsp-nav"},[_c("span",{staticClass:"fsp-nav__left"},[_vm._t("nav-left")],2),_c("span",{staticClass:"fsp-nav__center",style:{width:_vm.fullWidth?"100%":null}},[_vm._t("nav-center")],2),_c("span",{staticClass:"fsp-nav__right"},[_vm._t("nav-right")],2)])])},staticRenderFns:[],props:["isVisible","fullWidth"]};var ImageSearch={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-image-search",class:{"fsp-image-search--results":_vm.resultsFound}},[_c("div",{staticClass:"fsp-image-search__form-container"},[_c("form",{staticClass:"fsp-image-search__form",on:{submit:function submit($event){$event.preventDefault();_vm.focusAndFetch($event)}}},[_c("input",{ref:"searchInput",staticClass:"fsp-image-search__input",attrs:{placeholder:_vm.placeholderText,disabled:_vm.isSearching},domProps:{value:_vm.imageSearchInput},on:{input:_vm.updateInput}}),_vm._v(" "),_vm.imageSearchInput===_vm.imageSearchName?_c("button",{staticClass:"fsp-image-search__submit",on:{click:function click($event){$event.preventDefault();_vm.clearSearch($event)}}},[_c("span",{staticClass:"fsp-image-search__icon--reset"})]):_vm._e(),_vm._v(" "),_vm.imageSearchInput!==_vm.imageSearchName?_c("button",{staticClass:"fsp-image-search__submit",attrs:{type:"submit"}},[_c("span",{class:{"fsp-image-search__icon--search":true,"fsp-image-search__icon--searching":_vm.isSearching}})]):_vm._e()])]),_c("div",{staticClass:"fsp-image-search__results",class:{"fsp-content--selected-items":_vm.filesWaiting.length}},[_c("image-array",{attrs:{images:_vm.imageSearchResults}})],1)])},staticRenderFns:[],components:{ImageArray:ImageArray},computed:_extends$1({},index_esm.mapGetters(["isSearching","noResultsFound","resultsFound","imageSearchName","imageSearchInput","imageSearchResults","filesWaiting"]),{placeholderText:function placeholderText(){return this.t("Search images")+"..."}}),methods:_extends$1({},index_esm.mapActions(["updateSearchInput","fetchImages"]),{focusAndFetch:function focusAndFetch(){this.fetchImages();this.$refs.searchInput.focus()},updateInput:function updateInput(ev){this.updateSearchInput(ev.target.value)},clearSearch:function clearSearch(){this.updateSearchInput("");this.$refs.searchInput.focus()}})};var SelectFilesLabel={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-select-labels",class:{active:_vm.selectLabelIsActive}},[_c("div",{staticClass:"fsp-drop-area__title fsp-text__title"},[_vm._v(_vm._s(_vm.t("Select Files to Upload")))]),_c("div",{staticClass:"fsp-drop-area__subtitle fsp-text__subheader"},[_vm._v(_vm._s(_vm.t("or Drag and Drop, Copy and Paste Files")))])])},staticRenderFns:[],computed:_extends$1({},index_esm.mapGetters(["selectLabelIsActive"]))};var Local={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_c("div",{ref:"dropArea",staticClass:"fsp-drop-area",on:{click:_vm.openSelectFile}},[_c("select-files-label"),_c("input",{ref:"fileUploadInput",staticClass:"fsp-local-source__fileinput",attrs:{type:"file",id:"fsp-fileUpload",accept:_vm.acceptStr,multiple:_vm.multiple,disabled:!_vm.canAddMoreFiles},on:{change:function change($event){_vm.onFilesSelected($event)},click:function click($event){_vm.clearEvent($event)}}})],1)])},staticRenderFns:[],components:{SelectFilesLabel:SelectFilesLabel},computed:_extends$1({},index_esm.mapGetters(["accept","canAddMoreFiles","filesWaiting","maxFiles"]),{acceptStr:function acceptStr(){if(this.accept){return this.accept.join(",")}return undefined},selectedImages:function selectedImages(){return this.filesWaiting.filter(function(f){return f.source==="local_file_system"}).filter(isImage)},multiple:function multiple(){return this.maxFiles>1}}),methods:_extends$1({},index_esm.mapActions(["addFile","updateSelectLabelActive"]),{clearEvent:function clearEvent(event){event.target.value=null},onMouseover:function onMouseover(){this.updateSelectLabelActive(true)},onMouseout:function onMouseout(){this.updateSelectLabelActive(false)},onFilesSelected:function onFilesSelected(event){var files=event.target.files;for(var i=0;i<files.length;i+=1){this.addFile(files[i])}},openSelectFile:function openSelectFile(){this.$refs.fileUploadInput.click()}}),mounted:function mounted(){var dropArea=this.$refs.dropArea;if(dropArea){dropArea.addEventListener("mouseover",this.onMouseover);dropArea.addEventListener("mouseout",this.onMouseout)}}};var Webcam={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_vm.webCamError?_c("div",{staticClass:"fsp-no-webcam"},[_vm.webCamError==="disabled"?_c("div",{staticClass:"fsp-source-auth__wrapper"},[_c("span",{staticClass:"fsp-icon-auth fsp-icon fsp-source-auth__el fsp-icon--webcam-disabled"}),_c("div",{staticClass:"fsp-text__title fsp-source-auth__el"},[_vm._v(_vm._s(_vm.t("Webcam Disabled")))]),_c("div",{staticClass:"fsp-source-auth__el"},[_c("span",{staticClass:"fsp-text__subheader"},[_vm._v(_vm._s(_vm.t("Please enable your webcam to take a photo.")))])])]):_vm._e(),_vm.webCamError==="browser"?_c("div",{staticClass:"fsp-source-auth__wrapper"},[_c("span",{staticClass:"fsp-icon-auth fsp-icon fsp-source-auth__el fsp-icon--webcam-disabled"}),_c("div",{staticClass:"fsp-text__title fsp-source-auth__el"},[_vm._v(_vm._s(_vm.t("Webcam Not Supported")))]),_c("div",{staticClass:"fsp-source-auth__el"},[_c("span",{staticClass:"fsp-text__subheader"},[_vm._v(_vm._s(_vm.t("Your current browser does not support webcam functionality.")))]),_c("br"),_c("span",{staticClass:"fsp-text__subheader"},[_vm._v(_vm._s(_vm.t("We suggest using Chrome or Firefox.")))])])]):_vm._e()]):_vm._e(),!_vm.webCamError?_c("div",{staticClass:"fsp-webcam"},[_c("img",{ref:"photo",staticClass:"fsp-webcam__video",attrs:{alt:"",src:""}}),_c("video",{directives:[{name:"show",rawName:"v-show",value:!_vm.pictureTaken,expression:"!pictureTaken"}],ref:"video",staticClass:"fsp-webcam__video",attrs:{src:_vm.src}})]):_vm._e(),!_vm.webCamError?_c("footer-nav",{attrs:{"is-visible":true},slot:"footer"},[_c("span",{staticClass:"fsp-footer-text",slot:"nav-left"}),_vm._v(" "),_c("span",{slot:"nav-center"},[!_vm.pictureTaken?_c("span",{staticClass:"fsp-button fsp-button--primary fsp-button--webcam",on:{click:_vm.getPhoto}},[_c("span",{staticClass:"fsp-webcam--icon"})]):_vm._e(),_vm.pictureTaken?_c("span",{staticClass:"fsp-button fsp-button--cancel fsp-button--webcam",on:{click:_vm.clearPhoto}},[_c("span",{staticClass:"fsp-webcam--icon-gray"})]):_vm._e()]),_vm.pictureTaken?_c("span",{staticClass:"fsp-button fsp-button--primary",attrs:{title:"Next"},on:{click:_vm.addPhoto},slot:"nav-right"},[_vm._v(_vm._s(_vm.t("Next")))]):_vm._e()]):_vm._e()],1)},staticRenderFns:[],components:{FooterNav:FooterNav},data:function data(){return{pictureTaken:false,webCamImageSrc:"",webCamError:"",hasUserMedia:false}},methods:_extends$1({},index_esm.mapActions(["addFile"]),{webCamReady:function webCamReady(){var _this=this;navigator.mediaDevices.getUserMedia({video:true,audio:false}).then(function(stream){_this.$refs.video.srcObject=stream;_this.$refs.video.play();_this.hasUserMedia=true}).catch(function(){_this.webCamError="disabled"})},turnWebCamOff:function turnWebCamOff(){if(this.$refs.video&&this.$refs.video.srcObject){this.$refs.video.srcObject.getTracks().forEach(function(track){track.stop()})}},clearPhoto:function clearPhoto(){var canvas=document.createElement("canvas");var context=canvas.getContext("2d");context.fillRect(0,0,canvas.width,canvas.height);this.webCamImageSrc="";this.$refs.photo.setAttribute("src",this.webCamImageSrc);this.pictureTaken=false;this.webCamReady()},getPhoto:function getPhoto(){if(!this.hasUserMedia)return null;var video=this.$refs.video;var canvas=document.createElement("canvas");var context=canvas.getContext("2d");canvas.height=video.clientHeight;canvas.width=video.clientWidth;context.drawImage(video,0,0);this.webCamImageSrc=canvas.toDataURL();this.$refs.photo.setAttribute("src",this.webCamImageSrc);this.canvas=canvas;this.pictureTaken=true;this.turnWebCamOff();return canvas},addPhoto:function addPhoto(){var _this2=this;this.canvas.toBlob(function(blob){blob.name="webcam image";_this2.addFile(blob)})}}),beforeMount:function beforeMount(){if(navigator.mediaDevices){this.webCamReady()}else{this.webCamError="browser"}this.pictureTaken=false},beforeDestroy:function beforeDestroy(){this.turnWebCamOff()}};var PickFromSource={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("modal",[_c("div",{slot:"header"},[_vm.isInsideCloudFolder?_c("div",{staticClass:"fsp-summary__go-back",attrs:{title:"Go back"},on:{click:_vm.goBack}}):_vm._e(),_c("content-header",{attrs:{source:_vm.currentSource}})],1),_vm.currentSource.ui==="local"?_c("local",{slot:"body"}):_vm._e(),_vm.currentSource.ui==="cloud"?_c("cloud",{slot:"body"}):_vm._e(),_vm.currentSource.ui==="webcam"?_c("webcam",{slot:"body"}):_vm._e(),_vm.currentSource.ui==="imagesearch"?_c("image-search",{slot:"body"}):_vm._e(),_c("footer-nav",{attrs:{"is-visible":_vm.filesWaiting.length>0&&_vm.currentSource.ui!=="webcam"},slot:"footer"},[_c("span",{staticClass:"fsp-footer-text",slot:"nav-left"},[_vm._v(_vm._s(_vm.t("Selected Files"))+": "+_vm._s(_vm.filesWaiting.length))]),_vm._v(" "),!_vm.canStartUpload&&_vm.filesWaiting.length!==0?_c("span",{slot:"nav-center"},[_vm._v(_vm._s(_vm.getMinFilesMessage)+" ")]):_vm._e(),_c("span",{staticClass:"fsp-button fsp-button--primary",class:{"fsp-button--disabled":!_vm.canStartUpload},attrs:{title:"Next"},on:{click:_vm.goToSummary},slot:"nav-right"},[_vm._v(_vm._s(_vm.t("View/Edit Selected")))])])],1)},staticRenderFns:[],components:{Cloud:Cloud,ContentHeader:ContentHeader,FooterNav:FooterNav,ImageSearch:ImageSearch,Local:Local,Modal:Modal,Sidebar:Sidebar,Webcam:Webcam},computed:_extends$1({},index_esm.mapGetters(["route","filesWaiting","cloudLoading","currentCloudPath","currentCloudAuthorized","minFiles","canStartUpload","filesNeededCount","mobileNavActive"]),{currentSource:function currentSource(){var sourceName=this.route[1];return getByName(sourceName)},getMinFilesMessage:function getMinFilesMessage(){if(this.filesNeededCount===1){return this.t("Add")+" 1 "+this.t("more file")}if(this.filesNeededCount>1){return this.t("Add")+" "+this.filesNeededCount+" "+this.t("more files")}return null},isInsideCloudFolder:function isInsideCloudFolder(){return this.currentSource.ui==="cloud"&&this.currentCloudPath&&this.currentCloudPath.length!==0&&!this.mobileNavActive}}),methods:_extends$1({},index_esm.mapActions(["deselectAllFiles","goBack","updateMobileNavActive"]),{goToSummary:function goToSummary(){if(this.canStartUpload){this.$store.commit("CHANGE_ROUTE",["summary"]);this.updateMobileNavActive(false)}}})};var ProgressBar={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"fsp-progress-bar"},[_c("div",{staticClass:"fsp-progress-bar__container"},[_c("div",{ref:"bar",staticClass:"fsp-progress-bar__bar",staticStyle:{width:"0"}})])])},staticRenderFns:[],watch:{progress:function progress(num){this.$refs.bar.style.width=num+"%"}},props:["progress"]};var FUNC_ERROR_TEXT$1="Expected a function";var NAN$1$1=0/0;var symbolTag$1$1="[object Symbol]";var reTrim$1$1=/^\s+|\s+$/g;var reIsBadHex$1$1=/^[-+]0x[0-9a-f]+$/i;var reIsBinary$1$1=/^0b[01]+$/i;var reIsOctal$1$1=/^0o[0-7]+$/i;var freeParseInt$1$1=parseInt;var freeGlobal$1=(typeof commonjsGlobal$2==="undefined"?"undefined":_typeof(commonjsGlobal$2))=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2;var freeSelf$1=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self;var root$1=freeGlobal$1||freeSelf$1||Function("return this")();var objectProto$1$1=Object.prototype;var objectToString$1$1=objectProto$1$1.toString;var nativeMax$1$1=Math.max;var nativeMin$1=Math.min;var now$1=function now(){return root$1.Date.now()};function debounce$1(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT$1)}wait=toNumber$1$2(wait)||0;if(isObject$2$1(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax$1$1(toNumber$1$2(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin$1(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now$1();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now$1())}function debounced(){var time=now$1(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}function throttle$1(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT$1)}if(isObject$2$1(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce$1(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function isObject$2$1(value){var type=typeof value==="undefined"?"undefined":_typeof(value);return!!value&&(type=="object"||type=="function")}function isObjectLike$1$1(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof(value))=="object"}function isSymbol$1$1(value){return(typeof value==="undefined"?"undefined":_typeof(value))=="symbol"||isObjectLike$1$1(value)&&objectToString$1$1.call(value)==symbolTag$1$1}function toNumber$1$2(value){if(typeof value=="number"){return value}if(isSymbol$1$1(value)){return NAN$1$1}if(isObject$2$1(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject$2$1(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim$1$1,"");var isBinary=reIsBinary$1$1.test(value);return isBinary||reIsOctal$1$1.test(value)?freeParseInt$1$1(value.slice(2),isBinary?2:8):reIsBadHex$1$1.test(value)?NAN$1$1:+value}var index$3$1=throttle$1;var log$2=logger$3.context("transformer");var px$1=function px(style){return style+"px"};var opposite={topLeftX:"bottomRightX",topLeftY:"bottomRightY",bottomRightX:"topLeftX",bottomRightY:"topLeftY"};var minimalSelectionSize=40;var calcCropRect=function calcCropRect(natDims,dims,cropRect,store,hasCircle){var scaleX=natDims.imageNaturalWidth/(dims.imageWidth-dims.imageX);var scaleY=natDims.imageNaturalHeight/(dims.imageHeight-dims.imageY);var rectangle={x:Math.round((cropRect.topLeftX-dims.imageX)*scaleX),y:Math.round((cropRect.topLeftY-dims.imageY)*scaleY),width:Math.round((cropRect.bottomRightX-cropRect.topLeftX)*scaleX),height:Math.round((cropRect.bottomRightY-cropRect.topLeftY)*scaleY)};if(cropRect.topLeftX===dims.imageX&&cropRect.topLeftY===dims.imageY&&cropRect.bottomRightX===dims.imageWidth&&cropRect.bottomRightY===dims.imageHeight){store.commit("REMOVE_TRANSFORMATION","crop")}else{store.commit("SET_TRANSFORMATION",{type:"crop",options:{dim:rectangle}});store.commit("SET_CROP_RECTANGLE",cropRect)}if(hasCircle){store.commit("REMOVE_TRANSFORMATION","circle");store.commit("SET_TRANSFORMATION",{type:"circle",options:{}})}};var throttledCalcCropRect=index$3$1(function(natDims,dims,cropRect,store,hasCircle){return calcCropRect(natDims,dims,cropRect,store,hasCircle)},500);var Crop={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_c("div",{directives:[{name:"show",rawName:"v-show",value:!_vm.imageLoading,expression:"!imageLoading"}],staticStyle:{position:"absolute",top:"0",left:"0"}},[_vm.isNotGIF?_c("div",{ref:"cropOverlay",staticClass:"fst-crop__overlay"}):_vm._e(),_c("div",{ref:"cropArea",staticClass:"fst-crop__area",class:{"fst-crop__area--circle":_vm.hasCircle}}),_c("div",{ref:"topLeftMarker",staticClass:"fst-crop__marker fst-crop__marker--top-left"}),_c("div",{ref:"topRightMarker",staticClass:"fst-crop__marker fst-crop__marker--top-right"}),_c("div",{ref:"bottomLeftMarker",staticClass:"fst-crop__marker fst-crop__marker--bottom-left"}),_c("div",{ref:"bottomRightMarker",staticClass:"fst-crop__marker fst-crop__marker--bottom-right"})]),_c("div",{staticClass:"fst-filters__container"},[_c("span",{staticClass:"fst-filters__option",on:{click:_vm.rotate}},[_c("span",{staticClass:"fst-rotate-right",attrs:{title:"Rotate 90°"}}),_vm._v(" Rotate ")]),_vm.cropCircleEnabled?_c("span",{staticClass:"fst-filters__option",class:{"fst-filters__option--active":_vm.hasCircle},on:{click:_vm.applyCircle}},[_c("span",{staticClass:"fst-circle",class:{"fst-circle--active":_vm.hasCircle},attrs:{title:"Toggle Circle"}}),_vm._v(" Circle")]):_vm._e()])])},staticRenderFns:[],props:{imageWidth:Number,imageHeight:Number,imageX:Number,imageY:Number},data:function data(){return{deg:0,hasCircle:false,cropRectangle:{topLeftX:0,topLeftY:0,bottomRightX:0,bottomRightY:0}}},computed:_extends$1({},index_esm.mapGetters(["cachedCropRectangle","cropAspectRatio","cropCircleEnabled","imageNaturalWidth","imageNaturalHeight","imageLoading","imageUrl","stagedForTransform","transformations"]),{aspectRatio:function aspectRatio(){if(this.hasCircle){return 1}return this.cropAspectRatio},isNotGIF:function isNotGIF(){return this.stagedForTransform.mimetype!=="image/gif"}}),watch:{imageLoading:function imageLoading(){var _this=this;this.$nextTick(function(){_this.addMarkerBehaviour(_this.$refs.topLeftMarker,"topLeftX","topLeftY");_this.addMarkerBehaviour(_this.$refs.topRightMarker,"bottomRightX","topLeftY");_this.addMarkerBehaviour(_this.$refs.bottomLeftMarker,"topLeftX","bottomRightY");_this.addMarkerBehaviour(_this.$refs.bottomRightMarker,"bottomRightX","bottomRightY");_this.addMoveSelectionBehaviour();_this.initialize()})},cropRectangle:{deep:true,handler:function handler(){if(!this.imageLoading){this.calculateAndSetRectangle()}}}},methods:_extends$1({},index_esm.mapActions(["performTransformations"]),{repositionMarkers:function repositionMarkers(){var topLeftRadius=this.$refs.topLeftMarker.getBoundingClientRect().width/2;this.$refs.topLeftMarker.style.left=px$1(this.cropRectangle.topLeftX-topLeftRadius);this.$refs.topLeftMarker.style.top=px$1(this.cropRectangle.topLeftY-topLeftRadius);var topRightRadius=this.$refs.topRightMarker.getBoundingClientRect().width/2;this.$refs.topRightMarker.style.left=px$1(this.cropRectangle.bottomRightX-topRightRadius);this.$refs.topRightMarker.style.top=px$1(this.cropRectangle.topLeftY-topRightRadius);var bottomLeftRadius=this.$refs.bottomLeftMarker.getBoundingClientRect().width/2;this.$refs.bottomLeftMarker.style.left=px$1(this.cropRectangle.topLeftX-bottomLeftRadius);this.$refs.bottomLeftMarker.style.top=px$1(this.cropRectangle.bottomRightY-bottomLeftRadius);var bottomRightRadius=this.$refs.bottomRightMarker.getBoundingClientRect().width/2;this.$refs.bottomRightMarker.style.left=px$1(this.cropRectangle.bottomRightX-bottomRightRadius)
;this.$refs.bottomRightMarker.style.top=px$1(this.cropRectangle.bottomRightY-bottomRightRadius);this.$refs.cropArea.style.left=px$1(this.cropRectangle.topLeftX);this.$refs.cropArea.style.top=px$1(this.cropRectangle.topLeftY);this.$refs.cropArea.style.width=px$1(this.cropRectangle.bottomRightX-this.cropRectangle.topLeftX);this.$refs.cropArea.style.height=px$1(this.cropRectangle.bottomRightY-this.cropRectangle.topLeftY);this.$refs.cropArea.style.backgroundRepeat="no-repeat";this.$refs.cropArea.style.backgroundPosition=px$1(this.imageX-this.cropRectangle.topLeftX-2)+" "+px$1(this.imageY-this.cropRectangle.topLeftY-2);this.$refs.cropArea.style.backgroundSize=px$1(this.imageWidth-this.imageX)+" "+px$1(this.imageHeight-this.imageY);this.$refs.cropOverlay.style.top=px$1(this.imageY);this.$refs.cropOverlay.style.left=px$1(this.imageX);this.$refs.cropOverlay.style.width=px$1(this.imageWidth-this.imageX);this.$refs.cropOverlay.style.height=px$1(this.imageHeight-this.imageY)},calculateAndSetRectangle:function calculateAndSetRectangle(){var natDims={imageNaturalWidth:this.imageNaturalWidth,imageNaturalHeight:this.imageNaturalHeight};var dims={imageWidth:this.imageWidth,imageHeight:this.imageHeight,imageX:this.imageX,imageY:this.imageY};throttledCalcCropRect(natDims,dims,this.cropRectangle,this.$store,this.hasCircle)},calculateRectangleMaintainingAspectRatio:function calculateRectangleMaintainingAspectRatio(width,height){var rectOption1={w:width,h:width/this.aspectRatio};var rectOption2={w:height*this.aspectRatio,h:height};var size1=Math.sqrt(rectOption1.w*rectOption1.w+rectOption1.h*rectOption1.h);var size2=Math.sqrt(rectOption2.w*rectOption2.w+rectOption2.h*rectOption2.h);if(size1<size2){return rectOption1}return rectOption2},ensurePointWithinBoundsX:function ensurePointWithinBoundsX(x,xName){if(xName==="topLeftX"){if(x<this.imageX){return this.imageX}else if(x>=this.cropRectangle.bottomRightX){return this.cropRectangle.bottomRightX-1}}else if(xName==="bottomRightX"){if(x<=this.cropRectangle.topLeftX){return this.cropRectangle.topLeftX+1}else if(x>this.imageWidth){return this.imageWidth}}return x},ensurePointWithinBoundsY:function ensurePointWithinBoundsY(y,yName){if(yName==="topLeftY"){if(y<this.imageY){return this.imageY}else if(y>=this.cropRectangle.bottomRightY){return this.cropRectangle.bottomRightY-1}}else if(yName==="bottomRightY"){if(y<=this.cropRectangle.topLeftY){return this.cropRectangle.topLeftY+1}else if(y>this.imageHeight){return this.imageHeight}}return y},addMarkerBehaviour:function addMarkerBehaviour(marker,corelatedX,corelatedY){var _this2=this;var initCropSelectionResize=function initCropSelectionResize($event){$event.preventDefault();var event=$event.touches?$event.touches[0]:$event;var distanceToMiddleOfMarkerX=event.clientX-_this2.cropRectangle[corelatedX];var distanceToMiddleOfMarkerY=event.clientY-_this2.cropRectangle[corelatedY];var mouseMove=function mouseMove($evt){var evt=$evt.touches?$evt.touches[0]:$evt;var x=void 0;var y=void 0;var pointerX=_this2.ensurePointWithinBoundsX(evt.clientX-distanceToMiddleOfMarkerX,corelatedX);var pointerY=_this2.ensurePointWithinBoundsY(evt.clientY-distanceToMiddleOfMarkerY,corelatedY);var oppositeX=opposite[corelatedX];var oppositeY=opposite[corelatedY];var possibleNewWidth=Math.abs(pointerX-_this2.cropRectangle[oppositeX]);var possibleNewHeight=Math.abs(pointerY-_this2.cropRectangle[oppositeY]);if(possibleNewWidth<minimalSelectionSize){possibleNewWidth=minimalSelectionSize}if(possibleNewHeight<minimalSelectionSize){possibleNewHeight=minimalSelectionSize}var rectangleSize={w:possibleNewWidth,h:possibleNewHeight};if(_this2.aspectRatio!==undefined){rectangleSize=_this2.calculateRectangleMaintainingAspectRatio(possibleNewWidth,possibleNewHeight)}if(pointerX<_this2.cropRectangle[oppositeX]){x=_this2.cropRectangle[oppositeX]-rectangleSize.w}else{x=_this2.cropRectangle[oppositeX]+rectangleSize.w}if(pointerY<_this2.cropRectangle[oppositeY]){y=_this2.cropRectangle[oppositeY]-rectangleSize.h}else{y=_this2.cropRectangle[oppositeY]+rectangleSize.h}_this2.cropRectangle[corelatedX]=x;_this2.cropRectangle[corelatedY]=y;_this2.repositionMarkers()};var kill=function kill(){document.documentElement.removeEventListener("mousemove",mouseMove,false);document.documentElement.removeEventListener("mouseup",kill,false);document.documentElement.removeEventListener("mouseleave",kill,false);document.documentElement.removeEventListener("touchmove",mouseMove,false);document.documentElement.removeEventListener("touchend",kill,false);document.documentElement.removeEventListener("touchleave",kill,false)};document.documentElement.addEventListener("mousemove",mouseMove,false);document.documentElement.addEventListener("mouseup",kill,false);document.documentElement.addEventListener("mouseleave",kill,false);document.documentElement.addEventListener("touchmove",mouseMove,false);document.documentElement.addEventListener("touchend",kill,false);document.documentElement.addEventListener("touchleave",kill,false)};marker.addEventListener("mousedown",initCropSelectionResize,false);marker.addEventListener("touchstart",initCropSelectionResize,false)},addMoveSelectionBehaviour:function addMoveSelectionBehaviour(){var _this3=this;var initCropSelectionMove=function initCropSelectionMove($event){$event.preventDefault();var event=$event.touches?$event.touches[0]:$event;var initialDistanceToTopLeftX=event.clientX-_this3.cropRectangle.topLeftX;var initialDistanceToTopLeftY=event.clientY-_this3.cropRectangle.topLeftY;var cropSelectionWidth=_this3.cropRectangle.bottomRightX-_this3.cropRectangle.topLeftX;var cropSelectionHeight=_this3.cropRectangle.bottomRightY-_this3.cropRectangle.topLeftY;var mouseMove=function mouseMove($evt){var evt=$evt.touches?$evt.touches[0]:$evt;var topLeftX=evt.clientX-initialDistanceToTopLeftX;var topLeftY=evt.clientY-initialDistanceToTopLeftY;if(topLeftX<_this3.imageX){topLeftX=_this3.imageX}else if(topLeftX+cropSelectionWidth>_this3.imageWidth){topLeftX=_this3.imageWidth-cropSelectionWidth}if(topLeftY<_this3.imageY){topLeftY=_this3.imageY}else if(topLeftY+cropSelectionHeight>_this3.imageHeight){topLeftY=_this3.imageHeight-cropSelectionHeight}_this3.cropRectangle.topLeftX=topLeftX;_this3.cropRectangle.topLeftY=topLeftY;_this3.cropRectangle.bottomRightX=topLeftX+cropSelectionWidth;_this3.cropRectangle.bottomRightY=topLeftY+cropSelectionHeight;_this3.repositionMarkers()};var kill=function kill(){document.documentElement.removeEventListener("mousemove",mouseMove,false);document.documentElement.removeEventListener("mouseup",kill,false);document.documentElement.removeEventListener("mouseleave",kill,false);document.documentElement.removeEventListener("touchmove",mouseMove,false);document.documentElement.removeEventListener("touchend",kill,false);document.documentElement.removeEventListener("touchleave",kill,false)};document.documentElement.addEventListener("mousemove",mouseMove,false);document.documentElement.addEventListener("mouseup",kill,false);document.documentElement.addEventListener("mouseleave",kill,false);document.documentElement.addEventListener("touchmove",mouseMove,false);document.documentElement.addEventListener("touchend",kill,false);document.documentElement.addEventListener("touchleave",kill,false)};this.$refs.cropArea.addEventListener("mousedown",initCropSelectionMove,false);this.$refs.cropArea.addEventListener("touchstart",initCropSelectionMove,false)},initialize:function initialize(){if(this.isNotGIF){this.$refs.cropArea.style.backgroundImage="url("+this.imageUrl+")"}if(this.cachedCropRectangle){this.cropRectangle=this.cachedCropRectangle;this.repositionMarkers();return}if(this.aspectRatio!==undefined){var rectangleSize=this.calculateRectangleMaintainingAspectRatio(this.imageWidth-this.imageX,this.imageHeight-this.imageY);this.cropRectangle.topLeftX=(this.imageWidth+this.imageX-rectangleSize.w)/2;this.cropRectangle.topLeftY=(this.imageHeight+this.imageY-rectangleSize.h)/2;this.cropRectangle.bottomRightX=this.cropRectangle.topLeftX+rectangleSize.w;this.cropRectangle.bottomRightY=this.cropRectangle.topLeftY+rectangleSize.h}else{this.cropRectangle.topLeftX=this.imageX;this.cropRectangle.topLeftY=this.imageY;this.cropRectangle.bottomRightX=this.imageWidth;this.cropRectangle.bottomRightY=this.imageHeight}log$2("crop initialized",this.cropRectangle);this.repositionMarkers()},rotate:function rotate(){this.deg=this.deg+90;if(this.deg<0){this.deg=360-Math.abs(this.deg)}if(this.deg>360){this.deg=90}if(this.deg===0||this.deg===360){this.$store.commit("REMOVE_TRANSFORMATION","rotate")}else{this.$store.commit("SET_TRANSFORMATION",{type:"rotate",options:{deg:this.deg}})}this.$store.commit("REMOVE_TRANSFORMATION","circle");this.$store.commit("REMOVE_TRANSFORMATION","crop");this.$store.commit("SET_CROP_RECTANGLE",null);this.performTransformations()},applyCircle:function applyCircle(){if(this.hasCircle){this.$store.commit("REMOVE_TRANSFORMATION","circle")}else{this.$store.commit("SET_TRANSFORMATION",{type:"circle",options:{}})}this.$store.commit("SET_CROP_RECTANGLE",null);this.hasCircle=!this.hasCircle;this.initialize()}}),mounted:function mounted(){var _this4=this;log$2("crop mounted");if(this.transformations.crop){this.$store.commit("REMOVE_TRANSFORMATION","crop");this.performTransformations()}if(this.transformations.circle){this.hasCircle=true;this.$store.commit("REMOVE_TRANSFORMATION","circle");this.performTransformations();this.$store.commit("SET_TRANSFORMATION",{type:"circle",options:{}})}if(this.transformations.rotate){this.deg=this.transformations.rotate.deg}this.$nextTick(function(){_this4.addMarkerBehaviour(_this4.$refs.topLeftMarker,"topLeftX","topLeftY");_this4.addMarkerBehaviour(_this4.$refs.topRightMarker,"bottomRightX","topLeftY");_this4.addMarkerBehaviour(_this4.$refs.bottomLeftMarker,"topLeftX","bottomRightY");_this4.addMarkerBehaviour(_this4.$refs.bottomRightMarker,"bottomRightX","bottomRightY");_this4.addMoveSelectionBehaviour();_this4.initialize()})},destroyed:function destroyed(){this.calculateAndSetRectangle();this.performTransformations()}};var Transform={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("modal",[_c("content-header",{attrs:{"hide-menu":true},slot:"header"},[_c("span",{staticClass:"fsp-header-text--visible"},[_vm._v(_vm._s(_vm.headerText))])]),!_vm.isDisabled?_c("div",{staticClass:"fst-sidebar",slot:"sidebar"},_vm._l(_vm.options,function(option){return _c("div",{staticClass:"fst-sidebar__option",class:_vm.getSidebarClasses(option),attrs:{title:_vm.capitalize(option)},on:{click:function click($event){_vm.handleClick(option)}}},[_c("span",{staticClass:"fst-icon",class:_vm.genIconClass(option)}),_vm._v(" "+_vm._s(_vm.formatOption(option)))])})):_vm._e(),_c("div",{staticClass:"fsp-transformer",class:_vm.transformerClasses,slot:"body"},[_c("img",{ref:"image",staticClass:"fst-image",attrs:{src:_vm.imageUrl},on:{load:_vm.imageLoaded,error:_vm.imageError}}),_vm.imageLoading||!_vm.isLocal&&_vm.imageUploading?_c("div",{staticClass:"fst-image-loader__container"},[_c("div",{staticClass:"fst-image-loader__background"},[_c("div",{staticClass:"fst-image-loader__spinner"})])]):_vm._e(),_vm.activeTransform==="crop"?_c("crop",{attrs:{"image-width":_vm.imageWidth,"image-height":_vm.imageHeight,"image-x":_vm.imageX,"image-y":_vm.imageY}}):_vm._e(),_vm.activeTransform==="filters"?_c("div",{staticClass:"fst-filters__container"},_vm._l(_vm.filtersEnabled,function(filter){return _c("div",{staticClass:"fst-filters__option",class:{"fst-filters__option--active":_vm.isFilterEnabled(filter)},on:{click:function click($event){_vm.handleFilterClick(filter)}}},[_c("span",{staticClass:"fst-icon",class:_vm.genFilterIconClass(filter)}),_vm._v(" "+_vm._s(_vm.formatOption(filter)))])})):_vm._e(),_c("footer-nav",{attrs:{"is-visible":!_vm.uploadStarted},slot:"footer"},[_c("span",{staticClass:"fsp-button fsp-button--cancel",on:{click:_vm.goBack},slot:"nav-left"},[_vm._v(_vm._s(_vm.t("Cancel"))+" ")]),_vm.maxFiles===1?_c("span",{staticClass:"fsp-button fsp-button--primary",class:{"fsp-button--disabled":!_vm.canStartUpload},attrs:{title:"Upload"},on:{click:_vm.applyAndUpload},slot:"nav-right"},[_vm._v(_vm._s(_vm.t("Upload"))+" ")]):_c("span",{staticClass:"fsp-button fsp-button--primary",class:{"fsp-button--disabled":!_vm.canStartUpload},attrs:{title:"Done"},on:{click:_vm.applyAndGoBack},slot:"nav-right"},[_vm._v(_vm._s(_vm.t("Done")))])]),_c("footer-nav",{attrs:{"is-visible":_vm.uploadStarted||_vm.uploading,"full-width":true},slot:"footer"},[_c("span",{slot:"nav-center"},[_c("progress-bar",{attrs:{progress:_vm.fileProgress}})],1)])],1)],1)},staticRenderFns:[],components:{ContentHeader:ContentHeader,Crop:Crop,FooterNav:FooterNav,Modal:Modal,ProgressBar:ProgressBar},computed:_extends$1({},index_esm.mapGetters(["activeTransform","cropEnabled","filtersEnabled","imageLoading","imageUploading","imageUrl","maxFiles","originalUrl","route","stagedForTransform","transformations","uploadStarted"]),{canStartUpload:function canStartUpload(){return true},headerText:function headerText(){return this.maxFiles>1?"Edit Image":"Upload Image"},fileProgress:function fileProgress(){return this.stagedForTransform.progress},isLocal:function isLocal(){return this.stagedForTransform.source==="local_file_system"},isDisabled:function isDisabled(){return!this.cropEnabled&&!this.filtersEnabled},options:function options(){var opts=[];if(this.cropEnabled){opts.push("crop")}if(this.filtersEnabled&&this.filtersEnabled.length){opts.push("filters")}return opts},transformerClasses:function transformerClasses(){return{"fsp-transformer--controls":!this.isDisabled,"fsp-transformer--disabled":this.isDisabled}}}),data:function data(){return{imageWidth:0,imageHeight:0,imageX:0,imageY:0,uploading:false}},methods:_extends$1({},index_esm.mapActions(["deselectAllFiles","startUploading","performTransformations","updateMobileNavActive","uploadFileToTemporaryLocation"]),{applyAndGoBack:function applyAndGoBack(){this.performTransformations(true);this.goBack()},applyAndUpload:function applyAndUpload(){var _this=this;this.uploading=true;this.performTransformations(true).then(function(){_this.startUploading(true)})},capitalize:function capitalize(s){return s&&s[0].toUpperCase()+s.slice(1)},formatOption:function formatOption(option){if(option==="monochrome"){return"Mono"}return this.capitalize(option)},handleClick:function handleClick(transform){this.$store.commit("SET_ACTIVE_TRANSFORM",transform)},handleFilterClick:function handleFilterClick(filter){if(this.isFilterEnabled(filter)){this.$store.commit("REMOVE_TRANSFORMATION",filter)}else{this.$store.commit("SET_TRANSFORMATION",{type:filter,options:true})}this.performTransformations()},imageError:function imageError(){this.$store.commit("SET_IMAGE_LOADING",false)},isFilterEnabled:function isFilterEnabled(filter){return Object.keys(this.transformations).indexOf(filter)!==-1},getSidebarClasses:function getSidebarClasses(option){return{"fst-sidebar__option--active":option===this.activeTransform,"fst-sidebar__option--disabled":this.uploadStarted||this.uploading}},genIconClass:function genIconClass(option){if(this.activeTransform===option&&!this.uploadStarted&&!this.uploading){return"fst-icon--"+option+"-blue"}return"fst-icon--"+option+"-black"},genFilterIconClass:function genFilterIconClass(filter){if(this.isFilterEnabled(filter)){return"fst-icon--"+filter+"-blue"}return"fst-icon--"+filter+"-black"},goBack:function goBack(){var _this2=this;if(this.maxFiles===1){this.deselectAllFiles()}this.$store.commit("SET_IMAGE_LOADING",false);this.$store.commit("GO_BACK_WITH_ROUTE");this.$nextTick(function(){return _this2.$store.commit("RESET_TRANSFORMATIONS")})},imageLoaded:function imageLoaded(){if(this.$refs.image){var x=this.$refs.image.offsetLeft;var y=this.$refs.image.offsetTop;this.imageWidth=this.$refs.image.offsetWidth+x;this.imageHeight=this.$refs.image.offsetHeight+y;this.imageX=x;this.imageY=y;var w=this.$refs.image.naturalWidth;var h=this.$refs.image.naturalHeight;this.$store.commit("SET_IMAGE_NATURAL_SIZE",{w:w,h:h})}this.$store.commit("SET_IMAGE_LOADING",false)}}),mounted:function mounted(){this.$store.commit("SET_IMAGE_LOADING",true);this.$store.commit("SET_CROP_RECTANGLE",null);if(this.cropEnabled){this.$store.commit("SET_ACTIVE_TRANSFORM","crop")}this.$store.commit("CANCEL_ALL_PENDING_REQUESTS")}};var UploadSummary={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("modal",[_c("div",{slot:"header"},[!_vm.uploadStarted&&!_vm.mobileNavActive?_c("div",{staticClass:"fsp-summary__go-back",attrs:{title:"Go back"},on:{click:_vm.goBack}}):_vm._e(),_c("content-header",[!_vm.mobileNavActive?_c("span",{staticClass:"fsp-header-text--visible"},[_vm._v(_vm._s(_vm.headerText))]):_vm._e()])],1),_c("div",{staticClass:"fsp-summary",slot:"body"},[_c("div",{staticClass:"fsp-summary__header"},[_c("div",{staticClass:"fsp-summary__filter"},[_c("input",{attrs:{placeholder:_vm.placeholderText},on:{input:_vm.updateFilter}}),_vm._v(" "),_c("span",{staticClass:"fsp-summary__filter-icon"})])]),_c("div",{staticClass:"fsp-summary__body"},[_vm.onlyTransformedImages.length?_c("div",{staticClass:"fsp-grid__label"},[_vm._v(_vm._s(_vm.t("Edited Images")))]):_vm._e(),_vm.onlyTransformedImages.length?_c("div",{staticClass:"fsp-summary__images-container"},_vm._l(_vm.onlyTransformedImages,function(image){return _c("div",{key:image.uploadToken,staticClass:"fsp-summary__item"},[image.source==="local_file_system"?_c("img",{ref:image.uploadToken,refInFor:true,staticClass:"fsp-summary__thumbnail",attrs:{src:_vm.generateThumbnail(image)},on:{load:function load($event){_vm.revokeURL(image)}}}):_c("div",[_c("img",{staticClass:"fsp-summary__thumbnail",attrs:{src:image.transformed||image.thumbnail}})]),_c("span",{staticClass:"fsp-summary__item-name"},[_vm._v(_vm._s(image.name)+" "),image.source==="local_file_system"&&!image.transformed?_c("span",{staticClass:"fsp-summary__size"},[_vm.uploadStarted?_c("span",{staticClass:"fsp-summary__size-progress"},[_vm._v(_vm._s(image.progressSize)+" "+_vm._s(_vm.t("of"))+" ")]):_vm._e(),_vm._v(_vm._s(_vm.translatedFileSize(image.size)))]):_vm._e()]),_vm.uploadStarted?_c("div",{staticClass:"fsp-summary__item-progress",style:{width:image.progress+"%"}}):_vm._e(),!_vm.uploadStarted?_c("div",{staticClass:"fsp-summary__actions-container"},[!_vm.disableTransformer?_c("span",[_c("span",{staticClass:"fsp-summary__action fsp-summary__action--button",on:{click:function click($event){_vm.removeTransformation(image)}}},[_vm._v(_vm._s(_vm.t("Revert")))])]):_vm._e(),_c("span",{staticClass:"fsp-summary__action-separator"}),_vm._v(" "),_c("span",{staticClass:"fsp-summary__action fsp-summary__action--remove",on:{click:function click($event){_vm.addFile(image)}}})]):_vm._e()])})):_vm._e(),_vm.onlyImages.length?_c("div",{staticClass:"fsp-grid__label"},[_vm._v(_vm._s(_vm.t("Images")))]):_vm._e(),_vm.onlyImages.length?_c("div",{staticClass:"fsp-summary__images-container"},_vm._l(_vm.onlyImages,function(image){return _c("div",{key:image.uploadToken,staticClass:"fsp-summary__item"},[image.source==="local_file_system"?_c("img",{ref:image.uploadToken,refInFor:true,staticClass:"fsp-summary__thumbnail",attrs:{src:_vm.generateThumbnail(image)},on:{load:function load($event){_vm.revokeURL(image)}}}):_c("div",[_c("img",{staticClass:"fsp-summary__thumbnail",attrs:{src:image.transformed||image.thumbnail}})]),_c("span",{staticClass:"fsp-summary__item-name"},[_vm._v(_vm._s(image.name)+" "),image.source==="local_file_system"&&!image.transformed?_c("span",{staticClass:"fsp-summary__size"},[_vm.uploadStarted?_c("span",{staticClass:"fsp-summary__size-progress"},[_vm._v(_vm._s(image.progressSize)+" "+_vm._s(_vm.t("of"))+" ")]):_vm._e(),_vm._v(_vm._s(_vm.translatedFileSize(image.size)))]):_vm._e()]),_vm.uploadStarted?_c("div",{staticClass:"fsp-summary__item-progress",style:{width:image.progress+"%"}}):_vm._e(),!_vm.uploadStarted?_c("div",{staticClass:"fsp-summary__actions-container"},[!_vm.disableTransformer?_c("span",[_c("span",{staticClass:"fsp-summary__action fsp-summary__action--button",on:{click:function click($event){_vm.transformImage(image)}}},[_vm._v(_vm._s(_vm.t("Edit")))])]):_vm._e(),_c("span",{staticClass:"fsp-summary__action-separator"}),_vm._v(" "),_c("span",{staticClass:"fsp-summary__action fsp-summary__action--remove",on:{click:function click($event){_vm.addFile(image)}}})]):_vm._e()])})):_vm._e(),_vm.onlyFiles.length?_c("div",{staticClass:"fsp-grid__label"},[_vm._v(_vm._s(_vm.t("Files")))]):_vm._e(),_vm._l(_vm.onlyFiles,function(file){return _c("div",{key:file.uploadToken,staticClass:"fsp-summary__item"},[_c("div",{staticClass:"fsp-summary__thumbnail-container"},[_c("span",{class:_vm.generateClass(file)})]),_c("span",{staticClass:"fsp-summary__item-name"},[_vm._v(_vm._s(file.name)+" "),file.source==="local_file_system"&&!file.transformed?_c("span",{staticClass:"fsp-summary__size"},[_vm.uploadStarted?_c("span",{staticClass:"fsp-summary__size-progress"},[_vm._v(_vm._s(file.progressSize)+" "+_vm._s(_vm.t("of"))+" ")]):_vm._e(),_vm._v(_vm._s(_vm.translatedFileSize(file.size)))]):_vm._e()]),_vm.uploadStarted?_c("div",{staticClass:"fsp-summary__item-progress",style:{width:file.progress+"%"}}):_vm._e(),!_vm.uploadStarted?_c("div",{staticClass:"fsp-summary__actions-container"},[_c("div",{staticClass:"fsp-summary__action",on:{click:function click($event){_vm.addFile(file)}}},[_c("span",{staticClass:"fsp-summary__action--remove"})])]):_vm._e()])}),!_vm.hideMinFilesNotification?_c("div",{staticClass:"fsp-notifications__container"},[_c("div",{staticClass:"fsp-notifications__message"},[_c("span",{staticClass:"fsp-label"},[_vm._v(_vm._s(_vm.getMinFilesNotification))])]),_c("span",{staticClass:"fsp-notifications__back-button",on:{click:_vm.goBack}},[_vm._v(_vm._s(_vm.t("Go Back")))])]):_vm._e()],2)]),_c("footer-nav",{attrs:{"is-visible":!_vm.uploadStarted},slot:"footer"},[_c("span",{staticClass:"fsp-button fsp-button--cancel",on:{click:_vm.deselectAllFiles},slot:"nav-left"},[_vm._v(_vm._s(_vm.t("Deselect All"))+" ")]),_c("span",{staticClass:"fsp-button fsp-button--primary",class:{"fsp-button--disabled":!_vm.canStartUpload},attrs:{title:"Upload"},on:{click:_vm.startUploadMaybe},slot:"nav-right"},[_vm._v(_vm._s(_vm.t("Upload"))+" "),_vm.allFiles.length>1?_c("span",{staticClass:"fsp-badge fsp-badge--bright"},[_vm._v(_vm._s(_vm.allFiles.length))]):_vm._e()])])],1)},staticRenderFns:[],components:{ContentHeader:ContentHeader,FooterNav:FooterNav,Modal:Modal},computed:_extends$1({},index_esm.mapGetters(["allFilesInQueueCount","canStartUpload","disableTransformer","filesDone","filesFailed","filesNeededCount","filesUploading","filesWaiting","minFiles","mobileNavActive","route","routesHistory","uploadInBackground","uploadStarted"]),{allFiles:function allFiles(){return this.filesUploading.concat(this.filesWaiting)},getMinFilesNotification:function getMinFilesNotification(){if(this.filesNeededCount===1){return this.t("Please select")+" 1 "+this.t("more file")}if(this.filesNeededCount>1){return this.t("Please select")+" "+this.filesNeededCount+" "+this.t("more files")}return null},hideMinFilesNotification:function hideMinFilesNotification(){return this.uploadStarted||this.canStartUpload},onlyFiles:function onlyFiles(){var pattern=new RegExp(this.filter,"i");return this.allFiles.filter(function(f){return!isImage(f)}).filter(function(f){return pattern.test(f.name)})},onlyImages:function onlyImages(){var pattern=new RegExp(this.filter,"i");return this.allFiles.filter(function(f){return isImage(f)}).filter(function(f){return!f.transformed}).filter(function(f){return pattern.test(f.name)})},onlyTransformedImages:function onlyTransformedImages(){var pattern=new RegExp(this.filter,"i");return this.allFiles.filter(function(f){return isImage(f)}).filter(function(f){return f.transformed}).filter(function(f){return pattern.test(f.name)})},headerText:function headerText(){if(this.uploadStarted){return this.t("Uploaded")+" "+this.filesDone.concat(this.filesFailed).length+" "+this.t("of")+" "+this.allFilesInQueueCount}return this.t("Selected Files")},placeholderText:function placeholderText(){return this.t("Filter")}}),created:function created(){this.$store.commit("CANCEL_ALL_PENDING_REQUESTS")},data:function data(){return{blobURLs:{},currentPath:null,currentSource:null,filter:""}},methods:_extends$1({},index_esm.mapActions(["addFile","deselectAllFiles","deselectFolder","goBack","removeTransformation","startUploading","stageForTransform","uploadFileToTemporaryLocation"]),{fileOrFiles:function fileOrFiles(folder){return this.getFileCount(folder)===1?"File":"Files"},generateClass:function generateClass(file){if(isAudio(file)){return"fsp-grid__icon-audio"}if(file.mimetype==="application/pdf"){return"fsp-grid__icon-pdf"}return"fsp-grid__icon-file"},translatedFileSize:function translatedFileSize(file){return roundFileSize(file)},generateThumbnail:function generateThumbnail(image){if(image.transformed){return image.transformed}if(this.blobURLs[image.uploadToken]){return this.blobURLs[image.uploadToken]}var url=window.URL.createObjectURL(image.originalFile);this.blobURLs[image.uploadToken]=url;return url},revokeURL:function revokeURL(image){var url=this.blobURLs[image.uploadToken];window.URL.revokeObjectURL(url)},updateFilter:function updateFilter(event){this.filter=event.target.value},startUploadMaybe:function startUploadMaybe(){if(this.canStartUpload){this.startUploading(true)}},transformImage:function transformImage(image){this.stageForTransform(image)}}),mounted:function mounted(){if(this.uploadInBackground){this.startUploading()}},watch:{allFiles:{immediate:true,handler:function handler(files){if(files.length===0&&!this.uploadStarted){this.$store.commit("GO_BACK_WITH_ROUTE")}}}}};var App={render:function render(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm.uiVisible?_c("div",[_vm.isRootRoute("source")?_c("pick-from-source"):_vm._e(),_vm.isRootRoute("summary")?_c("upload-summary"):_vm._e(),_vm.isRootRoute("transform")?_c("transform"):_vm._e(),_c("notifications"),_vm.localPickingAllowed&&!_vm.isRootRoute("transform")?_c("drag-and-drop"):_vm._e()],1):_vm._e()},staticRenderFns:[],components:{DragAndDrop:DragAndDrop,Notifications:Notifications,PickFromSource:PickFromSource,Transform:Transform,UploadSummary:UploadSummary},computed:_extends$1({},index_esm.mapGetters(["uiVisible","route","fromSources","pendingReqs","onClose"]),{localPickingAllowed:function localPickingAllowed(){return this.fromSources.some(function(source){return source.name==="local_file_system"})}}),methods:_extends$1({},index_esm.mapActions(["prefetchClouds"]),{isRootRoute:function isRootRoute(name){return this.route[0]===name},detectEscPressed:function detectEscPressed(event){if(event.keyCode===27){this.$root.$destroy()}}}),created:function created(){var _this=this;window.addEventListener("keyup",this.detectEscPressed);this.prefetchClouds();this.interval=setInterval(function(){if(_this.pendingReqs.length){_this.$store.commit("EXECUTE_PENDING_REQUEST")}},500)},destroyed:function destroyed(){window.removeEventListener("keyup",this.detectEscPressed);clearInterval(this.interval);this.$store.commit("CANCEL_ALL_PENDING_REQUESTS");if(this.onClose){this.onClose()}},watch:{route:{immediate:true,deep:true,handler:function handler(route){if(route[0]==="done"){this.$root.$destroy()}}}}};var cloud=function cloud(apiClient){var cloud=void 0;var convertToFileObj=function convertToFileObj(fileReturnedByApi,cloudName){var file=_extends$1({source:cloudName,sourceKind:"cloud"},fileReturnedByApi);return file};var initialState={currentCloudAuthorized:true,currentCloudName:undefined,currentCloudPath:undefined,listForCurrentCloudPath:[],cache:{},cloudFolders:{},cloudsAuthorized:{},cloudsPrefetching:{},loading:false,pendingReqs:[],pendingTokens:[]};var mutations={SET_CURRENT_CLOUD_AUTHORIZED:function SET_CURRENT_CLOUD_AUTHORIZED(state,value){state.currentCloudAuthorized=value},SET_CURRENT_CLOUD_NAME:function SET_CURRENT_CLOUD_NAME(state,name){state.currentCloudName=name},SET_CLOUD_AUTHORIZED:function SET_CLOUD_AUTHORIZED(state,_ref){var key=_ref.key,value=_ref.value;Vue$3.set(state.cloudsAuthorized,key,value)},RESET_CLOUD_AUTHORIZED:function RESET_CLOUD_AUTHORIZED(state){state.cloudsAuthorized={}},SET_CURRENT_CLOUD_PATH:function SET_CURRENT_CLOUD_PATH(state,path){var pathURL=path.length>0?last(path):path;var key=state.currentCloudName+pathURL;var cached=state.cache[key];if(cached){state.listForCurrentCloudPath=cached}state.currentCloudPath=path},SET_LIST_FOR_CURRENT_CLOUD_PATH:function SET_LIST_FOR_CURRENT_CLOUD_PATH(state,list){var path=state.currentCloudPath;var pathURL=path.length>0?last(path):path;var key=state.currentCloudName+pathURL;state.cache[key]=list;state.listForCurrentCloudPath=list},RESET_LIST_CURRENT_CLOUD_PATH:function RESET_LIST_CURRENT_CLOUD_PATH(state){state.listForCurrentCloudPath=[]},SET_CLOUD_FOLDERS:function SET_CLOUD_FOLDERS(state,folders){folders.forEach(function(folder){state.cloudFolders[folder.path]=_extends$1({},state.cloudFolders[folder.path],{name:folder.name})})},SET_CLOUD_FOLDER_LOADING:function SET_CLOUD_FOLDER_LOADING(state,_ref2){var path=_ref2.path,value=_ref2.value;state.cloudFolders=_extends$1({},state.cloudFolders,defineProperty$1({},path,_extends$1({},state.cloudFolders[path],{loading:value})))},SET_CLOUD_LOADING:function SET_CLOUD_LOADING(state,value){state.loading=value},SET_CLOUD_PREFETCHING:function SET_CLOUD_PREFETCHING(state,_ref3){var key=_ref3.key,value=_ref3.value;Vue$3.set(state.cloudsPrefetching,key,value)},SET_CACHE:function SET_CACHE(state,_ref4){var key=_ref4.key,value=_ref4.value;state.cache[key]=value},RESET_CACHE:function RESET_CACHE(state){state.cache={}},ADD_PENDING_REQUEST:function ADD_PENDING_REQUEST(state,_ref5){var request=_ref5.request,token=_ref5.token;state.pendingReqs.push({request:request,token:token})},EXECUTE_PENDING_REQUEST:function EXECUTE_PENDING_REQUEST(state){var item=state.pendingReqs.pop();if(item&&item.request&&item.token){item.request();state.pendingTokens.push(item.token)}},CANCEL_ALL_PENDING_REQUESTS:function CANCEL_ALL_PENDING_REQUESTS(state){state.pendingTokens.forEach(function(token){token.cancel()});state.pendingReqs=[];state.pendingTokens=[];state.cloudsPrefetching={}}};var actions={goToDirectory:function goToDirectory(context,dirName){if(dirName.path===context.getters.currentCloudPath.join("")){return}var newPath=clone(context.getters.currentCloudPath);newPath.push(dirName.path);var newRoute=["source",context.getters.currentCloudName,newPath];context.commit("CHANGE_ROUTE",newRoute)},logout:function logout(context,name){if(name){apiClient.cloud().logout(name).then(function(){context.commit("CANCEL_ALL_PENDING_REQUESTS");context.commit("SET_CLOUD_AUTHORIZED",{key:name,value:false});context.commit("REMOVE_SOURCE_FROM_WAITING",name);var keys=Object.keys(context.state.cache).filter(function(k){return k.indexOf(name)>=0});keys.forEach(function(key){context.commit("SET_CACHE",{key:key,value:null})});if(name===context.state.currentCloudName){context.commit("SET_CURRENT_CLOUD_AUTHORIZED",false);context.commit("RESET_LIST_CURRENT_CLOUD_PATH");context.commit("CHANGE_ROUTE",["source",name])}})}else{apiClient.cloud().logout().then(function(){context.commit("RESET_CLOUD_AUTHORIZED");context.commit("SET_CURRENT_CLOUD_AUTHORIZED",false);context.commit("RESET_CACHE");context.commit("RESET_LIST_CURRENT_CLOUD_PATH");context.commit("REMOVE_CLOUDS_FROM_WAITING");context.commit("CANCEL_ALL_PENDING_REQUESTS")})}},prefetchClouds:function prefetchClouds(context){var clouds=context.getters.fromSources.filter(function(s){return s.ui==="cloud"}).map(function(s){return s.name});clouds.forEach(function(name){context.commit("SET_CLOUD_PREFETCHING",{key:name,value:true});var client=apiClient.cloud(name);var token={};var request=function request(){return client.list([],token).then(function(response){
context.commit("SET_CLOUD_PREFETCHING",{key:name,value:false});context.commit("SET_CLOUD_AUTHORIZED",{key:name,value:true});var list=response.contents.map(function(file){return convertToFileObj(file,name)});var folders=list.filter(function(f){return f.folder});context.commit("SET_CLOUD_FOLDERS",folders);context.commit("SET_CACHE",{key:name,value:list});var currentName=context.getters.currentCloudName;if(currentName===name){context.commit("SET_LIST_FOR_CURRENT_CLOUD_PATH",list);context.dispatch("prefetchFolders",{client:client,name:name,folders:folders})}}).catch(function(err){context.commit("SET_CLOUD_PREFETCHING",{key:name,value:false});if(context.getters.currentCloudName===name){if(err.status===401){context.commit("SET_CURRENT_CLOUD_AUTHORIZED",{status:"unauthorized",authUrl:err.response.body.redirect_url})}}})};context.commit("ADD_PENDING_REQUEST",{request:request,token:token})})},prefetchFolders:function prefetchFolders(context,_ref6){var client=_ref6.client,name=_ref6.name,folders=_ref6.folders;folders.forEach(function(folder){var key=name+folder.path;if(context.state.cache[key]){return}var token={};var request=function request(){context.commit("SET_CLOUD_PREFETCHING",{key:key,value:true});return client.list(folder.path,token).then(function(response){var path=context.getters.currentCloudPath;var pathURL=path.length>0?last(path):path;var list=response.contents.map(function(file){return convertToFileObj(file,name)});var nestedFolders=list.filter(function(f){return f.folder});context.commit("SET_CLOUD_PREFETCHING",{key:key,value:false});context.commit("SET_CLOUD_FOLDERS",nestedFolders);context.commit("SET_CACHE",{key:key,value:list});if(folder.path===pathURL){context.commit("SET_LIST_FOR_CURRENT_CLOUD_PATH",list);context.dispatch("prefetchFolders",{client:client,name:name,folders:nestedFolders})}}).catch(function(err){context.commit("SET_CLOUD_PREFETCHING",{key:key,value:false});var path=context.getters.currentCloudPath;var pathURL=path.length>0?last(path):path;if(folder.path===pathURL){if(err.status===401){context.commit("SET_CURRENT_CLOUD_AUTHORIZED",{status:"unauthorized",authUrl:err.response.body.redirect_url})}}})};context.commit("ADD_PENDING_REQUEST",{request:request,token:token})})},addCloudFolder:function addCloudFolder(context,_ref7){var name=_ref7.name,path=_ref7.path;var action=void 0;var key=name+path;var cached=context.state.cache[key];if(cached){action=Promise.resolve(cached)}else{cloud=apiClient.cloud(name);action=cloud.list(path);context.commit("SET_CLOUD_FOLDER_LOADING",{path:path,value:true})}action.then(function(response){if(cached){var _list=response.filter(function(f){return!f.folder});_list.forEach(function(f){return context.dispatch("addFile",f)});return}context.commit("SET_CLOUD_FOLDER_LOADING",{path:path,value:false});var list=response.contents.map(function(file){return convertToFileObj(file,name)});context.commit("SET_CACHE",{key:key,value:list});list.filter(function(f){return!f.folder}).forEach(function(f){return context.dispatch("addFile",f)})}).catch(function(err){context.commit("SET_CLOUD_FOLDER_LOADING",{path:path,value:false});context.dispatch("showNotification",err.message)})},showCloudPath:function showCloudPath(context,_ref8){var name=_ref8.name,_ref8$path=_ref8.path,path=_ref8$path===undefined?[]:_ref8$path;if(context.getters.currentCloudName!==name){cloud=apiClient.cloud(name);context.commit("SET_CURRENT_CLOUD_NAME",name)}if(context.getters.currentCloudAuthorized!==true){context.commit("SET_CURRENT_CLOUD_AUTHORIZED",true)}var pathURL=path.length>0?last(path):path;var key=name+pathURL;var cached=context.state.cache[key];context.commit("RESET_LIST_CURRENT_CLOUD_PATH");context.commit("SET_CURRENT_CLOUD_PATH",path);context.commit("CANCEL_ALL_PENDING_REQUESTS");if(cached){var folders=cached.filter(function(f){return f.folder});context.dispatch("prefetchFolders",{client:cloud,name:name,folders:folders});return}if(context.getters.cloudsPrefetching[key]){return}var request=function request(url){context.commit("SET_CLOUD_LOADING",true);return cloud.list(url).then(function(response){if(context.getters.currentCloudPath===path){var list=response.contents.map(function(file){return convertToFileObj(file,name)});var _folders=list.filter(function(f){return f.folder});context.dispatch("prefetchFolders",{client:cloud,name:name,folders:_folders});context.commit("SET_CLOUD_FOLDERS",_folders);context.commit("SET_LIST_FOR_CURRENT_CLOUD_PATH",list);context.commit("SET_CLOUD_LOADING",false);context.commit("SET_CLOUD_AUTHORIZED",{key:name,value:true})}}).catch(function(err){context.commit("SET_CLOUD_LOADING",false);if(context.getters.currentCloudPath===path){if(err.status===401){context.commit("SET_CURRENT_CLOUD_AUTHORIZED",{status:"unauthorized",authUrl:err.response.body.redirect_url})}else{context.dispatch("showNotification",err.response.body.status)}}})};request(pathURL)}};var getters={currentCloudAuthorized:function currentCloudAuthorized(st){return st.currentCloudAuthorized},currentCloudName:function currentCloudName(st){return st.currentCloudName},currentCloudPath:function currentCloudPath(st){return st.currentCloudPath},listForCurrentCloudPath:function listForCurrentCloudPath(st){return st.listForCurrentCloudPath},cloudFolders:function cloudFolders(st){return st.cloudFolders},cloudLoading:function cloudLoading(st){return st.loading},cloudsPrefetching:function cloudsPrefetching(st){return st.cloudsPrefetching},cloudsAuthorized:function cloudsAuthorized(st){return st.cloudsAuthorized},pendingReqs:function pendingReqs(st){return st.pendingReqs}};return{state:initialState,mutations:mutations,actions:actions,getters:getters}};var imageSearch=function imageSearch(apiClient){var convertToFileObj=function convertToFileObj(fileReturnedByApi){var file=_extends$1({source:"imagesearch",sourceKind:"cloud"},fileReturnedByApi);return file};var initialState={input:"",isSearching:false,result:null,error:null};var mutations={UPDATE_INPUT:function UPDATE_INPUT(state,value){state.input=value},FETCH_IMAGES_BEGIN:function FETCH_IMAGES_BEGIN(state){state.isSearching=true},FETCH_IMAGES_SUCCESS:function FETCH_IMAGES_SUCCESS(state,result){state.result=result;state.isSearching=false},FETCH_IMAGES_ERROR:function FETCH_IMAGES_ERROR(state,error){state.error=error;state.isSearching=false},CLEAR_RESULT_NAME:function CLEAR_RESULT_NAME(state){if(state.result){state.result.name=null}}};var actions={updateSearchInput:function updateSearchInput(context,value){if(value===""||value===context.getters.imageSearchName){context.commit("CLEAR_RESULT_NAME")}context.commit("UPDATE_INPUT",value)},fetchImages:function fetchImages(context){if(context.getters.isSearching){return}var input=context.getters.imageSearchInput;if(input){context.commit("FETCH_IMAGES_BEGIN");apiClient.cloud("imagesearch").list("/"+input).then(function(res){if(res.contents.length===0){context.dispatch("showNotification","No search results found for "+input)}res.contents=res.contents.map(convertToFileObj);context.commit("FETCH_IMAGES_SUCCESS",res)}).catch(function(err){context.commit("FETCH_IMAGES_ERROR",err);context.dispatch("showNotification",err.message)})}}};var getters={isSearching:function isSearching(st){return st.isSearching},noResultsFound:function noResultsFound(st){return st.result&&st.result.contents.length===0},resultsFound:function resultsFound(st){return st.result&&st.result.contents.length>0},imageSearchInput:function imageSearchInput(st){return st.input},imageSearchName:function imageSearchName(st){return st.result&&st.result.name},imageSearchResults:function imageSearchResults(st){return st.result&&st.result.contents},imageSearchError:function imageSearchError(st){return st.error}};return{state:initialState,mutations:mutations,actions:actions,getters:getters}};var notificationTime=5e3;var mutations={ADD_NOTIFICATION:function ADD_NOTIFICATION(state,notification){state.notifications.push(notification)},REMOVE_NOTIFICATION:function REMOVE_NOTIFICATION(state,notificationToBeRemoved){state.notifications=state.notifications.filter(function(notification){return notification!==notificationToBeRemoved})},REMOVE_ALL_NOTIFICATIONS:function REMOVE_ALL_NOTIFICATIONS(state){state.notifications.splice(0,state.notifications.length)}};var actions={showNotification:function showNotification(context,message,options){var notification=_extends$1({message:message},options);var messages=context.getters.notifications.map(function(n){return n.message});if(messages.indexOf(message)<0){context.commit("ADD_NOTIFICATION",notification);setTimeout(function(){context.commit("REMOVE_NOTIFICATION",notification)},notificationTime)}},removeAllNotifications:function removeAllNotifications(context){context.commit("REMOVE_ALL_NOTIFICATIONS")}};var getters={notifications:function notifications(st){return st.notifications}};var notifications={state:{notifications:[]},mutations:mutations,actions:actions,getters:getters};var transformer=function transformer(apiClient,config,onTransformerDone){var stateOverrides=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var initialState={imageUrl:null,imageNaturalWidth:0,imageNaturalHeight:0,originalUrl:null,imageLoading:true,imageUploading:false,transformations:{},cropRectangle:null,activeTransform:null};var getImageUrl=function getImageUrl(url){if(url){var sec=apiClient.getSecurity();if(sec&&sec.policy&&sec.signature){if(url.indexOf("https://process.filestackapi.com")===-1&&url.indexOf("https://process-stage.filestackapi.com")===-1&&url.indexOf("blob:")===-1&&url.indexOf("?policy=")===-1){return url+"?policy="+sec.policy+"&signature="+sec.signature}}}return url};var mutations={SET_IMAGE_NATURAL_SIZE:function SET_IMAGE_NATURAL_SIZE(state,payload){state.imageNaturalWidth=payload.w;state.imageNaturalHeight=payload.h},SET_CROP_RECTANGLE:function SET_CROP_RECTANGLE(state,rectangle){state.cropRectangle=rectangle},SET_ACTIVE_TRANSFORM:function SET_ACTIVE_TRANSFORM(state,transform){state.activeTransform=transform},SET_ORIGINAL_URL:function SET_ORIGINAL_URL(state,url){state.originalUrl=url},SET_IMAGE_URL:function SET_IMAGE_URL(state,url){var newUrl=getImageUrl(url);state.originalUrl=state.originalUrl||url;state.imageUrl=newUrl},SET_TRANSFORMATION:function SET_TRANSFORMATION(state,_ref){var type=_ref.type,options=_ref.options;Vue$3.set(state.transformations,type,options)},REMOVE_TRANSFORMATION:function REMOVE_TRANSFORMATION(state,name){Vue$3.delete(state.transformations,name)},SET_IMAGE_LOADING:function SET_IMAGE_LOADING(state,value){state.imageLoading=value},SET_IMAGE_UPLOADING:function SET_IMAGE_UPLOADING(state,value){state.imageUploading=value},RESET_TRANSFORMATIONS:function RESET_TRANSFORMATIONS(state){state.transformations={};state.cropRectangle=null;state.activeTransform=null;state.imageUrl=null;state.originalUrl=null}};var actions={performTransformations:function performTransformations(context){var done=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var st=context.state;var options=_extends$1({},st.transformations);if(st.transformations.crop){var cr=st.transformations.crop.dim;if(st.config.minDimensions&&(st.config.minDimensions[0]>cr.width||st.config.minDimensions[1]>cr.height)){options.resize={};options.resize.width=st.config.minDimensions[0];options.resize.height=st.config.minDimensions[1]}if(st.config.maxDimensions&&(st.config.maxDimensions[0]<cr.width||st.config.maxDimensions[1]<cr.height)){options.resize={};options.resize.width=st.config.maxDimensions[0];options.resize.height=st.config.maxDimensions[1]}}else{if(st.config.minDimensions&&(st.config.minDimensions[0]>st.imageNaturalWidth||st.config.minDimensions[1]>st.imageNaturalHeight)){options.resize={};options.resize.width=st.config.minDimensions[0];options.resize.height=st.config.minDimensions[1]}if(st.config.maxDimensions&&(st.config.maxDimensions[0]<st.imageNaturalWidth||st.config.maxDimensions[1]<st.imageNaturalHeight)){options.resize={};options.resize.width=st.config.maxDimensions[0];options.resize.height=st.config.maxDimensions[1]}}if(st.imageUploading){return new Promise(function(resolve){if(done&&!Object.keys(options).length){resolve();return}var check=function check(){var timeout=setTimeout(function(){if(st.imageUploading){check();if(!done&&Object.keys(options).length)context.commit("SET_IMAGE_LOADING",true)}else{clearTimeout(timeout);context.dispatch("performTransformations",done);resolve()}},200)};check()})}if(done){try{if(Object.keys(options).length){var newUrl=apiClient.transform(context.getters.originalUrl,options);context.commit("SET_FILE_TRANSFORMATION",newUrl)}}catch(err){console.log(err)}}else{delete options.resize;var _newUrl=apiClient.transform(context.getters.originalUrl,options);if(context.getters.imageUrl!==_newUrl){context.commit("SET_IMAGE_URL",_newUrl);context.commit("SET_IMAGE_LOADING",true)}}return Promise.resolve()}};var getters={imageUrl:function imageUrl(st){return getImageUrl(st.imageUrl)},originalUrl:function originalUrl(st){return st.originalUrl},imageNaturalWidth:function imageNaturalWidth(st){return st.imageNaturalWidth},imageNaturalHeight:function imageNaturalHeight(st){return st.imageNaturalHeight},imageLoading:function imageLoading(st){return st.imageLoading},imageUploading:function imageUploading(st){return st.imageUploading},cachedCropRectangle:function cachedCropRectangle(st){return st.cropRectangle},transformations:function transformations(st){return st.transformations},cropEnabled:function cropEnabled(st){return st.config.crop},cropCircleEnabled:function cropCircleEnabled(st){return st.config.crop&&st.config.crop.circle&&(!st.config.crop.aspectRatio||st.config.crop.aspectRatio===1)},filtersEnabled:function filtersEnabled(st){if(st.config.filters&&st.config.filters.length){return st.config.filters}return false},activeTransform:function activeTransform(st){return st.activeTransform},cropAspectRatio:function cropAspectRatio(st){return st.config.crop&&st.config.crop.aspectRatio}};return{state:_extends$1({},initialState,{config:config},stateOverrides),mutations:mutations,actions:actions,getters:getters}};Vue$3.use(index_esm);var createStore=function createStore(apiClient,config,onPickerDone,initialState){var firstSource=config.fromSources[0];var initialRoute=["source",firstSource.name];initialState=_extends$1({apiClient:apiClient,config:config,route:initialRoute,routesHistory:[],mobileNavActive:checkMobile(navigator.userAgent),selectLabelIsActive:false},initialState);return new index_esm.Store({state:initialState,modules:{uploadQueue:uploadQueue(apiClient,initialState.uploadQueue),cloud:cloud(apiClient),imageSearch:imageSearch(apiClient),transformer:transformer(apiClient,config.transformations),notifications:notifications},mutations:{CHANGE_ROUTE:function CHANGE_ROUTE(state,newRoute){if(checkMobile(navigator.userAgent)&&newRoute.indexOf("local_file_system")!==-1){state.mobileNavActive=true}state.routesHistory.push(state.route);state.route=newRoute},GO_BACK_WITH_ROUTE:function GO_BACK_WITH_ROUTE(state){var lastRoute=state.routesHistory.pop();if(checkMobile(navigator.userAgent)&&lastRoute.indexOf("local_file_system")!==-1){state.mobileNavActive=true}state.route=lastRoute},UPDATE_MOBILE_NAV_ACTIVE:function UPDATE_MOBILE_NAV_ACTIVE(state,isActive){state.mobileNavActive=isActive},UPDATE_SELECT_LABEL_ACTIVE:function UPDATE_SELECT_LABEL_ACTIVE(state,isActive){state.selectLabelIsActive=isActive}},actions:{allUploadsDone:function allUploadsDone(context){context.commit("CHANGE_ROUTE",["done"]);var filesUploaded=convertFileListForOutsideWorld(context.getters.filesDone);var filesFailed=convertFileListForOutsideWorld(context.getters.filesFailed);onPickerDone({filesUploaded:filesUploaded,filesFailed:filesFailed})},goBack:function goBack(context){context.commit("GO_BACK_WITH_ROUTE")},updateMobileNavActive:function updateMobileNavActive(context,isActive){context.commit("UPDATE_MOBILE_NAV_ACTIVE",isActive)},updateSelectLabelActive:function updateSelectLabelActive(context,isActive){context.commit("UPDATE_SELECT_LABEL_ACTIVE",isActive)}},getters:{apiClient:function apiClient(st){return st.apiClient},uiVisible:function uiVisible(st,getters){if(getters.uploadStarted&&st.config.hideWhenUploading){return false}return true},route:function route(st){return st.route},routesHistory:function routesHistory(st){return st.routesHistory},fromSources:function fromSources(st){return st.config.fromSources},accept:function accept(st){return st.config.accept},preferLinkOverStore:function preferLinkOverStore(st){return st.config.preferLinkOverStore},maxSize:function maxSize(st){return st.config.maxSize},minFiles:function minFiles(st){return st.config.minFiles},maxFiles:function maxFiles(st){return st.config.maxFiles},startUploadingWhenMaxFilesReached:function startUploadingWhenMaxFilesReached(st){return st.config.startUploadingWhenMaxFilesReached},storeTo:function storeTo(st){return st.config.storeTo},uploadInBackground:function uploadInBackground(st){return st.config.uploadInBackground},onFileSelected:function onFileSelected(st){return st.config.onFileSelected},onFileUploadStarted:function onFileUploadStarted(st){return st.config.onFileUploadStarted},onFileUploadProgress:function onFileUploadProgress(st){return st.config.onFileUploadProgress},onFileUploadFinished:function onFileUploadFinished(st){return st.config.onFileUploadFinished},onFileUploadFailed:function onFileUploadFailed(st){return st.config.onFileUploadFailed},mobileNavActive:function mobileNavActive(st){return st.mobileNavActive},selectLabelIsActive:function selectLabelIsActive(st){return st.selectLabelIsActive},disableTransformer:function disableTransformer(st){return st.config.disableTransformer},lang:function lang(st){return st.config.lang},onClose:function onClose(st){return st.config.onClose}}})};var isNumber$1=function isNumber(thing){return typeof thing==="number"};var isObject$3$2=function isObject(thing){return(typeof thing==="undefined"?"undefined":_typeof$2$1(thing))==="object"&&thing!==null&&Array.isArray(thing)===false};var isInteger=function isInteger(n){return n%1===0};var parsers={fromSources:function fromSources(sourcesDefinedByUser){if(typeof sourcesDefinedByUser==="string"){sourcesDefinedByUser=[sourcesDefinedByUser]}return sourcesDefinedByUser.map(getByName)},accept:function accept(acceptDefinedByUser){if(typeof acceptDefinedByUser==="string"){acceptDefinedByUser=[acceptDefinedByUser]}acceptDefinedByUser.forEach(function(oneOfAcceptValues){if(typeof oneOfAcceptValues!=="string"){throw new Error('Invalid value for "accept" config option')}});return acceptDefinedByUser},preferLinkOverStore:function preferLinkOverStore(preferLinkOverStoreDefinedByUser){if(typeof preferLinkOverStoreDefinedByUser!=="boolean"){throw new Error('Invalid value for "preferLinkOverStore" config option')}return preferLinkOverStoreDefinedByUser},maxSize:function maxSize(maxSizeDefinedByUser){if(typeof maxSizeDefinedByUser!=="number"||!isInteger(maxSizeDefinedByUser)||maxSizeDefinedByUser<0){throw new Error('Invalid value for "maxSize" config option')}return maxSizeDefinedByUser},minFiles:function minFiles(minFilesDefinedByUser){if(typeof minFilesDefinedByUser!=="number"||!isInteger(minFilesDefinedByUser)||minFilesDefinedByUser<0){throw new Error('Invalid value for "minFiles" config option')}return minFilesDefinedByUser},maxFiles:function maxFiles(maxFilesDefinedByUser){if(typeof maxFilesDefinedByUser!=="number"||!isInteger(maxFilesDefinedByUser)||maxFilesDefinedByUser<0){throw new Error('Invalid value for "maxFiles" config option')}return maxFilesDefinedByUser},startUploadingWhenMaxFilesReached:function startUploadingWhenMaxFilesReached(startUploadingWhenMaxFilesReachedDefinedByUser){if(typeof startUploadingWhenMaxFilesReachedDefinedByUser!=="boolean"){throw new Error('Invalid value for "startUploadingWhenMaxFilesReached" config option')}return startUploadingWhenMaxFilesReachedDefinedByUser},loadCss:function loadCss(loadCssDefinedByUser){if(typeof loadCssDefinedByUser==="boolean"&&loadCssDefinedByUser===false||typeof loadCssDefinedByUser==="string"){return loadCssDefinedByUser}throw new Error('Invalid value for "loadCss" config option')},lang:function lang(langDefinedByUser){if(typeof langDefinedByUser==="boolean"&&langDefinedByUser===false||typeof langDefinedByUser==="string"){return langDefinedByUser}throw new Error('Invalid value for "lang" config option')},storeTo:function storeTo(storeToDefinedByUser){if(isObject$3$2(storeToDefinedByUser)){return storeToDefinedByUser}throw new Error('Invalid value for "storeTo" config option')},hideWhenUploading:function hideWhenUploading(hideWhenUploadingDefinedByUser){if(typeof hideWhenUploadingDefinedByUser!=="boolean"){throw new Error('Invalid value for "hideWhenUploading" config option')}return hideWhenUploadingDefinedByUser},uploadInBackground:function uploadInBackground(uploadInBackgroundDefinedByUser){if(typeof uploadInBackgroundDefinedByUser!=="boolean"){throw new Error('Invalid value for "uploadInBackground" config option')}return uploadInBackgroundDefinedByUser},disableTransformer:function disableTransformer(enableTransformerDefinedByUser){if(typeof enableTransformerDefinedByUser!=="boolean"){throw new Error('Invalid value for "disableTransformer" config option')}return enableTransformerDefinedByUser},onFileSelected:function onFileSelected(onFileSelectedDefinedByUser){if(typeof onFileSelectedDefinedByUser!=="function"){throw new Error('Invalid value for "onFileSelected" config option')}return onFileSelectedDefinedByUser},onFileUploadStarted:function onFileUploadStarted(onFileSelectedDefinedByUser){if(typeof onFileSelectedDefinedByUser!=="function"){throw new Error('Invalid value for "onFileUploadStarted" config option')}return onFileSelectedDefinedByUser},onFileUploadProgress:function onFileUploadProgress(onFileSelectedDefinedByUser){if(typeof onFileSelectedDefinedByUser!=="function"){throw new Error('Invalid value for "onFileUploadProgress" config option')}return onFileSelectedDefinedByUser},onFileUploadFinished:function onFileUploadFinished(onFileSelectedDefinedByUser){if(typeof onFileSelectedDefinedByUser!=="function"){throw new Error('Invalid value for "onFileUploadFinished" config option')}return onFileSelectedDefinedByUser},onFileUploadFailed:function onFileUploadFailed(onFileSelectedDefinedByUser){if(typeof onFileSelectedDefinedByUser!=="function"){throw new Error('Invalid value for "onFileUploadFailed" config option')}return onFileSelectedDefinedByUser},onClose:function onClose(onCloseDefinedByUser){if(typeof onCloseDefinedByUser!=="function"){throw new Error('Invalid value for "onClose" config option')}return onCloseDefinedByUser},transformations:function transformations(transformationsDefinedByUser){if(isObject$3$2(transformationsDefinedByUser)){return transformationsDefinedByUser}throw new Error('Invalid value for "transformations" config option')},"transformations.crop":function transformationsCrop(cropDefinedByUser){if(isObject$3$2(cropDefinedByUser)){return cropDefinedByUser}if(cropDefinedByUser===true){return{}}if(cropDefinedByUser===false){return false}throw new Error('Invalid value for "transformations.crop" config option')},"transformations.crop.aspectRatio":function transformationsCropAspectRatio(aspectRatioDefinedByUser){if(isNumber$1(aspectRatioDefinedByUser)){return aspectRatioDefinedByUser}throw new Error('Invalid value for "transformations.crop.aspectRatio" config option')},"transformations.crop.circle":function transformationsCropCircle(circle){if(typeof circle!=="boolean"){throw new Error('Invalid value for "transformations.crop.circle" config option')}return circle},"transformations.filters":function transformationsFilters(filters){var allowed=["sepia","monochrome"];if(!Array.isArray(filters)){throw new Error('Option "transformations.filters" must be an array of strings')}filters.forEach(function(f){if(allowed.indexOf(f)<0){throw new Error(f+' is not a valid option for "transformations.filters"')}if(typeof f!=="string"){throw new Error('Option "transformations.filters" must be an array of strings')}});return filters},"transformations.minDimensions":function transformationsMinDimensions(minDimensionsDefinedByUser){if(Array.isArray(minDimensionsDefinedByUser)){if(minDimensionsDefinedByUser.length===2){var oneOfElementsIsNotNumber=minDimensionsDefinedByUser.some(function(num){return typeof num!=="number"});if(!oneOfElementsIsNotNumber){return minDimensionsDefinedByUser}throw new Error('Option "transformations.minDimensions" requires array of numbers')}throw new Error('Option "transformations.minDimensions" requires array with exactly two elements: [width, height]')}throw new Error('Invalid value for "transformations.minDimensions" config option')},"transformations.maxDimensions":function transformationsMaxDimensions(maxDimensionsDefinedByUser){if(Array.isArray(maxDimensionsDefinedByUser)){if(maxDimensionsDefinedByUser.length===2){var oneOfElementsIsNotNumber=maxDimensionsDefinedByUser.some(function(num){return typeof num!=="number"});if(!oneOfElementsIsNotNumber){return maxDimensionsDefinedByUser}throw new Error('Option "transformations.maxDimensions" requires array of numbers')}throw new Error('Option "transformations.maxDimensions" requires array with exactly two elements: [width, height]')}throw new Error('Invalid value for "transformations.maxDimensions" config option')}};var addConfigDefaults=function addConfigDefaults(config,env){if(config.fromSources===undefined){config.fromSources=["local_file_system","imagesearch","facebook","instagram","googledrive","dropbox"]}if(config.preferLinkOverStore===undefined){config.preferLinkOverStore=false}if(config.minFiles===undefined){config.minFiles=1}if(config.maxFiles===undefined){config.maxFiles=1}if(config.startUploadingWhenMaxFilesReached===undefined){config.startUploadingWhenMaxFilesReached=false}if(config.loadCss===undefined){config.loadCss=env.css.main}if(config.hideWhenUploading===undefined){config.hideWhenUploading=false}if(config.lang===undefined){config.lang="en"}if(config.uploadInBackground===undefined){config.uploadInBackground=true}if(config.disableTransformer===undefined){config.disableTransformer=false}if(config.transformations===undefined){config.transformations={crop:{},filters:["sepia","monochrome"]}}if(config.transformations.crop===undefined||config.transformations.crop===true){config.transformations.crop={}}if(config.transformations.crop.circle===undefined){config.transformations.crop.circle=true}if(config.transformations.filters===undefined){config.transformations.filters=["sepia","monochrome"]}return config};var parseConfig=function parseConfig(config,parentKey){var parsedConfig={};Object.keys(config).forEach(function(configOption){var key=configOption;if(parentKey){key=parentKey+"."+configOption}var parser=parsers[key];if(parser){var parsed=parser(config[configOption]);if(isObject$3$2(parsed)&&key.indexOf("transformations")!==-1){parsedConfig[configOption]=parseConfig(parsed,key)}else{parsedConfig[configOption]=parsed}}else{throw new Error('Unknown config option "'+key+'"')}});if(parsedConfig.minFiles!==undefined&&parsedConfig.maxFiles!==undefined&&parsedConfig.minFiles>parsedConfig.maxFiles){throw new Error('Config option "minFiles" must be smaller or equal to "maxFiles"')}return parsedConfig};window.Vue=GlobalVue;var log$1$2=logger$3.context("picker");var showPicker=function showPicker(apiClient,config,initialStateOverrides){return new Promise(function(resolve){var onPickerDone=function onPickerDone(result){resolve(result)};Vue$3.use(vueTranslate_common);Vue$3.locales(languages);var root=document.createElement("div");document.body.appendChild(root);var vm=new Vue$3({el:root,store:createStore(apiClient,config,onPickerDone,initialStateOverrides),render:function render(h){return h(App)},created:function created(){this.$translate.setLang(config.lang);document.body.classList.add("fsp-picker-open")},destroyed:function destroyed(){vm.$el.parentNode.removeChild(vm.$el);document.body.classList.remove("fsp-picker-open")}})})};var loadCssMaybe=function loadCssMaybe(config){if(config.loadCss===false){return Promise.resolve()}return index$2.loadCss(config.loadCss)};var pick=function pick(apiClient){var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var initialStateOverrides=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};log$1$2("Starting picker v0.6.6 with config:",config);config=parseConfig(addConfigDefaults(config,ENV$1));return loadCssMaybe(config).then(function(){return showPicker(apiClient,config,initialStateOverrides)})};var api=function(apikey,security){var moduleOverrides=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(typeof apikey!=="string"){throw new Error("No apikey specified")}if(security&&!(security.policy&&security.signature)){throw new Error("signature and policy are both required for security")}var client$$1=moduleOverrides.apiClient||client.init(apikey,security);logger$1("Initiated with apikey "+apikey);return{getSecurity:function getSecurity(){return client$$1.getSecurity()},setSecurity:function setSecurity(sec){return client$$1.setSecurity(sec)},pick:function pick$$1(options){return pick(client$$1,options)},storeURL:function storeURL(url,options){return client$$1.storeURL(url,options)},transform:function transform(url,options){return client$$1.transform(url,options)},upload:function upload(file,uploadOptions,storeOptions,token){return client$$1.upload(file,uploadOptions,storeOptions,token)},retrieve:function retrieve(handle,options){return client$$1.retrieve(handle,options)},remove:function remove(handle){return client$$1.remove(handle)},metadata:function metadata(handle,options){return client$$1.metadata(handle,options)}}};var init=function init(apikey,security){return api(apikey,security)};var filestack={version:"0.6.3",init:init};return filestack});
//# sourceMappingURL=filestack.js.map
